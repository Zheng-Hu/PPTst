(function(e){function t(t){for(var o,r,a=t[0],l=t[1],u=t[2],d=0,p=[];d<a.length;d++)r=a[d],Object.prototype.hasOwnProperty.call(c,r)&&c[r]&&p.push(c[r][0]),c[r]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);s&&s(t);while(p.length)p.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],o=!0,a=1;a<n.length;a++){var l=n[a];0!==c[l]&&(o=!1)}o&&(i.splice(t--,1),e=r(r.s=n[0]))}return e}var o={},c={app:0},i=[];function r(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=o,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/PPTst/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],l=a.push.bind(a);a.push=t,a=a.slice();for(var u=0;u<a.length;u++)t(a[u]);var s=l;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"0333":function(e,t,n){"use strict";n("20d7")},"0a02":function(e,t,n){},"0a56":function(e,t,n){"use strict";n("ecf8")},"0f5f":function(e,t,n){},"0f90":function(e,t,n){"use strict";n("eb08")},1:function(e,t){},10:function(e,t){},11:function(e,t){},12:function(e,t){},13:function(e,t){},14:function(e,t){},1540:function(e,t,n){"use strict";n("febb")},2:function(e,t){},"202c":function(e,t,n){},"20d7":function(e,t,n){},"21ca":function(e,t,n){"use strict";n("0a02")},"241e":function(e,t,n){},2769:function(e,t,n){"use strict";n("851d")},"2c7d":function(e,t,n){"use strict";n("7475")},3:function(e,t){},"323f":function(e,t,n){},"34cf":function(e,t,n){},3711:function(e,t,n){},4:function(e,t){},"430e":function(e,t,n){"use strict";n("202c")},4395:function(e,t,n){"use strict";n("a4b3")},"48e7":function(e,t,n){"use strict";n("ff8d")},"494d":function(e,t,n){"use strict";n("0f5f")},"4a14":function(e,t,n){"use strict";n("7688")},"4b70":function(e,t,n){"use strict";n("5a20")},"4e63":function(e,t,n){"use strict";n("62e2")},5:function(e,t){},5448:function(e,t,n){},"5a20":function(e,t,n){},"5ec9":function(e,t,n){"use strict";n("9dbe")},6:function(e,t){},"62e2":function(e,t,n){},6387:function(e,t,n){"use strict";n("986e")},"6a38":function(e,t,n){},7:function(e,t){},7475:function(e,t,n){},7688:function(e,t,n){},"7f12":function(e,t,n){},8:function(e,t){},"851d":function(e,t,n){},"86a4":function(e,t,n){"use strict";n("5448")},"86fb":function(e,t,n){},"8a22":function(e,t,n){"use strict";n("241e")},"8c93":function(e,t,n){},9:function(e,t){},"986e":function(e,t,n){},"9dbe":function(e,t,n){},"9ea0":function(e,t,n){},"9ef8":function(e,t,n){"use strict";n("3711")},a4b3:function(e,t,n){},aa47:function(e,t,n){"use strict";n("9ea0")},b8d1:function(e,t,n){"use strict";n("6a38")},c4fe:function(e,t,n){},c860:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("7a23");function c(e,t,n,c,i,r){var a=Object(o["resolveComponent"])("Editor"),l=Object(o["resolveComponent"])("Screen");return e.screening?(Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:1})):(Object(o["openBlock"])(),Object(o["createBlock"])(a,{key:0}))}var i,r,a=n("5502"),l=(n("4de4"),n("7db0"),n("caad"),n("d81d"),n("2532"),{currentSlide:function(e){return e.slides[e.slideIndex]||null},currentSlideAnimations:function(e){var t=e.slides[e.slideIndex];if(!t)return null;var n=t.animations;if(!n)return null;var o=t.elements,c=o.map((function(e){return e.id}));return n.filter((function(e){return c.includes(e.elId)}))},activeElementList:function(e){var t=e.slides[e.slideIndex];return t&&t.elements?t.elements.filter((function(t){return e.activeElementIdList.includes(t.id)})):[]},handleElement:function(e){var t=e.slides[e.slideIndex];return t&&t.elements&&t.elements.find((function(t){return e.handleElementId===t.id}))||null},canUndo:function(e){return e.snapshotCursor>0},canRedo:function(e){return e.snapshotCursor<e.snapshotLength-1},ctrlOrShiftKeyActive:function(e){return e.ctrlKeyState||e.shiftKeyState}}),u=(n("fb6a"),n("d3b7"),n("ddb0"),n("ade3")),s=(n("96cf"),n("1da1"));(function(e){e["SET_ACTIVE_ELEMENT_ID_LIST"]="setActiveElementIdList",e["SET_HANDLE_ELEMENT_ID"]="setHandleElementId",e["SET_CANVAS_PERCENTAGE"]="setCanvasPercentage",e["SET_CANVAS_SCALE"]="setCanvasScale",e["SET_THUMBNAILS_FOCUS"]="setThumbnailsFocus",e["SET_EDITORAREA_FOCUS"]="setEditorAreaFocus",e["SET_DISABLE_HOTKEYS_STATE"]="setDisableHotkeysState",e["SET_GRID_LINES_STATE"]="setGridLinesState",e["SET_AVAILABLE_FONTS"]="setAvailableFonts",e["SET_TOOLBAR_STATE"]="setToolbarState",e["SET_SLIDES"]="setSlides",e["ADD_SLIDE"]="addSlide",e["UPDATE_SLIDE"]="updateSlide",e["DELETE_SLIDE"]="deleteSlide",e["UPDATE_SLIDE_INDEX"]="updateSlideIndex",e["ADD_ELEMENT"]="addElement",e["UPDATE_ELEMENT"]="updateElement",e["SET_SNAPSHOT_CURSOR"]="setSnapshotCursor",e["SET_SNAPSHOT_LENGTH"]="setSnapshotLength",e["SET_CTRL_KEY_STATE"]="setCtrlKeyState",e["SET_SHIFT_KEY_STATE"]="setShiftKeyState",e["SET_SCREENING"]="setScreening"})(i||(i={})),function(e){e["INIT_SNAPSHOT_DATABASE"]="initSnapshotDatabase",e["ADD_SNAPSHOT"]="addSnapshot",e["UN_DO"]="undo",e["RE_DO"]="redo"}(r||(r={}));var d,p,f=n("d4ec"),m=n("262e"),h=n("2caf"),v=n("4dec"),b=function(e){Object(m["a"])(n,e);var t=Object(h["a"])(n);function n(){var e;return Object(f["a"])(this,n),e=t.call(this,"SnapshotDatabase"),e.version(1).stores({snapshots:"++id"}),e.snapshots=e.table("snapshots"),e}return n}(v["a"]),O=new b,g=(d={},Object(u["a"])(d,r.INIT_SNAPSHOT_DATABASE,(function(e){return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,o,c,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,o=e.state,t.next=3,O.snapshots.orderBy("id").toArray();case 3:return c=t.sent,r=c.slice(-1)[0],r&&O.snapshots.clear(),a={index:o.slideIndex,slides:o.slides},t.next=9,O.snapshots.add(a);case 9:n(i.SET_SNAPSHOT_CURSOR,0),n(i.SET_SNAPSHOT_LENGTH,1);case 11:case"end":return t.stop()}}),t)})))()})),Object(u["a"])(d,r.ADD_SNAPSHOT,(function(e){return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,o,c,r,a,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.state,o=e.commit,t.next=3,O.snapshots.orderBy("id").keys();case 3:return c=t.sent,r=[],n.snapshotCursor>=0&&n.snapshotCursor<c.length-1&&(r=c.slice(n.snapshotCursor+1)),a={index:n.slideIndex,slides:n.slides},t.next=9,O.snapshots.add(a);case 9:return l=c.length-r.length+1,l>20&&(r.push(c[0]),l--),t.next=13,O.snapshots.bulkDelete(r);case 13:o(i.SET_SNAPSHOT_CURSOR,l-1),o(i.SET_SNAPSHOT_LENGTH,l);case 15:case"end":return t.stop()}}),t)})))()})),Object(u["a"])(d,r.UN_DO,(function(e){return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,o,c,r,a,l,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.state,o=e.commit,!(n.snapshotCursor<=0)){t.next=3;break}return t.abrupt("return");case 3:return c=n.snapshotCursor-1,t.next=6,O.snapshots.orderBy("id").toArray();case 6:r=t.sent,a=r[c],l=a.index,u=a.slides,o(i.SET_SLIDES,u),o(i.UPDATE_SLIDE_INDEX,l),o(i.SET_SNAPSHOT_CURSOR,c),o(i.SET_ACTIVE_ELEMENT_ID_LIST,[]);case 13:case"end":return t.stop()}}),t)})))()})),Object(u["a"])(d,r.RE_DO,(function(e){return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,o,c,r,a,l,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.state,o=e.commit,!(n.snapshotCursor>=n.snapshotLength-1)){t.next=3;break}return t.abrupt("return");case 3:return c=n.snapshotCursor+1,t.next=6,O.snapshots.orderBy("id").toArray();case 6:r=t.sent,a=r[c],l=a.index,u=a.slides,o(i.SET_SLIDES,u),o(i.UPDATE_SLIDE_INDEX,l),o(i.SET_SNAPSHOT_CURSOR,c),o(i.SET_ACTIVE_ELEMENT_ID_LIST,[]);case 13:case"end":return t.stop()}}),t)})))()})),d),j=(n("99af"),n("c740"),n("a434"),n("2909")),S=n("5530"),E=[{source:"windows",zh:"微软雅黑",en:"Microsoft Yahei"},{source:"windows",zh:"宋体",en:"SimSun"},{source:"windows",zh:"黑体",en:"SimHei"},{source:"windows",zh:"楷体",en:"KaiTi"},{source:"windows",zh:"新宋体",en:"NSimSun"},{source:"windows",zh:"仿宋",en:"FangSong"},{source:"osx",zh:"苹方",en:"PingFang SC"},{source:"osx",zh:"华文黑体",en:"STHeiti"},{source:"osx",zh:"华文楷体",en:"STKaiti"},{source:"osx",zh:"华文宋体",en:"STSong"},{source:"osx",zh:"华文仿宋",en:"STFangSong"},{source:"osx",zh:"华文中宋",en:"STZhongSong"},{source:"osx",zh:"华文琥珀",en:"STHupo"},{source:"osx",zh:"华文新魏",en:"STXinwei"},{source:"osx",zh:"华文隶书",en:"STLiti"},{source:"osx",zh:"华文行楷",en:"STXingkai"},{source:"osx",zh:"冬青黑体简",en:"Hiragino Sans GB"},{source:"osx",zh:"兰亭黑-简",en:"Lantinghei SC"},{source:"osx",zh:"偏偏体-简",en:"Hanzipen SC"},{source:"osx",zh:"手札体-简",en:"Hannotate SC"},{source:"osx",zh:"宋体-简",en:"Songti SC"},{source:"osx",zh:"娃娃体-简",en:"Wawati SC"},{source:"osx",zh:"行楷-简",en:"Xingkai SC"},{source:"osx",zh:"圆体-简",en:"Yuanti SC"},{source:"office",zh:"华文细黑",en:"STXihei"},{source:"office",zh:"幼圆",en:"YouYuan"},{source:"office",zh:"隶书",en:"LiSu"},{source:"",zh:"Arial",en:"Arial"}],y=(n("a15b"),function(e){if("string"!==typeof e)return!1;var t="Arial";if(e.toLowerCase()===t.toLowerCase())return!0;var n="a",o=100,c=100,i=100,r=document.createElement("canvas"),a=r.getContext("2d");if(!a)return!1;r.width=c,r.height=i,a.textAlign="center",a.fillStyle="black",a.textBaseline="middle";var l=function(e){a.clearRect(0,0,c,i),a.font="".concat(o,"px ").concat(e,", ").concat(t),a.fillText(n,c/2,i/2);var r=a.getImageData(0,0,c,i).data;return[].slice.call(r).filter((function(e){return 0!==e}))};return l(t).join("")!==l(e).join("")}),I=(p={},Object(u["a"])(p,i.SET_ACTIVE_ELEMENT_ID_LIST,(function(e,t){1===t.length?e.handleElementId=t[0]:e.handleElementId="",e.activeElementIdList=t})),Object(u["a"])(p,i.SET_HANDLE_ELEMENT_ID,(function(e,t){e.handleElementId=t})),Object(u["a"])(p,i.SET_CANVAS_PERCENTAGE,(function(e,t){e.canvasPercentage=t})),Object(u["a"])(p,i.SET_CANVAS_SCALE,(function(e,t){e.canvasScale=t})),Object(u["a"])(p,i.SET_THUMBNAILS_FOCUS,(function(e,t){e.thumbnailsFocus=t})),Object(u["a"])(p,i.SET_EDITORAREA_FOCUS,(function(e,t){e.editorAreaFocus=t})),Object(u["a"])(p,i.SET_DISABLE_HOTKEYS_STATE,(function(e,t){e.disableHotkeys=t})),Object(u["a"])(p,i.SET_GRID_LINES_STATE,(function(e,t){e.showGridLines=t})),Object(u["a"])(p,i.SET_AVAILABLE_FONTS,(function(e){e.availableFonts=E.filter((function(e){return y(e.en)}))})),Object(u["a"])(p,i.SET_TOOLBAR_STATE,(function(e,t){e.toolbarState=t})),Object(u["a"])(p,i.SET_SLIDES,(function(e,t){e.slides=t})),Object(u["a"])(p,i.ADD_SLIDE,(function(e,t){var n=e.slideIndex+1;e.slides.splice(n,0,t),e.slideIndex=n})),Object(u["a"])(p,i.UPDATE_SLIDE,(function(e,t){var n=e.slideIndex;e.slides[n]=Object(S["a"])(Object(S["a"])({},e.slides[n]),t)})),Object(u["a"])(p,i.DELETE_SLIDE,(function(e,t){var n=e.slides.findIndex((function(e){return e.id===t}));n===e.slides.length-1&&(e.slideIndex=n-1),e.slides.splice(n,1)})),Object(u["a"])(p,i.UPDATE_SLIDE_INDEX,(function(e,t){e.slideIndex=t})),Object(u["a"])(p,i.ADD_ELEMENT,(function(e,t){var n=Array.isArray(t)?t:[t],o=e.slides[e.slideIndex].elements,c=[].concat(Object(j["a"])(o),Object(j["a"])(n));e.slides[e.slideIndex].elements=c})),Object(u["a"])(p,i.UPDATE_ELEMENT,(function(e,t){var n=t.id,o=t.props,c="string"===typeof n?[n]:n,i=e.slideIndex,r=e.slides[i],a=r.elements.map((function(e){return c.includes(e.id)?Object(S["a"])(Object(S["a"])({},e),o):e}));e.slides[i].elements=a})),Object(u["a"])(p,i.SET_SNAPSHOT_CURSOR,(function(e,t){e.snapshotCursor=t})),Object(u["a"])(p,i.SET_SNAPSHOT_LENGTH,(function(e,t){e.snapshotLength=t})),Object(u["a"])(p,i.SET_CTRL_KEY_STATE,(function(e,t){e.ctrlKeyState=t})),Object(u["a"])(p,i.SET_SHIFT_KEY_STATE,(function(e,t){e.shiftKeyState=t})),Object(u["a"])(p,i.SET_SCREENING,(function(e,t){e.screening=t})),p),T=[{id:"xxx1",background:{type:"solid",value:"#fff"},elements:[{id:"xxx1",type:"text",left:190,top:50,width:320,height:104,rotate:0,shadow:{h:1,v:1,blur:3,color:"rgba(10, 10, 10, .5)"},opacity:1,lock:!1,content:"<div style='text-align: center;'><span style='font-size: 28px;'><span style='color: rgb(232, 107, 153); font-weight: bold;'>一段测试文字</span>，字号固定为<span style='font-weight: bold; font-style: italic; text-decoration-line: underline;'>28px</span></span></div>"},{id:"xxx3",type:"image",left:80,top:250,width:180,height:180,rotate:0,fixedRatio:!1,lock:!1,src:"https://img.lessonplan.cn/IMG/Show/ppt/3ab74e91-c34f-499d-9711-166e423d4dd6/1573622467064v2-7aa3ce420052983d91c6d01b47a7441d_hd.jpg"},{id:"xxx2",type:"image",left:750,top:320,width:150,height:150,rotate:0,fixedRatio:!0,lock:!1,src:"https://img.lessonplan.cn/IMG/Show/ppt/3ab74e91-c34f-499d-9711-166e423d4dd6/62d9adb3-e7a6-4dc4-a352-095cffb49f08/b1be1a2f-f893-47d3-a8a3-eac7d04d395f/1596159381259v2-b2c69096d25ae16bf6ca09e30add3e65_hd.jpg"}],animations:[{elId:"xxx1",type:"rotateIn",duration:1e3},{elId:"xxx2",type:"zoomIn",duration:1e3}]},{id:"sajd172",elements:[{id:"yyx1",type:"text",left:590,top:90,width:220,height:188,rotate:20,opacity:1,lock:!1,content:"<div>😀 😐 😶 😜 🔔 ⭐ ⚡ 🔥 👍 💡 🔰 🎀 🎁 🥇 🏅 🏆 🎈 🎉 💎 🚧 ⛔ 📢 ⌛ ⏰ 🕒 🧩 🎵 📎 🔒 🔑 ⛳ 📌 📍 💬 📅 📈 📋 📜 📁 📱 💻 💾 🌏 🚚 🚡 🚢💧 🌐 🧭 💰 💳 🛒</div>"}],animations:[{elId:"yyx1",type:"flipInX",duration:1e3}]}],x={activeElementIdList:[],handleElementId:"",canvasPercentage:90,canvasScale:1,thumbnailsFocus:!1,editorAreaFocus:!1,disableHotkeys:!1,showGridLines:!1,availableFonts:[],toolbarState:"",slides:T,slideIndex:0,snapshotCursor:-1,snapshotLength:0,ctrlKeyState:!1,shiftKeyState:!1,screening:!1},w=Object(a["a"])({state:x,getters:l,mutations:I,actions:g}),_=Object(o["withScopeId"])("data-v-7eed2f38");Object(o["pushScopeId"])("data-v-7eed2f38");var k={class:"hamster-ppt-editor"},L={class:"layout-content"},C={class:"layout-content-center"};Object(o["popScopeId"])();var M,A=_((function(e,t,n,c,i,r){var a=Object(o["resolveComponent"])("EditorHeader"),l=Object(o["resolveComponent"])("Thumbnails"),u=Object(o["resolveComponent"])("CanvasTool"),s=Object(o["resolveComponent"])("Canvas");return Object(o["openBlock"])(),Object(o["createBlock"])("div",k,[Object(o["createVNode"])(a,{class:"layout-header"}),Object(o["createVNode"])("div",L,[Object(o["createVNode"])(l,{class:"layout-content-left"}),Object(o["createVNode"])("div",C,[Object(o["createVNode"])(u,{class:"center-top"}),Object(o["createVNode"])(s,{class:"center-body"})])])])}));(function(e){e["C"]="C",e["X"]="X",e["Z"]="Z",e["Y"]="Y",e["A"]="A",e["G"]="G",e["L"]="L",e["F"]="F",e["DELETE"]="DELETE",e["UP"]="ARROWUP",e["DOWN"]="ARROWDOWN",e["LEFT"]="ARROWLEFT",e["RIGHT"]="ARROWRIGHT",e["ENTER"]="ENTER",e["SPACE"]=" ",e["TAB"]="TAB"})(M||(M={}));var N,B=function(){var e=document.documentElement;e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullScreen&&e.webkitRequestFullScreen()},D=(n("3b18"),n("f64c")),P=n("4106"),R=n.n(P),H=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,t="_0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",n=t.length,o="",c=0;c<e;c++){var i=Math.floor(Math.random()*n);o+=t[i]}return o},F=function(e,t){return R()(""+e,t,"0")},V=n("b311"),q=n.n(V),G=function(e){return new Promise((function(t,n){var o=document.createElement("button"),c=new q.a(o,{text:function(){return e},action:function(){return"copy"},container:document.body});c.on("success",(function(e){c.destroy(),t(e)})),c.on("error",(function(e){c.destroy(),n(e)})),document.body.appendChild(o),o.click(),document.body.removeChild(o)}))},z=function(){return new Promise((function(e,t){navigator.clipboard?navigator.clipboard.readText().then((function(n){return n||t("剪贴板为空或者不包含文本"),e(n)})):t("浏览器不支持或禁止访问剪贴板")}))},Y=(n("25f0"),n("3452")),X=n.n(Y),U="zxc_ppt_online_editor",W=function(e){return X.a.AES.encrypt(e,U).toString()},J=function(e){var t=X.a.AES.decrypt(e,U);return t.toString(X.a.enc.Utf8)},K=(n("07ac"),n("53ca")),Z=n("b85c"),Q=n("b047"),$=n.n(Q),ee=n("0f32"),te=n.n(ee),ne=function(){var e=Object(a["b"])(),t=$()((function(){e.dispatch(r.ADD_SNAPSHOT)}),300,{trailing:!0}),n=te()((function(){e.dispatch(r.RE_DO)}),100,{leading:!0,trailing:!1}),o=te()((function(){e.dispatch(r.UN_DO)}),100,{leading:!0,trailing:!1});return{addHistorySnapshot:t,redo:n,undo:o}},oe=function(){var e=Object(a["b"])(),t=Object(o["computed"])((function(){return e.getters.currentSlide})),n=ne(),c=n.addHistorySnapshot,r=function(n){var o,r={},a={},l=Object(Z["a"])(n);try{for(l.s();!(o=l.n()).done;){var u=o.value,s=u.groupId;s&&!r[s]&&(r[s]=H()),a[u.id]=H()}}catch(v){l.e(v)}finally{l.f()}var d,p=t.value.elements.map((function(e){return e.id})),f=Object(Z["a"])(n);try{for(f.s();!(d=f.n()).done;){var m=d.value,h=p.includes(m.id);m.id=a[m.id],h&&(m.left=m.left+10,m.top=m.top+10),m.groupId&&(m.groupId=r[m.groupId])}}catch(v){f.e(v)}finally{f.f()}e.commit(i.ADD_ELEMENT,n),e.commit(i.SET_ACTIVE_ELEMENT_ID_LIST,Object.values(a)),c()},l=function(t){e.commit(i.ADD_SLIDE,t),c()},u=function(e){console.log(e)},s=function(e,t){var n,o=(null===t||void 0===t?void 0:t.onlySlide)||!1,c=(null===t||void 0===t?void 0:t.onlyElements)||!1;try{n=JSON.parse(J(e))}catch(d){n=e}if("object"===Object(K["a"])(n)){var i=n,a=i.type,s=i.data;"elements"!==a||o?"slide"!==a||c||l(s):r(s)}else c||o||u(n)};return{pasteTextClipboardData:s}},ce=function(){var e=Object(a["b"])(),t=Object(o["computed"])((function(){return e.state.slideIndex})),n=Object(o["computed"])((function(){return e.state.slides.length})),c=Object(o["computed"])((function(){return e.getters.currentSlide})),r=oe(),l=r.pasteTextClipboardData,u=ne(),s=u.addHistorySnapshot,d=function(o){var c=0;o===M.UP&&t.value>0?c=t.value-1:o===M.DOWN&&t.value<n.value-1&&(c=t.value+1),e.commit(i.UPDATE_SLIDE_INDEX,c)},p=function(){var t=W(JSON.stringify({type:"slide",data:c.value}));G(t).then((function(){e.commit(i.SET_THUMBNAILS_FOCUS,!0)}))},f=function(){z().then((function(e){l(e,{onlySlide:!0})})).catch((function(e){return D["a"].warning(e)}))},m=function(){var t={id:H(8),elements:[]};e.commit(i.ADD_SLIDE,t),s()},h=function(){e.commit(i.ADD_SLIDE,c.value),s()},v=function(){e.commit(i.DELETE_SLIDE,c.value.id),s()},b=function(){p(),v()};return{updateSlideIndex:d,copySlide:p,pasteSlide:f,createSlide:m,copyAndPasteSlide:h,deleteSlide:v,cutSlide:b}},ie=function(){var e=Object(a["b"])(),t=Object(o["computed"])((function(){return e.state.activeElementIdList})),n=Object(o["computed"])((function(){return e.getters.currentSlide})),c=ne(),r=c.addHistorySnapshot,l=function(){var o,c=JSON.parse(JSON.stringify(n.value.elements)),a=Object(Z["a"])(c);try{for(a.s();!(o=a.n()).done;){var l=o.value;t.value.includes(l.id)&&(l.lock=!0)}}catch(u){a.e(u)}finally{a.f()}e.commit(i.UPDATE_SLIDE,{elements:c}),r()},u=function(t){var o=JSON.parse(JSON.stringify(n.value.elements));if(t.groupId){var c,a=Object(Z["a"])(o);try{for(a.s();!(c=a.n()).done;){var l=c.value;l.groupId===t.groupId&&(l.lock=!1)}}catch(p){a.e(p)}finally{a.f()}return o}var u,s=Object(Z["a"])(o);try{for(s.s();!(u=s.n()).done;){var d=u.value;if(d.id===t.id){d.lock=!1;break}}}catch(p){s.e(p)}finally{s.f()}e.commit(i.UPDATE_SLIDE,{elements:o}),r()};return{lockElement:l,unlockElement:u}},re=function(){var e=Object(a["b"])(),t=Object(o["computed"])((function(){return e.state.activeElementIdList})),n=Object(o["computed"])((function(){return e.getters.currentSlide})),c=ne(),r=c.addHistorySnapshot,l=function(){if(t.value.length){var o=n.value.elements.filter((function(e){return!t.value.includes(e.id)}));e.commit(i.SET_ACTIVE_ELEMENT_ID_LIST,[]),e.commit(i.UPDATE_SLIDE,{elements:o}),r()}},u=function(){n.value.elements.length&&(e.commit(i.SET_ACTIVE_ELEMENT_ID_LIST,[]),e.commit(i.UPDATE_SLIDE,{elements:[]}),r())};return{deleteElement:l,deleteAllElements:u}},ae=(n("45fc"),function(){var e=Object(a["b"])(),t=Object(o["computed"])((function(){return e.state.activeElementIdList})),n=Object(o["computed"])((function(){return e.getters.activeElementList})),c=Object(o["computed"])((function(){return e.getters.currentSlide})),r=ne(),l=r.addHistorySnapshot,u=function(){var o;if(n.value.length){var r,a=JSON.parse(JSON.stringify(c.value.elements)),u=H(),s=[],d=Object(Z["a"])(a);try{for(d.s();!(r=d.n()).done;){var p=r.value;t.value.includes(p.id)&&(p.groupId=u,s.push(p))}}catch(v){d.e(v)}finally{d.f()}var f=a.findIndex((function(e){return e.id===s[s.length-1].id})),m=s.map((function(e){return e.id}));a=a.filter((function(e){return!m.includes(e.id)}));var h=f-s.length+1;(o=a).splice.apply(o,[h,0].concat(s)),e.commit(i.UPDATE_SLIDE,{elements:a}),l()}},s=function(){if(n.value.length){var o=n.value.some((function(e){return e.groupId}));if(o){var r,a=JSON.parse(JSON.stringify(c.value.elements)),u=Object(Z["a"])(a);try{for(u.s();!(r=u.n()).done;){var s=r.value;t.value.includes(s.id)&&s.groupId&&delete s.groupId}}catch(d){u.e(d)}finally{u.f()}e.commit(i.UPDATE_SLIDE,{elements:a}),l()}}};return{combineElements:u,uncombineElements:s}}),le=function(){var e=Object(a["b"])(),t=Object(o["computed"])((function(){return e.state.activeElementIdList})),n=Object(o["computed"])((function(){return e.getters.activeElementList})),c=oe(),r=c.pasteTextClipboardData,l=re(),u=l.deleteElement,s=function(){if(t.value.length){var o=W(JSON.stringify({type:"elements",data:n.value}));G(o).then((function(){e.commit(i.SET_EDITORAREA_FOCUS,!0)}))}},d=function(){s(),u()},p=function(){z().then((function(e){r(e)})).catch((function(e){return D["a"].warning(e)}))};return{copyElement:s,cutElement:d,pasteElement:p}},ue=function(){var e=Object(a["b"])(),t=Object(o["computed"])((function(){return e.getters.currentSlide})),n=function(){var n=t.value.elements.filter((function(e){return!e.lock})),o=n.map((function(e){return e.id}));e.commit(i.SET_ACTIVE_ELEMENT_ID_LIST,o)};return{selectAllElement:n}},se=function(){var e=Object(a["b"])(),t=Object(o["computed"])((function(){return e.state.activeElementIdList})),n=Object(o["computed"])((function(){return e.getters.currentSlide})),c=ne(),r=c.addHistorySnapshot,l=function(o){var c=n.value.elements.map((function(e){if(t.value.includes(e.id)){var n=e.left,c=e.top;switch(o){case M.LEFT:n-=1;break;case M.RIGHT:n+=1;break;case M.UP:c-=1;break;case M.DOWN:c+=1;break;default:break}return Object(S["a"])(Object(S["a"])({},e),{},{left:n,top:c})}return e}));e.commit(i.UPDATE_SLIDE,{elements:c}),r()};return{moveElement:l}},de=function(){var e=Object(a["b"])(),t=Object(o["computed"])((function(){return e.state.ctrlKeyState})),n=Object(o["computed"])((function(){return e.state.shiftKeyState})),c=Object(o["computed"])((function(){return e.state.disableHotkeys})),r=Object(o["computed"])((function(){return e.state.activeElementIdList})),l=Object(o["computed"])((function(){return e.state.editorAreaFocus})),u=Object(o["computed"])((function(){return e.state.thumbnailsFocus})),s=ce(),d=s.updateSlideIndex,p=s.copySlide,f=s.createSlide,m=s.deleteSlide,h=s.cutSlide,v=ae(),b=v.combineElements,O=v.uncombineElements,g=re(),j=g.deleteElement,S=ie(),E=S.lockElement,y=le(),I=y.copyElement,T=y.cutElement,x=ue(),w=x.selectAllElement,_=se(),k=_.moveElement,L=ne(),C=L.redo,A=L.undo,N=function(){c.value||(u.value?p():r.value.length&&I())},D=function(){c.value||(u.value?h():r.value.length&&T())},P=function(){!l.value&&c.value||w()},R=function(){!l.value&&c.value||E()},H=function(){!l.value&&c.value||b()},F=function(){!l.value&&c.value||O()},V=function(){c.value||(u.value?m():r.value.length&&j())},q=function(e){c.value||(!u.value||e!==M.UP&&e!==M.DOWN?r.value.length&&k(e):d(e))},G=function(){u.value&&!c.value&&f()},z=function(){B(),e.commit(i.SET_SCREENING,!0)},Y=function(o){var c=o.ctrlKey,r=o.shiftKey,a=o.key.toUpperCase();c&&a===M.F&&(o.preventDefault(),z()),c&&!t.value&&e.commit(i.SET_CTRL_KEY_STATE,!0),r&&!n.value&&e.commit(i.SET_SHIFT_KEY_STATE,!0),(l.value||u.value)&&(c&&a===M.C&&(o.preventDefault(),N()),c&&a===M.X&&(o.preventDefault(),D()),c&&a===M.Z&&(o.preventDefault(),A()),c&&a===M.Y&&(o.preventDefault(),C()),c&&a===M.A&&(o.preventDefault(),P()),c&&a===M.L&&(o.preventDefault(),R()),!r&&c&&a===M.G&&(o.preventDefault(),H()),r&&c&&a===M.G&&(o.preventDefault(),F()),a===M.DELETE&&(o.preventDefault(),V()),a===M.UP&&(o.preventDefault(),q(M.UP)),a===M.DOWN&&(o.preventDefault(),q(M.DOWN)),a===M.LEFT&&(o.preventDefault(),q(M.LEFT)),a===M.RIGHT&&(o.preventDefault(),q(M.RIGHT)),a===M.ENTER&&(o.preventDefault(),G()))},X=function(){t.value&&e.commit(i.SET_CTRL_KEY_STATE,!1),n.value&&e.commit(i.SET_SHIFT_KEY_STATE,!1)};Object(o["onMounted"])((function(){document.addEventListener("keydown",Y),document.addEventListener("keyup",X),window.addEventListener("blur",X)})),Object(o["onUnmounted"])((function(){document.removeEventListener("keydown",Y),document.removeEventListener("keyup",X),window.removeEventListener("blur",X)}))},pe=(n("c975"),function(e){return new Promise((function(t){var n=document.createElement("img");n.src=e,n.style.opacity="0",document.body.appendChild(n),n.onload=function(){var e=n.clientWidth,o=n.clientHeight;n.onload=null,n.onerror=null,document.body.removeChild(n),t({width:e,height:o})},n.onerror=function(){n.onload=null,n.onerror=null}}))}),fe=function(e){return new Promise((function(t){var n=new FileReader;n.addEventListener("load",(function(){t(n.result)})),n.readAsDataURL(e)}))},me=(n("cb29"),1e3),he=.5625,ve="#41464b",be={left:0,top:0,width:300,height:0,opacity:1,lineHeight:1.5,segmentSpacing:5,content:"请输入内容"},Oe={left:0,top:0,fixedRatio:!0},ge={fill:ve,fixedRatio:!1},je={style:"solid",points:["",""],width:4,color:ve},Se={left:0,top:0,width:500,height:500},Ee={left:0,top:0,outline:{width:2,style:"solid",color:ve}},ye=function(){var e=Object(a["b"])(),t=ne(),n=t.addHistorySnapshot,o=function(t){e.commit(i.ADD_ELEMENT,t),e.commit(i.SET_ACTIVE_ELEMENT_ID_LIST,[t.id]),n()},c=function(e){pe(e).then((function(t){var n=t.width,c=t.height,i=n/c;i<he&&n>me?(n=me,c=n*i):c>me*he&&(c=me*he,n=c/i),o(Object(S["a"])(Object(S["a"])({},Oe),{},{type:"image",id:H(),src:e,width:n,height:c}))}))},r=function(e,t){o(Object(S["a"])(Object(S["a"])({},Se),{},{type:"chart",id:H(),chartType:e,data:t}))},l=function(e,t){var n=new Array(t).fill({colspan:1,rowspan:1,content:""}),c=new Array(e).fill(n),i=80,r=35,a=2,l=new Array(t).fill(i),u=new Array(e).fill(r);o(Object(S["a"])(Object(S["a"])({},Ee),{},{type:"table",id:H(),width:t*i+a,height:e*r+a,colSizes:l,rowSizes:u,data:c}))},u=function(e){var t=e.left,n=e.top,c=e.width,i=e.height;o(Object(S["a"])(Object(S["a"])({},be),{},{type:"text",id:H(),left:t,top:n,width:c,height:i}))},s=function(e,t){var n=e.left,c=e.top,i=e.width,r=e.height;o(Object(S["a"])(Object(S["a"])({},ge),{},{type:"shape",id:H(),left:n,top:c,width:i,height:r,svgCode:t}))},d=function(e,t,n){var c=e.left,i=e.top,r=e.start,a=e.end;o(Object(S["a"])(Object(S["a"])({},je),{},{type:"line",id:H(),left:c,top:i,start:r,end:a,points:t,lineType:n}))};return{createImageElement:c,createChartElement:r,createTableElement:l,createTextElement:u,createShapeElement:s,createLineElement:d}},Ie=function(){var e=Object(a["b"])(),t=Object(o["computed"])((function(){return e.state.editorAreaFocus})),n=Object(o["computed"])((function(){return e.state.thumbnailsFocus})),c=Object(o["computed"])((function(){return e.state.disableHotkeys})),i=oe(),r=i.pasteTextClipboardData,l=ye(),u=l.createImageElement,s=function(e){fe(e).then((function(e){return u(e)}))},d=function(e){if((t.value||n.value)&&!c.value&&e.clipboardData){var o=e.clipboardData.items,i=o[0];if(i){var a,l=Object(Z["a"])(o);try{for(l.s();!(a=l.n()).done;){var u=a.value;if("file"===u.kind&&-1!==u.type.indexOf("image")){var d=u.getAsFile();return void(d&&s(d))}}}catch(p){l.e(p)}finally{l.f()}"string"===i.kind&&"text/plain"===i.type&&i.getAsString((function(e){return r(e)}))}}};Object(o["onMounted"])((function(){document.addEventListener("paste",d)})),Object(o["onUnmounted"])((function(){document.removeEventListener("paste",d)}))},Te=Object(o["withScopeId"])("data-v-84a5165a"),xe=Te((function(e,t,n,c,i,r){var a=Object(o["resolveComponent"])("AlignmentLine"),l=Object(o["resolveComponent"])("MultiSelectOperate"),u=Object(o["resolveComponent"])("Operate"),s=Object(o["resolveComponent"])("MouseSelection"),d=Object(o["resolveComponent"])("SlideBackground"),p=Object(o["resolveComponent"])("EditableElement"),f=Object(o["resolveDirective"])("contextmenu"),m=Object(o["resolveDirective"])("click-outside");return Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:"canvas",ref:"canvasRef",onMousewheel:t[1]||(t[1]=function(t){return e.mousewheelScaleCanvas(t)}),onMousedown:t[2]||(t[2]=function(t){return e.handleClickBlankArea(t)})},[Object(o["createVNode"])("div",{class:"operates",style:{left:e.viewportStyles.left+"px",top:e.viewportStyles.top+"px"}},[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.alignmentLines,(function(e,t){return Object(o["openBlock"])(),Object(o["createBlock"])(a,{key:t,type:e.type,axis:e.axis,length:e.length},null,8,["type","axis","length"])})),128)),e.activeElementIdList.length>1?(Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:0,elementList:e.elementList,scaleMultiElement:e.scaleMultiElement},null,8,["elementList","scaleMultiElement"])):Object(o["createCommentVNode"])("",!0),(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.elementList,(function(t){return Object(o["openBlock"])(),Object(o["createBlock"])(u,{key:t.id,elementInfo:t,isSelected:e.activeElementIdList.includes(t.id),isActive:e.handleElementId===t.id,isActiveGroupElement:e.activeGroupElementId===t.id,isMultiSelect:e.activeElementIdList.length>1,rotateElement:e.rotateElement,scaleElement:e.scaleElement},null,8,["elementInfo","isSelected","isActive","isActiveGroupElement","isMultiSelect","rotateElement","scaleElement"])})),128))],4),Object(o["createVNode"])("div",{class:"viewport",ref:"viewportRef",style:{width:e.viewportStyles.width+"px",height:e.viewportStyles.height+"px",left:e.viewportStyles.left+"px",top:e.viewportStyles.top+"px",transform:"scale(".concat(e.canvasScale,")")}},[e.mouseSelectionState.isShow?(Object(o["openBlock"])(),Object(o["createBlock"])(s,{key:0,top:e.mouseSelectionState.top,left:e.mouseSelectionState.left,width:e.mouseSelectionState.width,height:e.mouseSelectionState.height,quadrant:e.mouseSelectionState.quadrant},null,8,["top","left","width","height","quadrant"])):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(d),(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.elementList,(function(t,n){return Object(o["openBlock"])(),Object(o["createBlock"])(p,{key:t.id,elementInfo:t,elementIndex:n+1,isMultiSelect:e.activeElementIdList.length>1,selectElement:e.selectElement},null,8,["elementInfo","elementIndex","isMultiSelect","selectElement"])})),128))],4)],544)),[[f,e.contextmenus],[m,e.removeEditorAreaFocus]])})),we=function(e){var t=Object(o["ref"])(0),n=Object(o["ref"])(0),c=Object(a["b"])(),r=Object(o["computed"])((function(){return c.state.canvasPercentage})),l=function(){if(e.value){var o=e.value.clientWidth,a=e.value.clientHeight;if(a/o>he){var l=o*(r.value/100);c.commit(i.SET_CANVAS_SCALE,l/me),t.value=(o-l)/2,n.value=(a-l*he)/2}else{var u=a*(r.value/100);c.commit(i.SET_CANVAS_SCALE,u/(me*he)),t.value=(o-u/he)/2,n.value=(a-u)/2}}};Object(o["watch"])(r,l);var u=Object(o["computed"])((function(){return{width:me,height:me*he,left:t.value,top:n.value}})),s=new ResizeObserver(l);return Object(o["onMounted"])((function(){e.value&&s.observe(e.value)})),Object(o["onUnmounted"])((function(){e.value&&s.unobserve(e.value)})),{viewportStyles:u}};n("a623"),n("4160"),n("159b");(function(e){e["TEXT"]="text",e["IMAGE"]="image",e["SHAPE"]="shape",e["LINE"]="line",e["CHART"]="chart",e["TABLE"]="table"})(N||(N={}));var _e,ke,Le,Ce,Me=function(e){var t=e.left,n=e.top,o=e.width,c=e.height,i=e.rotate,r=void 0===i?0:i,a=Math.sqrt(Math.pow(o,2)+Math.pow(c,2))/2,l=180*Math.atan(c/o)/Math.PI,u=(180-r-l)*Math.PI/180,s=(l-r)*Math.PI/180,d=o/2,p=c/2,f=t+d,m=n+p,h=[f+a*Math.cos(u),f+a*Math.cos(s),f-a*Math.cos(u),f-a*Math.cos(s)],v=[m-a*Math.sin(u),m-a*Math.sin(s),m+a*Math.sin(u),m+a*Math.sin(s)];return{xRange:[Math.min.apply(Math,h),Math.max.apply(Math,h)],yRange:[Math.min.apply(Math,v),Math.max.apply(Math,v)]}},Ae=function(e){var t,n,o,c;if(e.type===N.LINE)t=e.left,n=e.left+Math.max(e.start[0],e.end[0]),o=e.top,c=e.top+Math.max(e.start[1],e.end[1]);else if("rotate"in e&&e.rotate){var i=e.left,r=e.top,a=e.width,l=e.height,u=e.rotate,s=Me({left:i,top:r,width:a,height:l,rotate:u}),d=s.xRange,p=s.yRange;t=d[0],n=d[1],o=p[0],c=p[1]}else t=e.left,n=e.left+e.width,o=e.top,c=e.top+e.height;return{minX:t,maxX:n,minY:o,maxY:c}},Ne=function(e){var t=[],n=[],o=[],c=[];e.forEach((function(e){var i=Ae(e),r=i.minX,a=i.maxX,l=i.minY,u=i.maxY;t.push(r),n.push(l),o.push(a),c.push(u)}));var i=Math.min.apply(Math,t),r=Math.max.apply(Math,o),a=Math.min.apply(Math,n),l=Math.max.apply(Math,c);return{minX:i,maxX:r,minY:a,maxY:l}},Be=function(e){var t=[];return e.forEach((function(e){var n=t.findIndex((function(t){return t.value===e.value}));if(-1===n)t.push(e);else{var o=t[n],c=Math.min(o.range[0],e.range[0]),i=Math.max(o.range[1],e.range[1]),r=[c,i],a={value:e.value,range:r};t[n]=a}})),t},De=function(e,t){var n=Object(a["b"])(),c=Object(o["computed"])((function(){return n.state.canvasScale})),r=Object(o["reactive"])({isShow:!1,top:0,left:0,width:0,height:0,quadrant:1}),l=function(o){if(t.value){var a=!0,l=t.value.getBoundingClientRect(),u=5,s=o.pageX,d=o.pageY,p=(s-l.x)/c.value,f=(d-l.y)/c.value;r.isShow=!1,r.quadrant=4,r.top=f,r.left=p,r.width=0,r.height=0,document.onmousemove=function(e){if(a){var t=e.pageX,n=e.pageY,o=(t-s)/c.value,i=(n-d)/c.value,l=Math.abs(o),p=Math.abs(i);if(!(l<u||p<u)){var f=0;o>0&&i>0?f=4:o<0&&i<0?f=1:o>0&&i<0?f=2:o<0&&i>0&&(f=3),r.isShow=!0,r.quadrant=f,r.width=l,r.height=p}}},document.onmouseup=function(){document.onmousemove=null,document.onmouseup=null,a=!1;for(var t=[],o=0;o<e.value.length;o++){var c=e.value[o],l=r.left,u=r.top,s=r.width,d=r.height,p=r.quadrant,f=Ae(c),m=f.minX,h=f.maxX,v=f.minY,b=f.maxY,O=!1;4===p?O=m>l&&h<l+s&&v>u&&b<u+d:1===p?O=m>l-s&&h<l-s+s&&v>u-d&&b<u-d+d:2===p?O=m>l&&h<l+s&&v>u-d&&b<u-d+d:3===p&&(O=m>l-s&&h<l-s+s&&v>u&&b<u+d),O&&!c.lock&&t.push(c)}t=t.filter((function(n){if(n.groupId){var o=t.map((function(e){return e.id})),c=e.value.filter((function(e){return e.groupId===n.groupId}));return c.every((function(e){return o.includes(e.id)}))}return!0}));var g=t.map((function(e){return e.id}));g.length&&n.commit(i.SET_ACTIVE_ELEMENT_ID_LIST,g),r.isShow=!1}}};return{mouseSelectionState:r,updateMouseSelection:l}},Pe=function(e){var t=ye(),n=t.createImageElement,c=function(e){if(e.dataTransfer){var t=e.dataTransfer.items[0];if("file"===t.kind&&-1!==t.type.indexOf("image")){var o=t.getAsFile();o&&fe(o).then((function(e){return n(e)}))}else"string"===t.kind&&"text/plain"===t.type&&t.getAsString((function(e){console.log(e)}))}};Object(o["onMounted"])((function(){e.value&&e.value.addEventListener("drop",c),document.ondragleave=function(e){return e.preventDefault()},document.ondrop=function(e){return e.preventDefault()},document.ondragenter=function(e){return e.preventDefault()},document.ondragover=function(e){return e.preventDefault()}})),Object(o["onUnmounted"])((function(){e.value&&e.value.removeEventListener("drop",c),document.ondragleave=null,document.ondrop=null,document.ondragenter=null,document.ondragover=null}))},Re=function(e,t){var n=Math.atan2(e,t),o=180/Math.PI*n;return o},He=function(e,t){var n=Object(a["b"])(),c=Object(o["computed"])((function(){return n.state.canvasScale})),r=ne(),l=r.addHistorySnapshot,u=function(o){var r=!0,a=0,u=o.rotate||0,s=o.left,d=o.top,p=o.width,f=o.height,m=s+p/2,h=d+f/2;if(t.value){var v=t.value.getBoundingClientRect();document.onmousemove=function(t){if(r){var n=(t.pageX-v.left)/c.value,i=(t.pageY-v.top)/c.value,l=n-m,u=h-i;a=Re(l,u);var s=5;Math.abs(a)<=s?a=0:a>0&&Math.abs(a-45)<=s?a-=a-45:a<0&&Math.abs(a+45)<=s?a-=a+45:a>0&&Math.abs(a-90)<=s?a-=a-90:a<0&&Math.abs(a+90)<=s?a-=a+90:a>0&&Math.abs(a-135)<=s?a-=a-135:a<0&&Math.abs(a+135)<=s?a-=a+135:a>0&&Math.abs(a-180)<=s?a-=a-180:a<0&&Math.abs(a+180)<=s&&(a-=a+180),e.value=e.value.map((function(e){return o.id===e.id?Object(S["a"])(Object(S["a"])({},e),{},{rotate:a}):e}))}},document.onmouseup=function(){r=!1,document.onmousemove=null,document.onmouseup=null,u!==a&&(n.commit(i.UPDATE_SLIDE,{elements:e.value}),l())}}};return{rotateElement:u}};(function(e){e["UP"]="up",e["DOWN"]="down",e["TOP"]="top",e["BOTTOM"]="bottom"})(_e||(_e={})),function(e){e["TOP"]="top",e["BOTTOM"]="bottom",e["LEFT"]="left",e["RIGHT"]="right",e["VERTICAL"]="vertical",e["HORIZONTAL"]="horizontal"}(ke||(ke={})),function(e){e["T"]="top",e["B"]="bottom",e["L"]="left",e["R"]="right"}(Le||(Le={})),function(e){e["LEFT_TOP"]="left-top",e["TOP"]="top",e["RIGHT_TOP"]="right-top",e["LEFT"]="left",e["RIGHT"]="right",e["LEFT_BOTTOM"]="left-bottom",e["BOTTOM"]="bottom",e["RIGHT_BOTTOM"]="right-bottom"}(Ce||(Ce={}));var Fe=function(e,t){var n=e.left,o=e.top,c=e.width,i=e.height,r=Math.sqrt(Math.pow(c,2)+Math.pow(i,2))/2,a=180*Math.atan(i/c)/Math.PI,l=(180-t-a)*Math.PI/180,u=(a-t)*Math.PI/180,s=(90-t)*Math.PI/180,d=t*Math.PI/180,p=c/2,f=i/2,m=n+p,h=o+f,v={left:m+r*Math.cos(l),top:h-r*Math.sin(l)},b={left:m+f*Math.cos(s),top:h-f*Math.sin(s)},O={left:m+r*Math.cos(u),top:h-r*Math.sin(u)},g={left:m+p*Math.cos(d),top:h+p*Math.sin(d)},j={left:m-r*Math.cos(l),top:h+r*Math.sin(l)},S={left:m-f*Math.sin(d),top:h+f*Math.cos(d)},E={left:m-r*Math.cos(u),top:h+r*Math.sin(u)},y={left:m-p*Math.cos(d),top:h-p*Math.sin(d)};return{leftTopPoint:v,topPoint:b,rightTopPoint:O,rightPoint:g,rightBottomPoint:j,bottomPoint:S,leftBottomPoint:E,leftPoint:y}},Ve=function(e,t){var n,o=(n={},Object(u["a"])(n,Ce.RIGHT_BOTTOM,t.leftTopPoint),Object(u["a"])(n,Ce.LEFT_BOTTOM,t.rightTopPoint),Object(u["a"])(n,Ce.LEFT_TOP,t.rightBottomPoint),Object(u["a"])(n,Ce.RIGHT_TOP,t.leftBottomPoint),Object(u["a"])(n,Ce.TOP,t.bottomPoint),Object(u["a"])(n,Ce.BOTTOM,t.topPoint),Object(u["a"])(n,Ce.LEFT,t.rightPoint),Object(u["a"])(n,Ce.RIGHT,t.leftPoint),n);return o[e]},qe=function(e,t,n){var c=Object(a["b"])(),r=Object(o["computed"])((function(){return c.state.activeElementIdList})),l=Object(o["computed"])((function(){return c.getters.ctrlOrShiftKeyActive})),u=Object(o["computed"])((function(){return c.state.canvasScale})),s=ne(),d=s.addHistorySnapshot,p=function(o,a,s){var p,f=!0,m=a.left,h=a.top,v=a.width,b=a.height,O=l.value||"fixedRatio"in a&&a.fixedRatio,g=v/b,E="rotate"in a&&a.rotate?a.rotate:0,y=Math.PI*E/180,I=o.pageX,T=o.pageY,x=15,w=function(e){return e<x?x:e},_=0,k=0,L=[],C=[];if("rotate"in a&&a.rotate){var M=a.left,A=a.top,B=a.width,D=a.height;p=Fe({left:M,top:A,width:B,height:D},E);var P=Ve(s,p);_=P.left,k=P.top}else{var R,H=me,F=me*he,V=a.id===t.value,q=Object(Z["a"])(e.value);try{for(q.s();!(R=q.n()).done;){var G=R.value;if((!("rotate"in G)||!G.rotate)&&(G.type!==N.LINE&&(!V||G.id!==a.id)&&(V||!r.value.includes(G.id)))){var z=G.left,Y=G.top,X=G.width,U=G.height,W=z+X,J=Y+U,K={value:Y,range:[z,W]},Q={value:J,range:[z,W]},$={value:z,range:[Y,J]},ee={value:W,range:[Y,J]};L.push(K,Q),C.push($,ee)}}}catch(le){q.e(le)}finally{q.f()}var te={value:0,range:[0,H]},ne={value:F,range:[0,H]},oe={value:F/2,range:[0,H]},ce={value:0,range:[0,F]},ie={value:H,range:[0,F]},re={value:H/2,range:[0,F]};L.push(te,ne,oe),C.push(ce,ie,re),L=Be(L),C=Be(C)}var ae=function(e,t){var o=3,c=[],i=!1,r=!1,a={offsetX:0,offsetY:0};if(t||0===t)for(var l=0;l<L.length;l++){var u=L[l],s=u.value,d=u.range,p=Math.min.apply(Math,Object(j["a"])(d).concat([e||0])),f=Math.max.apply(Math,Object(j["a"])(d).concat([e||0]));Math.abs(t-s)<o&&(r||(a.offsetY=t-s,r=!0),c.push({type:"horizontal",axis:{x:p-50,y:s},length:f-p+100}))}if(e||0===e)for(var m=0;m<C.length;m++){var h=C[m],v=h.value,b=h.range,O=Math.min.apply(Math,Object(j["a"])(b).concat([t||0])),g=Math.max.apply(Math,Object(j["a"])(b).concat([t||0]));Math.abs(e-v)<o&&(i||(a.offsetX=e-v,i=!0),c.push({type:"vertical",axis:{x:v,y:O-50},length:g-O+100}))}return n.value=c,a};document.onmousemove=function(t){if(f){var n=t.pageX,o=t.pageY,c=n-I,i=o-T,r=v,l=b,d=m,p=h;if(E){var j=(Math.cos(y)*c+Math.sin(y)*i)/u.value,x=(Math.cos(y)*i-Math.sin(y)*c)/u.value;O&&(s!==Ce.RIGHT_BOTTOM&&s!==Ce.LEFT_TOP||(x=j/g),s!==Ce.LEFT_BOTTOM&&s!==Ce.RIGHT_TOP||(x=-j/g)),s===Ce.RIGHT_BOTTOM?(r=w(v+j),l=w(b+x)):s===Ce.LEFT_BOTTOM?(r=w(v-j),l=w(b+x),d=m-(r-v)):s===Ce.LEFT_TOP?(r=w(v-j),l=w(b-x),d=m-(r-v),p=h-(l-b)):s===Ce.RIGHT_TOP?(r=w(v+j),l=w(b-x),p=h-(l-b)):s===Ce.TOP?(l=w(b-x),p=h-(l-b)):s===Ce.BOTTOM?l=w(b+x):s===Ce.LEFT?(r=w(v-j),d=m-(r-v)):s===Ce.RIGHT&&(r=w(v+j));var L=Fe({width:r,height:l,left:d,top:p},E),C=Ve(s,L),M=C.left,A=C.top,N=M-_,B=A-k;d-=N,p-=B}else{var D=c/u.value,P=i/u.value;if(O&&(s!==Ce.RIGHT_BOTTOM&&s!==Ce.LEFT_TOP||(P=D/g),s!==Ce.LEFT_BOTTOM&&s!==Ce.RIGHT_TOP||(P=-D/g)),s===Ce.RIGHT_BOTTOM){var R=ae(m+v+D,h+b+P),H=R.offsetX,F=R.offsetY;D-=H,P-=F,O&&(F?D=P*g:P=D/g),r=w(v+D),l=w(b+P)}else if(s===Ce.LEFT_BOTTOM){var V=ae(m+D,h+b+P),q=V.offsetX,G=V.offsetY;D-=q,P-=G,O&&(G?D=-P*g:P=-D/g),r=w(v-D),l=w(b+P),d=m-(r-v)}else if(s===Ce.LEFT_TOP){var z=ae(m+D,h+P),Y=z.offsetX,X=z.offsetY;D-=Y,P-=X,O&&(X?D=P*g:P=D/g),r=w(v-D),l=w(b-P),d=m-(r-v),p=h-(l-b)}else if(s===Ce.RIGHT_TOP){var U=ae(m+v+D,h+P),W=U.offsetX,J=U.offsetY;D-=W,P-=J,O&&(J?D=-P*g:P=-D/g),r=w(v+D),l=w(b-P),p=h-(l-b)}else if(s===Ce.LEFT){var K=ae(m+D,null),Z=K.offsetX;D-=Z,r=w(v-D),d=m-(r-v)}else if(s===Ce.RIGHT){var Q=ae(m+v+D,null),$=Q.offsetX;D-=$,r=w(v+D)}else if(s===Ce.TOP){var ee=ae(null,h+P),te=ee.offsetY;P-=te,l=w(b-P),p=h-(l-b)}else if(s===Ce.BOTTOM){var ne=ae(null,h+b+P),oe=ne.offsetY;P-=oe,l=w(b+P)}}e.value=e.value.map((function(e){return a.id===e.id?Object(S["a"])(Object(S["a"])({},e),{},{left:d,top:p,width:r,height:l}):e}))}},document.onmouseup=function(t){f=!1,document.onmousemove=null,document.onmouseup=null,n.value=[],I===t.pageX&&T===t.pageY||(c.commit(i.UPDATE_SLIDE,{elements:e.value}),d())}},f=function(t,n,o){var a=!0,s=n.minX,p=n.maxX,f=n.minY,m=n.maxY,h=p-s,v=m-f,b=h/v,O=t.pageX,g=t.pageY,j=JSON.parse(JSON.stringify(e.value));document.onmousemove=function(t){if(a){var n=t.pageX,c=t.pageY,i=(n-O)/u.value,d=(c-g)/u.value;l.value&&(o!==Ce.RIGHT_BOTTOM&&o!==Ce.LEFT_TOP||(d=i/b),o!==Ce.LEFT_BOTTOM&&o!==Ce.RIGHT_TOP||(d=-i/b));var E=s,y=p,I=f,T=m;o===Ce.RIGHT_BOTTOM?(y=p+i,T=m+d):o===Ce.LEFT_BOTTOM?(E=s+i,T=m+d):o===Ce.LEFT_TOP?(E=s+i,I=f+d):o===Ce.RIGHT_TOP?(y=p+i,I=f+d):o===Ce.TOP?I=f+d:o===Ce.BOTTOM?T=m+d:o===Ce.LEFT?E=s+i:o===Ce.RIGHT&&(y=p+i);var x=y-E,w=T-I,_=x/h,k=w/v;_<=0&&(_=0),k<=0&&(k=0),e.value=e.value.map((function(e){if((e.type===N.IMAGE||e.type===N.SHAPE)&&r.value.includes(e.id)){var t=j.find((function(t){return t.id===e.id}));return Object(S["a"])(Object(S["a"])({},e),{},{width:t.width*_,height:t.height*k,left:E+(t.left-s)*_,top:I+(t.top-f)*k})}return e}))}},document.onmouseup=function(t){a=!1,document.onmousemove=null,document.onmouseup=null,O===t.pageX&&g===t.pageY||(c.commit(i.UPDATE_SLIDE,{elements:e.value}),d())}};return{scaleElement:p,scaleMultiElement:f}},Ge=n("eed6"),ze=n.n(Ge),Ye=function(e,t,n){var c=Object(a["b"])(),r=Object(o["computed"])((function(){return c.state.activeElementIdList})),l=Object(o["computed"])((function(){return c.state.handleElementId})),u=Object(o["computed"])((function(){return c.state.editorAreaFocus})),s=Object(o["computed"])((function(){return c.getters.ctrlOrShiftKeyActive})),d=function(o,a){var d=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(u.value||c.commit(i.SET_EDITORAREA_FOCUS,!0),r.value.includes(a.id)){if(s.value){var p=[];if(a.groupId){var f=[];e.value.forEach((function(e){e.groupId===a.groupId&&f.push(e.id)})),p=r.value.filter((function(e){return!f.includes(e)}))}else p=r.value.filter((function(e){return e!==a.id}));p.length>0&&c.commit(i.SET_ACTIVE_ELEMENT_ID_LIST,p)}else if(l.value!==a.id)c.commit(i.SET_HANDLE_ELEMENT_ID,a.id);else if(t.value!==a.id&&a.groupId){var m=o.pageX,h=o.pageY;o.target.onmouseup=function(e){var n=e.pageX,o=e.pageY;m===n&&h===o&&(t.value=a.id,e.target.onmouseup=null)}}}else{var v=[];if(v=s.value?[].concat(Object(j["a"])(r.value),[a.id]):[a.id],a.groupId){var b=[];e.value.forEach((function(e){e.groupId===a.groupId&&b.push(e.id)})),v=[].concat(Object(j["a"])(v),b)}c.commit(i.SET_ACTIVE_ELEMENT_ID_LIST,ze()(v)),c.commit(i.SET_HANDLE_ELEMENT_ID,a.id)}d&&n(o,a)},p=function(){var t=e.value.filter((function(e){return!e.lock})),n=t.map((function(e){return e.id}));c.commit(i.SET_ACTIVE_ELEMENT_ID_LIST,n)};return{selectElement:d,selectAllElement:p}},Xe=function(e,t,n){var c=Object(a["b"])(),r=Object(o["computed"])((function(){return c.state.activeElementIdList})),l=Object(o["computed"])((function(){return c.state.canvasScale})),u=ne(),s=u.addHistorySnapshot,d=function(o,a){if(r.value.includes(a.id)){var u,d=!0,p=me,f=me*he,m=JSON.parse(JSON.stringify(e.value)),h=m.filter((function(e){return r.value.includes(e.id)})),v=3,b=a.left,O=a.top,g=a.width,E="height"in a&&a.height?a.height:0,y="rotate"in a&&a.rotate?a.rotate:0,I=o.pageX,T=o.pageY,x=null,w=a.id===t.value,_=[],k=[],L=Object(Z["a"])(e.value);try{for(L.s();!(u=L.n()).done;){var C=u.value;if(C.type!==N.LINE&&((!w||C.id!==a.id)&&(w||!r.value.includes(C.id)))){var M=void 0,A=void 0,B=void 0,D=void 0;if("rotate"in C&&C.rotate){var P=Me({left:C.left,top:C.top,width:C.width,height:C.height,rotate:C.rotate}),R=P.xRange,H=P.yRange;M=R[0],A=H[0],B=R[1]-R[0],D=H[1]-H[0]}else M=C.left,A=C.top,B=C.width,D=C.height;var F=M+B,V=A+D,q=A+D/2,G=M+B/2,z={value:A,range:[M,F]},Y={value:V,range:[M,F]},X={value:q,range:[M,F]},U={value:M,range:[A,V]},W={value:F,range:[A,V]},J={value:G,range:[A,V]};_.push(z,Y,X),k.push(U,W,J)}}}catch(oe){L.e(oe)}finally{L.f()}var K={value:0,range:[0,p]},Q={value:f,range:[0,p]},$={value:f/2,range:[0,p]},ee={value:0,range:[0,f]},te={value:p,range:[0,f]},ne={value:p/2,range:[0,f]};_.push(K,Q,$),k.push(ee,te,ne),_=Be(_),k=Be(k),document.onmousemove=function(t){var o=t.pageX,c=t.pageY;if(!1!==x&&(x=Math.abs(I-o)<v&&Math.abs(T-c)<v),d&&!x){var i,u,s,p,f=(o-I)/l.value,m=(c-T)/l.value,L=b+f,C=O+m;if(1===r.value.length||w)if(y){var M=Me({left:L,top:C,width:g,height:E,rotate:y}),A=M.xRange,B=M.yRange;i=A[0],u=A[1],s=B[0],p=B[1]}else a.type===N.LINE?(i=L,u=L+Math.max(a.start[0],a.end[0]),s=C,p=C+Math.max(a.start[1],a.end[1])):(i=L,u=L+g,s=C,p=C+E);else{for(var D=[],P=[],R=[],H=[],F=0;F<h.length;F++){var V=h[F],q=V.left+f,G=V.top+m,z=V.width,Y="height"in V&&V.height?V.height:0,X="rotate"in V&&V.rotate?V.rotate:0;if("rotate"in V&&V.rotate){var U=Me({left:q,top:G,width:z,height:Y,rotate:X}),W=U.xRange,J=U.yRange;D.push(W[0]),P.push(J[0]),R.push(W[1]),H.push(J[1])}else V.type===N.LINE?(D.push(q),P.push(G),R.push(q+Math.max(V.start[0],V.end[0])),H.push(G+Math.max(V.start[1],V.end[1]))):(D.push(q),P.push(G),R.push(q+z),H.push(G+Y))}i=Math.min.apply(Math,D),u=Math.max.apply(Math,R),s=Math.min.apply(Math,P),p=Math.max.apply(Math,H)}for(var K=i+(u-i)/2,Z=s+(p-s)/2,Q=[],$=!1,ee=!1,te=0;te<_.length;te++){var ne=_[te],oe=ne.value,ce=ne.range,ie=Math.min.apply(Math,Object(j["a"])(ce).concat([i,u])),re=Math.max.apply(Math,Object(j["a"])(ce).concat([i,u]));Math.abs(s-oe)<v&&(ee||(C-=s-oe,ee=!0),Q.push({type:"horizontal",axis:{x:ie-50,y:oe},length:re-ie+100})),Math.abs(p-oe)<v&&(ee||(C-=p-oe,ee=!0),Q.push({type:"horizontal",axis:{x:ie-50,y:oe},length:re-ie+100})),Math.abs(Z-oe)<v&&(ee||(C-=Z-oe,ee=!0),Q.push({type:"horizontal",axis:{x:ie-50,y:oe},length:re-ie+100}))}for(var ae=0;ae<k.length;ae++){var le=k[ae],ue=le.value,se=le.range,de=Math.min.apply(Math,Object(j["a"])(se).concat([s,p])),pe=Math.max.apply(Math,Object(j["a"])(se).concat([s,p]));Math.abs(i-ue)<v&&($||(L-=i-ue,$=!0),Q.push({type:"vertical",axis:{x:ue,y:de-50},length:pe-de+100})),Math.abs(u-ue)<v&&($||(L-=u-ue,$=!0),Q.push({type:"vertical",axis:{x:ue,y:de-50},length:pe-de+100})),Math.abs(K-ue)<v&&($||(L-=K-ue,$=!0),Q.push({type:"vertical",axis:{x:ue,y:de-50},length:pe-de+100}))}if(n.value=Q,1===r.value.length||w)e.value=e.value.map((function(e){return e.id===a.id?Object(S["a"])(Object(S["a"])({},e),{},{left:L,top:C}):e}));else{var fe=e.value.find((function(e){return e.id===a.id}));if(!fe)return;e.value=e.value.map((function(e){return r.value.includes(e.id)?e.id===a.id?Object(S["a"])(Object(S["a"])({},e),{},{left:L,top:C}):Object(S["a"])(Object(S["a"])({},e),{},{left:e.left+(L-fe.left),top:e.top+(C-fe.top)}):e}))}}},document.onmouseup=function(t){d=!1,document.onmousemove=null,document.onmouseup=null,n.value=[];var o=t.pageX,r=t.pageY;I===o&&T===r||(c.commit(i.UPDATE_SLIDE,{elements:e.value}),s())}}};return{dragElement:d}},Ue=function(){var e=Object(a["b"])(),t=Object(o["computed"])((function(){return e.state.canvasPercentage})),n=function(n){var o=t.value,c=5,r=120,a=60;"+"===n&&o<=r&&(o+=c),"-"===n&&o>=a&&(o-=c),e.commit(i.SET_CANVAS_PERCENTAGE,o)};return{scaleCanvas:n}};function We(e,t,n,c,i,r){return Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:"editable-element",ref:"elementRef",id:"editable-element-"+e.elementInfo.id,style:{zIndex:e.elementIndex}},[(Object(o["openBlock"])(),Object(o["createBlock"])(Object(o["resolveDynamicComponent"])(e.currentElementComponent),{elementInfo:e.elementInfo,selectElement:e.selectElement,contextmenus:e.contextmenus},null,8,["elementInfo","selectElement","contextmenus"]))],12,["id"])}n("a9e3");var Je,Ke,Ze=function(){var e=Object(a["b"])(),t=Object(o["computed"])((function(){return e.getters.currentSlide})),n=ne(),c=n.addHistorySnapshot,r=function(e,t){var n=e.findIndex((function(e){return e.id===t[0].id})),o=e.findIndex((function(e){return e.id===t[t.length-1].id}));return{minIndex:n,maxIndex:o}},l=function(e,t){var n=JSON.parse(JSON.stringify(e));if(t.groupId){var o=n.filter((function(e){return e.groupId===t.groupId})),c=r(e,o),i=c.minIndex,a=c.maxIndex;if(a===e.length-1)return null;var l=n[a+1],u=n.splice(i,o.length);if(l.groupId){var s=n.filter((function(e){return e.groupId===l.groupId}));n.splice.apply(n,[i+s.length,0].concat(Object(j["a"])(u)))}else n.splice.apply(n,[i+1,0].concat(Object(j["a"])(u)))}else{var d=e.findIndex((function(e){return e.id===t.id}));if(d===e.length-1)return null;var p=n[d+1],f=n.splice(d,1)[0];if(p.groupId){var m=n.filter((function(e){return e.groupId===p.groupId}));n.splice(d+m.length,0,f)}else n.splice(d+1,0,f)}return n},u=function(e,t){var n=JSON.parse(JSON.stringify(e));if(t.groupId){var o=n.filter((function(e){return e.groupId===t.groupId})),c=r(e,o),i=c.minIndex;if(0===i)return null;var a=n[i-1],l=n.splice(i,o.length);if(a.groupId){var u=n.filter((function(e){return e.groupId===a.groupId}));n.splice.apply(n,[i-u.length,0].concat(Object(j["a"])(l)))}else n.splice.apply(n,[i-1,0].concat(Object(j["a"])(l)))}else{var s=e.findIndex((function(e){return e.id===t.id}));if(0===s)return null;var d=n[s-1],p=n.splice(s,1)[0];if(d.groupId){var f=n.filter((function(e){return e.groupId===d.groupId}));n.splice(s-f.length,0,p)}else n.splice(s-1,0,p)}return n},s=function(e,t){var n=JSON.parse(JSON.stringify(e));if(t.groupId){var o=n.filter((function(e){return e.groupId===t.groupId})),c=r(e,o),i=c.minIndex,a=c.maxIndex;if(a===e.length-1)return null;var l=n.splice(i,o.length);n.push.apply(n,Object(j["a"])(l))}else{var u=e.findIndex((function(e){return e.id===t.id}));if(u===e.length-1)return null;n.splice(u,1),n.push(t)}return n},d=function(e,t){var n=JSON.parse(JSON.stringify(e));if(t.groupId){var o=n.filter((function(e){return e.groupId===t.groupId})),c=r(e,o),i=c.minIndex;if(0===i)return null;var a=n.splice(i,o.length);n.unshift.apply(n,Object(j["a"])(a))}else{var l=e.findIndex((function(e){return e.id===t.id}));if(0===l)return null;n.splice(l,1),n.unshift(t)}return n},p=function(n,o){var r=null;o===_e.UP?r=l(t.value.elements,n):o===_e.DOWN?r=u(t.value.elements,n):o===_e.TOP?r=s(t.value.elements,n):o===_e.BOTTOM&&(r=d(t.value.elements,n)),e.commit(i.UPDATE_SLIDE,{elements:r}),c()};return{orderElement:p}},Qe=function(){var e=Object(a["b"])(),t=Object(o["computed"])((function(){return e.state.activeElementIdList})),n=Object(o["computed"])((function(){return e.getters.activeElementList})),c=Object(o["computed"])((function(){return e.getters.currentSlide})),r=function(o){var r,a=me,l=me*he,u=Ne(n.value),s=u.minX,d=u.maxX,p=u.minY,f=u.maxY,m=JSON.parse(JSON.stringify(c.value.elements)),h=Object(Z["a"])(m);try{for(h.s();!(r=h.n()).done;){var v=r.value;if(t.value.includes(v.id))if(o===ke.TOP){var b=p-0;v.top=v.top-b}else if(o===ke.VERTICAL){var O=p+(f-p)/2-l/2;v.top=v.top-O}else if(o===ke.BOTTOM){var g=f-l;v.top=v.top-g}else if(o===ke.LEFT){var j=s-0;v.left=v.left-j}else if(o===ke.HORIZONTAL){var S=s+(d-s)/2-a/2;v.left=v.left-S}else if(o===ke.RIGHT){var E=d-a;v.left=v.left-E}}}catch(y){h.e(y)}finally{h.f()}e.commit(i.UPDATE_SLIDE,{elements:m})};return{alignElementToCanvas:r}},$e=Object(o["withScopeId"])("data-v-630bc924"),et=$e((function(e,t,n,c,i,r){var a=Object(o["resolveComponent"])("ImageRectOutline"),l=Object(o["resolveComponent"])("ImageEllipseOutline"),u=Object(o["resolveComponent"])("ImagePolygonOutline"),s=Object(o["resolveDirective"])("contextmenu");return Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:["editable-element-image",{lock:e.elementInfo.lock}],style:{top:e.elementInfo.top+"px",left:e.elementInfo.left+"px",width:e.elementInfo.width+"px",height:e.elementInfo.height+"px",transform:"rotate(".concat(e.elementInfo.rotate,"deg)")},onMousedown:t[1]||(t[1]=function(t){return e.handleSelectElement(t)})},[Object(o["withDirectives"])(Object(o["createVNode"])("div",{class:"element-content",style:{filter:e.shadowStyle?"drop-shadow(".concat(e.shadowStyle,")"):"",transform:e.flip}},["rect"===e.clipShape.type?(Object(o["openBlock"])(),Object(o["createBlock"])(a,{key:0,width:e.elementInfo.width,height:e.elementInfo.height,radius:e.clipShape.radius,outline:e.elementInfo.outline},null,8,["width","height","radius","outline"])):"ellipse"===e.clipShape.type?(Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:1,width:e.elementInfo.width,height:e.elementInfo.height,outline:e.elementInfo.outline},null,8,["width","height","outline"])):"polygon"===e.clipShape.type?(Object(o["openBlock"])(),Object(o["createBlock"])(u,{key:2,width:e.elementInfo.width,height:e.elementInfo.height,outline:e.elementInfo.outline,createPath:e.clipShape.createPath},null,8,["width","height","outline","createPath"])):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])("div",{class:"image-content",style:{clipPath:e.clipShape.style}},[Object(o["createVNode"])("img",{src:e.elementInfo.src,draggable:!1,style:{top:e.imgPosition.top,left:e.imgPosition.left,width:e.imgPosition.width,height:e.imgPosition.height,filter:e.filter},alt:""},null,12,["src"])],4)],4),[[s,e.contextmenus]])],38)})),tt=(n("b64b"),n("3835"));(function(e){e["RECT"]="rect",e["ELLIPSE"]="ellipse",e["POLYGON"]="polygon"})(Je||(Je={})),function(e){e["RECT"]="rect",e["ROUNDRECT"]="roundRect",e["ELLIPSE"]="ellipse",e["TRIANGLE"]="triangle",e["PENTAGON"]="pentagon",e["RHOMBUS"]="rhombus",e["STAR"]="star"}(Ke||(Ke={}));var nt={rect:{name:"矩形",type:Je.RECT,radius:"0",style:""},roundRect:{name:"圆角矩形",type:Je.RECT,radius:"10%",style:"inset(0 0 0 0 round 10% 10% 10% 10%)"},ellipse:{name:"圆形",type:Je.ELLIPSE,style:"ellipse(50% 50% at 50% 50%)"},triangle:{name:"三角形",type:Je.POLYGON,style:"polygon(50% 0%, 0% 100%, 100% 100%)",createPath:function(e,t){return"M ".concat(e/2," 0 L 0 ").concat(t," L ").concat(e," ").concat(t," Z")}},pentagon:{name:"五边形",type:Je.POLYGON,style:"polygon(50% 0%, 100% 38%, 82% 100%, 18% 100%, 0% 38%)",createPath:function(e,t){return"M ".concat(e/2," 0 L ").concat(e," ").concat(.38*t," L ").concat(.82*e," ").concat(t," L ").concat(.18*e," ").concat(t," L 0 ").concat(.38*t," Z")}},rhombus:{name:"菱形",type:Je.POLYGON,style:"polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%)",createPath:function(e,t){return"M ".concat(e/2," 0 L ").concat(e," ").concat(t/2," L ").concat(e/2," ").concat(t," L 0 ").concat(t/2," Z")}},star:{name:"五角星",type:Je.POLYGON,style:"polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%)",createPath:function(e,t){return"M ".concat(e/2," 0 L ").concat(.61*e," ").concat(.35*t," L ").concat(.98*e," ").concat(.35*t," L ").concat(.68*e," ").concat(.57*t," L ").concat(.79*e," ").concat(.91*t," L ").concat(.5*e," ").concat(.7*t," L ").concat(.21*e," ").concat(.91*t," L ").concat(.32*e," ").concat(.57*t," L ").concat(.02*e," ").concat(.35*t," L ").concat(.39*e," ").concat(.35*t," Z")}}},ot=function(e){var t="";if(e.value){var n=e.value,o=n.h,c=n.v,i=n.blur,r=n.color;t="".concat(o,"px ").concat(c,"px ").concat(i,"px ").concat(r)}return{shadowStyle:t}},ct=Object(o["withScopeId"])("data-v-7714d164"),it=ct((function(e,t,n,c,i,r){var a=Object(o["resolveComponent"])("SvgWrapper");return e.outline?(Object(o["openBlock"])(),Object(o["createBlock"])(a,{key:0,class:"image-rect-outline",overflow:"visible",width:e.width,height:e.height},{default:ct((function(){return[Object(o["createVNode"])("rect",{"vector-effect":"non-scaling-stroke","stroke-linecap":"butt","stroke-miterlimit":"8","stroke-linejoin":"",fill:"transparent",rx:e.radius,ry:e.radius,width:e.width,height:e.height,stroke:e.outlineColor,"stroke-width":e.outlineWidth,"stroke-dasharray":"dashed"===e.outlineStyle?"12 9":"0 0"},null,8,["rx","ry","width","height","stroke","stroke-width","stroke-dasharray"])]})),_:1},8,["width","height"])):Object(o["createCommentVNode"])("",!0)})),rt={xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",version:"1.1"};function at(e,t,n,c,i,r){return Object(o["openBlock"])(),Object(o["createBlock"])("svg",rt,[Object(o["renderSlot"])(e.$slots,"default")])}var lt={name:"svg-wrapper"};lt.render=at;var ut=lt,st=function(e){var t=Object(o["computed"])((function(){return e.value&&void 0!==e.value.width?e.value.width:0})),n=Object(o["computed"])((function(){return e.value&&void 0!==e.value.style?e.value.style:"solid"})),c=Object(o["computed"])((function(){return e.value&&void 0!==e.value.color?e.value.color:"#41464b"}));return{outlineWidth:t,outlineStyle:n,outlineColor:c}},dt=Object(o["defineComponent"])({name:"image-rect-outline",components:{SvgWrapper:ut},props:{width:{type:Number,required:!0},height:{type:Number,required:!0},outline:{type:Object},radius:{type:String,default:"0"}},setup:function(e){var t=st(Object(o["toRef"])(e,"outline")),n=t.outlineWidth,c=t.outlineStyle,i=t.outlineColor;return{outlineWidth:n,outlineStyle:c,outlineColor:i}}});n("0a56");dt.render=it,dt.__scopeId="data-v-7714d164";var pt=dt,ft=Object(o["withScopeId"])("data-v-46fac852"),mt=ft((function(e,t,n,c,i,r){var a=Object(o["resolveComponent"])("SvgWrapper");return e.outline?(Object(o["openBlock"])(),Object(o["createBlock"])(a,{key:0,class:"image-ellipse-outline",overflow:"visible",width:e.width,height:e.height},{default:ft((function(){return[Object(o["createVNode"])("ellipse",{"vector-effect":"non-scaling-stroke","stroke-linecap":"butt","stroke-miterlimit":"8","stroke-linejoin":"",fill:"transparent",cx:e.width/2,cy:e.height/2,rx:e.width/2,ry:e.height/2,stroke:e.outlineColor,"stroke-width":e.outlineWidth,"stroke-dasharray":"dashed"===e.outlineStyle?"12 9":"0 0"},null,8,["cx","cy","rx","ry","stroke","stroke-width","stroke-dasharray"])]})),_:1},8,["width","height"])):Object(o["createCommentVNode"])("",!0)})),ht=Object(o["defineComponent"])({name:"image-ellipse-outline",components:{SvgWrapper:ut},props:{width:{type:Number,required:!0},height:{type:Number,required:!0},outline:{type:Object}},setup:function(e){var t=st(Object(o["toRef"])(e,"outline")),n=t.outlineWidth,c=t.outlineStyle,i=t.outlineColor;return{outlineWidth:n,outlineStyle:c,outlineColor:i}}});n("494d");ht.render=mt,ht.__scopeId="data-v-46fac852";var vt=ht,bt=Object(o["withScopeId"])("data-v-516342b7"),Ot=bt((function(e,t,n,c,i,r){var a=Object(o["resolveComponent"])("SvgWrapper");return e.outline?(Object(o["openBlock"])(),Object(o["createBlock"])(a,{key:0,class:"image-polygon-outline",overflow:"visible",width:e.width,height:e.height},{default:bt((function(){return[Object(o["createVNode"])("path",{"vector-effect":"non-scaling-stroke","stroke-linecap":"butt","stroke-miterlimit":"8","stroke-linejoin":"",fill:"transparent",d:e.createPath(e.width,e.height),stroke:e.outlineColor,"stroke-width":e.outlineWidth,"stroke-dasharray":"dashed"===e.outlineStyle?"12 9":"0 0"},null,8,["d","stroke","stroke-width","stroke-dasharray"])]})),_:1},8,["width","height"])):Object(o["createCommentVNode"])("",!0)})),gt=Object(o["defineComponent"])({name:"image-polygon-outline",components:{SvgWrapper:ut},props:{width:{type:Number,required:!0},height:{type:Number,required:!0},outline:{type:Object},createPath:{type:Function,required:!0}},setup:function(e){var t=st(Object(o["toRef"])(e,"outline")),n=t.outlineWidth,c=t.outlineStyle,i=t.outlineColor;return{outlineWidth:n,outlineStyle:c,outlineColor:i}}});n("e682");gt.render=Ot,gt.__scopeId="data-v-516342b7";var jt=gt,St=Object(o["defineComponent"])({name:"editable-element-image",components:{ImageRectOutline:pt,ImageEllipseOutline:vt,ImagePolygonOutline:jt},props:{elementInfo:{type:Object,required:!0},selectElement:{type:Function,required:!0},contextmenus:{type:Function}},setup:function(e){var t=Object(o["computed"])((function(){return e.elementInfo.shadow})),n=ot(t),c=n.shadowStyle,i=function(t){e.elementInfo.lock||(t.stopPropagation(),e.selectElement(t,e.elementInfo))},r=Object(o["computed"])((function(){if(!e.elementInfo||!e.elementInfo.clip)return nt.rect;var t=e.elementInfo.clip.shape||Je.RECT;return nt[t]})),a=Object(o["computed"])((function(){if(!e.elementInfo||!e.elementInfo.clip)return{top:"0",left:"0",width:"100%",height:"100%"};var t=Object(tt["a"])(e.elementInfo.clip.range,2),n=t[0],o=t[1],c=(o[0]-n[0])/100,i=(o[1]-n[1])/100,r=n[0]/c,a=n[1]/i;return{left:-r+"%",top:-a+"%",width:100/c+"%",height:100/i+"%"}})),l=Object(o["computed"])((function(){if(!e.elementInfo.filters)return"";for(var t="",n=0,o=Object.keys(e.elementInfo.filters);n<o.length;n++){var c=o[n];t+="".concat(c,"(").concat(e.elementInfo.filters[c],") ")}return t})),u=Object(o["computed"])((function(){if(!e.elementInfo.flip)return"";var t=e.elementInfo.flip,n=t.x,o=t.y;return n&&o?"rotateX(".concat(n,"deg) rotateY(").concat(o,"deg)"):n?"rotateX(".concat(n,"deg)"):o?"rotateY(".concat(o,"deg)"):""}));return{shadowStyle:c,handleSelectElement:i,clipShape:r,imgPosition:a,filter:l,flip:u}}});n("1540");St.render=et,St.__scopeId="data-v-630bc924";var Et=St,yt=Object(o["withScopeId"])("data-v-78ae3edb"),It=yt((function(e,t,n,c,i,r){var a=Object(o["resolveComponent"])("ElementOutline"),l=Object(o["resolveDirective"])("contextmenu");return Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:["editable-element-text",{lock:e.elementInfo.lock}],style:{top:e.elementInfo.top+"px",left:e.elementInfo.left+"px",width:e.elementInfo.width+"px",transform:"rotate(".concat(e.elementInfo.rotate,"deg)")},onMousedown:t[2]||(t[2]=function(t){return e.handleSelectElement(t)})},[Object(o["withDirectives"])(Object(o["createVNode"])("div",{class:"element-content",style:{backgroundColor:e.elementInfo.fill,opacity:e.elementInfo.opacity,textShadow:e.shadowStyle}},[Object(o["createVNode"])(a,{width:e.elementInfo.width,height:e.elementInfo.height,outline:e.elementInfo.outline},null,8,["width","height","outline"]),Object(o["createVNode"])("div",{class:"text",innerHTML:e.elementInfo.content,contenteditable:!e.elementInfo.lock,onMousedown:t[1]||(t[1]=function(t){return e.handleSelectElement(t,!1)})},null,40,["innerHTML","contenteditable"])],4),[[l,e.contextmenus]])],38)})),Tt=Object(o["withScopeId"])("data-v-138fe760"),xt=Tt((function(e,t,n,c,i,r){var a=Object(o["resolveComponent"])("SvgWrapper");return e.outline?(Object(o["openBlock"])(),Object(o["createBlock"])(a,{key:0,class:"element-outline",overflow:"visible",width:e.width,height:e.height},{default:Tt((function(){return[Object(o["createVNode"])("path",{"vector-effect":"non-scaling-stroke","stroke-linecap":"butt","stroke-miterlimit":"8","stroke-linejoin":"",fill:"transparent",d:"M0,0 L".concat(e.width,",0 L").concat(e.width,",").concat(e.height," L0,").concat(e.height," Z"),stroke:e.outlineColor,"stroke-width":e.outlineWidth,"stroke-dasharray":"dashed"===e.outlineStyle?"12 9":"0 0"},null,8,["d","stroke","stroke-width","stroke-dasharray"])]})),_:1},8,["width","height"])):Object(o["createCommentVNode"])("",!0)})),wt=Object(o["defineComponent"])({name:"element-outline",components:{SvgWrapper:ut},props:{width:{type:Number,required:!0},height:{type:Number,required:!0},outline:{type:Object}},setup:function(e){var t=st(Object(o["toRef"])(e,"outline")),n=t.outlineWidth,c=t.outlineStyle,i=t.outlineColor;return{outlineWidth:n,outlineStyle:c,outlineColor:i}}});n("aa47");wt.render=xt,wt.__scopeId="data-v-138fe760";var _t=wt,kt=Object(o["defineComponent"])({name:"editable-element-text",components:{ElementOutline:_t},props:{elementInfo:{type:Object,required:!0},selectElement:{type:Function,required:!0},contextmenus:{type:Function}},setup:function(e){var t=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.elementInfo.lock||(t.stopPropagation(),e.selectElement(t,e.elementInfo,n))},n=Object(o["computed"])((function(){return e.elementInfo.shadow})),c=ot(n),i=c.shadowStyle;return{handleSelectElement:t,shadowStyle:i}}});n("2c7d");kt.render=It,kt.__scopeId="data-v-78ae3edb";var Lt=kt,Ct=Object(o["defineComponent"])({name:"editable-element",props:{elementInfo:{type:Object,required:!0},elementIndex:{type:Number,required:!0},isMultiSelect:{type:Boolean,required:!0},selectElement:{type:Function,required:!0}},setup:function(e){var t=Object(o["computed"])((function(){var t={image:Et,text:Lt};return t[e.elementInfo.type]||null})),n=Ze(),c=n.orderElement,i=Qe(),r=i.alignElementToCanvas,a=ae(),l=a.combineElements,u=a.uncombineElements,s=re(),d=s.deleteElement,p=ie(),f=p.lockElement,m=p.unlockElement,h=le(),v=h.copyElement,b=h.cutElement,O=function(){return e.elementInfo.lock?[{text:"解锁",handler:function(){return m(e.elementInfo)}}]:[{text:"剪切",subText:"Ctrl + X",handler:b},{text:"复制",subText:"Ctrl + C",handler:v},{divider:!0},{text:"层级排序",disable:e.isMultiSelect&&!e.elementInfo.groupId,children:[{text:"置顶层",handler:function(){return c(e.elementInfo,_e.TOP)}},{text:"置底层",handler:function(){return c(e.elementInfo,_e.BOTTOM)}},{divider:!0},{text:"上移一层",handler:function(){return c(e.elementInfo,_e.UP)}},{text:"下移一层",handler:function(){return c(e.elementInfo,_e.DOWN)}}]},{text:"水平对齐",children:[{text:"水平居中",handler:function(){return r(ke.HORIZONTAL)}},{text:"左对齐",handler:function(){return r(ke.LEFT)}},{text:"右对齐",handler:function(){return r(ke.RIGHT)}}]},{text:"垂直对齐",children:[{text:"垂直居中",handler:function(){return r(ke.VERTICAL)}},{text:"上对齐",handler:function(){return r(ke.TOP)}},{text:"下对齐",handler:function(){return r(ke.BOTTOM)}}]},{divider:!0},{text:e.elementInfo.groupId?"取消组合":"组合",subText:"Ctrl + G",handler:e.elementInfo.groupId?u:l,hide:!e.isMultiSelect},{text:"锁定",subText:"Ctrl + L",handler:f},{text:"删除",subText:"Delete",handler:d}]};return{currentElementComponent:t,contextmenus:O}}});Ct.render=We;var Mt=Ct,At=Object(o["withScopeId"])("data-v-9a95dde2"),Nt=At((function(e,t,n,c,i,r){return Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:"mouse-selection quadrant-".concat(n.quadrant),style:{top:n.top+"px",left:n.left+"px",width:n.width+"px",height:n.height+"px"}},null,6)})),Bt={name:"mouse-selection",props:{top:{type:Number,required:!0},left:{type:Number,required:!0},width:{type:Number,required:!0},height:{type:Number,required:!0},quadrant:{type:Number,required:!0,validator:function(e){return[1,2,3,4].includes(e)}}}};n("4a14");Bt.render=Nt,Bt.__scopeId="data-v-9a95dde2";var Dt=Bt,Pt=Object(o["withScopeId"])("data-v-0abf6edf"),Rt=Pt((function(e,t,n,c,i,r){var a=Object(o["resolveComponent"])("GridLines");return Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:"slide-background",style:e.backgroundStyle},[e.showGridLines?(Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],{key:0},[Object(o["createVNode"])(a),Object(o["createVNode"])(a,{gridSize:100,gridColor:"rgba(100, 100, 100, 0.3)"})],64)):Object(o["createCommentVNode"])("",!0)],4)})),Ht=Object(o["withScopeId"])("data-v-7879d934"),Ft=Ht((function(e,t,n,c,i,r){return Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:"grid-lines",style:e.style},null,4)})),Vt=Object(o["defineComponent"])({name:"grid-lines",props:{gridSize:{type:Number,default:20},gridColor:{type:String,default:"rgba(100, 100, 100, 0.2)"}},setup:function(e){var t=Object(o["computed"])((function(){var t=e.gridSize+"px",n=e.gridSize-1+"px",o=e.gridColor;return{backgroundImage:"linear-gradient(transparent ".concat(n,", ").concat(o," ").concat(n,", ").concat(o," ").concat(t,"), linear-gradient(90deg, transparent ").concat(n,", ").concat(o," ").concat(n,", ").concat(o," ").concat(t,")"),backgroundSize:"".concat(t," ").concat(t)}}));return{style:t}}});n("f26f");Vt.render=Ft,Vt.__scopeId="data-v-7879d934";var qt=Vt,Gt=function(e){var t=Object(o["computed"])((function(){if(!e.value)return{backgroundColor:"#fff"};var t=e.value,n=t.type,o=t.value;return"solid"===n?{backgroundColor:o}:"image"===n?{backgroundImage:"url(".concat(o)}:{backgroundColor:"#fff"}}));return{backgroundStyle:t}},zt=Object(o["defineComponent"])({name:"slide-background",components:{GridLines:qt},setup:function(){var e=Object(a["b"])(),t=Object(o["computed"])((function(){return e.state.showGridLines})),n=Object(o["computed"])((function(){return e.getters.currentSlide.background})),c=Gt(n),i=c.backgroundStyle;return{showGridLines:t,backgroundStyle:i}}});n("b8d1");zt.render=Rt,zt.__scopeId="data-v-0abf6edf";var Yt=zt,Xt=Object(o["withScopeId"])("data-v-727edbe6"),Ut=Xt((function(e,t,n,c,i,r){return Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:"alignment-line",style:{left:e.left,top:e.top}},[Object(o["createVNode"])("div",{class:["line",e.type],style:e.sizeStyle},null,6)],4)})),Wt=Object(o["defineComponent"])({name:"alignment-line",props:{type:{type:String,required:!0},axis:{type:Object,required:!0},length:{type:Number,required:!0}},setup:function(e){var t=Object(a["b"])(),n=Object(o["computed"])((function(){return t.state.canvasScale})),c=Object(o["computed"])((function(){return e.axis.x*n.value+"px"})),i=Object(o["computed"])((function(){return e.axis.y*n.value+"px"})),r=Object(o["computed"])((function(){return"vertical"===e.type?{height:e.length*n.value+"px"}:{width:e.length*n.value+"px"}}));return{left:c,top:i,sizeStyle:r}}});n("0333");Wt.render=Ut,Wt.__scopeId="data-v-727edbe6";var Jt=Wt,Kt=Object(o["withScopeId"])("data-v-693e74ed"),Zt=Kt((function(e,t,n,c,i,r){var a=Object(o["resolveComponent"])("BorderLine"),l=Object(o["resolveComponent"])("ResizeHandler");return Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:"multi-select-operate",style:{left:e.minX*e.canvasScale+"px",top:e.minY*e.canvasScale+"px"}},[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.borderLines,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])(a,{key:e.type,type:e.type,style:e.style},null,8,["type","style"])})),128)),e.disableResize?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],{key:0},Object(o["renderList"])(e.resizeHandlers,(function(t){return Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:t.direction,type:t.direction,style:t.style,onMousedown:Object(o["withModifiers"])((function(n){return e.scaleMultiElement(n,{minX:e.minX,maxX:e.maxX,minY:e.minY,maxY:e.maxY},t.direction)}),["stop"])},null,8,["type","style","onMousedown"])})),128))],4)})),Qt=function(e,t){var n=Object(o["computed"])((function(){return[{direction:Ce.LEFT_TOP,style:{}},{direction:Ce.TOP,style:{left:e.value/2+"px"}},{direction:Ce.RIGHT_TOP,style:{left:e.value+"px"}},{direction:Ce.LEFT,style:{top:t.value/2+"px"}},{direction:Ce.RIGHT,style:{left:e.value+"px",top:t.value/2+"px"}},{direction:Ce.LEFT_BOTTOM,style:{top:t.value+"px"}},{direction:Ce.BOTTOM,style:{left:e.value/2+"px",top:t.value+"px"}},{direction:Ce.RIGHT_BOTTOM,style:{left:e.value+"px",top:t.value+"px"}}]})),c=Object(o["computed"])((function(){return[{direction:Ce.LEFT,style:{top:t.value/2+"px"}},{direction:Ce.RIGHT,style:{left:e.value+"px",top:t.value/2+"px"}}]})),i=Object(o["computed"])((function(){return[{type:Le.T,style:{width:e.value+"px"}},{type:Le.B,style:{top:t.value+"px",width:e.value+"px"}},{type:Le.L,style:{height:t.value+"px"}},{type:Le.R,style:{left:e.value+"px",height:t.value+"px"}}]}));return{resizeHandlers:n,textElementResizeHandlers:c,borderLines:i}},$t=Object(o["withScopeId"])("data-v-2400f56e"),en=$t((function(e,t,n,c,i,r){return Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:["resize-handler",n.type]},null,2)})),tn={name:"resize-handler",props:{type:{type:String,required:!0}}};n("4b70");tn.render=en,tn.__scopeId="data-v-2400f56e";var nn=tn,on=Object(o["withScopeId"])("data-v-630e246b"),cn=on((function(e,t,n,c,i,r){return Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:["border-line",n.type,{wide:n.isWide}]},null,2)})),rn={name:"border-line",props:{type:{type:String,required:!0},isWide:{type:Boolean,default:!1}}};n("fb1d");rn.render=cn,rn.__scopeId="data-v-630e246b";var an=rn,ln=Object(o["defineComponent"])({name:"multi-select-operate",components:{ResizeHandler:nn,BorderLine:an},props:{elementList:{type:Array,required:!0},scaleMultiElement:{type:Function,required:!0}},setup:function(e){var t=Object(a["b"])(),n=Object(o["computed"])((function(){return t.state.activeElementIdList})),c=Object(o["computed"])((function(){return t.state.canvasScale})),i=Object(o["computed"])((function(){return e.elementList.filter((function(e){return n.value.includes(e.id)}))})),r=Object(o["reactive"])({minX:0,maxX:0,minY:0,maxY:0}),l=Object(o["computed"])((function(){return(r.maxX-r.minX)*c.value})),u=Object(o["computed"])((function(){return(r.maxY-r.minY)*c.value})),s=Qt(l,u),d=s.resizeHandlers,p=s.borderLines,f=Object(o["computed"])((function(){return i.value.some((function(e){return!!(e.type!==N.IMAGE&&e.type!==N.SHAPE||e.rotate)}))})),m=function(){var e=Ne(i.value),t=e.minX,n=e.maxX,o=e.minY,c=e.maxY;r.minX=t,r.maxX=n,r.minY=o,r.maxY=c};return Object(o["watchEffect"])(m),Object(S["a"])(Object(S["a"])({},Object(o["toRefs"])(r)),{},{canvasScale:c,borderLines:p,disableResize:f,resizeHandlers:d})}});n("d7a3");ln.render=Zt,ln.__scopeId="data-v-693e74ed";var un=ln,sn=Object(o["withScopeId"])("data-v-3a032a14");Object(o["pushScopeId"])("data-v-3a032a14");var dn={key:0,class:"animation-index"};Object(o["popScopeId"])();var pn=sn((function(e,t,n,c,i,r){return Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:"operate",style:{top:e.elementInfo.top*e.canvasScale+"px",left:e.elementInfo.left*e.canvasScale+"px",transform:"rotate(".concat(e.elementInfo.rotate,"deg)"),"transform-origin":"".concat(e.elementInfo.width*e.canvasScale/2,"px ").concat(e.elementInfo.height*e.canvasScale/2,"px")}},[(Object(o["openBlock"])(),Object(o["createBlock"])(Object(o["resolveDynamicComponent"])(e.currentOperateComponent),{elementInfo:e.elementInfo,isSelected:e.isSelected,isActive:e.isActive,isActiveGroupElement:e.isActiveGroupElement,isMultiSelect:e.isMultiSelect,animationIndex:e.elementIndexInAnimation,rotateElement:e.rotateElement,scaleElement:e.scaleElement},null,8,["elementInfo","isSelected","isActive","isActiveGroupElement","isMultiSelect","animationIndex","rotateElement","scaleElement"])),"animation"===e.toolbarState&&-1!==e.elementIndexInAnimation?(Object(o["openBlock"])(),Object(o["createBlock"])("div",dn,Object(o["toDisplayString"])(e.elementIndexInAnimation+1),1)):Object(o["createCommentVNode"])("",!0)],4)})),fn=Object(o["withScopeId"])("data-v-378f5cf2"),mn=fn((function(e,t,n,c,i,r){var a=Object(o["resolveComponent"])("ImageClipHandler"),l=Object(o["resolveComponent"])("BorderLine"),u=Object(o["resolveComponent"])("ResizeHandler"),s=Object(o["resolveComponent"])("RotateHandler");return e.isCliping?(Object(o["openBlock"])(),Object(o["createBlock"])(a,{key:0,src:e.elementInfo.src,clipData:e.elementInfo.clip,canvasScale:e.canvasScale,width:e.elementInfo.width,height:e.elementInfo.height,top:e.elementInfo.top,left:e.elementInfo.left,clipPath:e.clipShape.style,onClip:t[1]||(t[1]=function(t){return e.clip(t)})},null,8,["src","clipData","canvasScale","width","height","top","left","clipPath"])):(Object(o["openBlock"])(),Object(o["createBlock"])("div",{key:1,class:["image-element-operate",{selected:e.isSelected,"multi-select":e.isMultiSelect&&e.isSelected,active:e.isActive}]},[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.borderLines,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])(l,{class:"operate-border-line",key:e.type,type:e.type,style:e.style},null,8,["type","style"])})),128)),e.elementInfo.lock||!e.isActiveGroupElement&&e.isMultiSelect?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],{key:0},[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.resizeHandlers,(function(t){return Object(o["openBlock"])(),Object(o["createBlock"])(u,{class:"operate-resize-handler",key:t.direction,type:t.direction,style:t.style,onMousedown:Object(o["withModifiers"])((function(n){return e.scaleElement(n,e.elementInfo,t.direction)}),["stop"])},null,8,["type","style","onMousedown"])})),128)),Object(o["createVNode"])(s,{class:"operate-rotate-handler",style:{left:e.scaleWidth/2+"px"},onMousedown:t[2]||(t[2]=Object(o["withModifiers"])((function(t){return e.rotateElement(e.elementInfo)}),["stop"]))},null,8,["style"])],64))],2))})),hn=Object(o["withScopeId"])("data-v-63651762");Object(o["pushScopeId"])("data-v-63651762");var vn={class:"rotate-handler"};Object(o["popScopeId"])();var bn=hn((function(e,t,n,c,i,r){return Object(o["openBlock"])(),Object(o["createBlock"])("div",vn)})),On={name:"rotate-handler"};n("d569");On.render=bn,On.__scopeId="data-v-63651762";var gn=On,jn=Object(o["withScopeId"])("data-v-5cf013bf");Object(o["pushScopeId"])("data-v-5cf013bf");var Sn=Object(o["createVNode"])("path",{d:"M 12 0 L 0 0 L 0 12 L 3 12 L 3 3 L 12 3 L 12 0 Z"},null,-1);Object(o["popScopeId"])();var En=jn((function(e,t,n,c,i,r){var a=Object(o["resolveComponent"])("SvgWrapper"),l=Object(o["resolveDirective"])("click-outside");return Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:"image-clip-handler",style:e.clipWrapperPositionStyle},[Object(o["createVNode"])("img",{class:"bottom-img",src:e.src,draggable:!1,alt:"",style:e.bottomImgPositionStyle},null,12,["src"]),Object(o["createVNode"])("div",{class:"top-image-content",style:Object(S["a"])(Object(S["a"])({},e.topImgWrapperPositionStyle),{},{clipPath:e.clipPath})},[Object(o["createVNode"])("img",{class:"top-img",src:e.src,draggable:!1,alt:"",style:e.topImgPositionStyle},null,12,["src"])],4),Object(o["createVNode"])("div",{class:"operate",style:e.topImgWrapperPositionStyle,onMousedown:t[1]||(t[1]=Object(o["withModifiers"])((function(t){return e.moveClipRange(t)}),["stop"]))},[(Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(["t-l","t-r","b-l","b-r"],(function(t){return Object(o["createVNode"])("div",{class:["clip-point",t],key:t,onMousedown:Object(o["withModifiers"])((function(n){return e.scaleClipRange(n,t)}),["stop"])},[Object(o["createVNode"])(a,{width:"12",height:"12",fill:"#fff",stroke:"#666"},{default:jn((function(){return[Sn]})),_:1})],42,["onMousedown"])})),64))],36)],4)),[[l,e.clip]])})),yn=Object(o["defineComponent"])({name:"image-clip-handler",components:{SvgWrapper:ut},props:{src:{type:String,required:!0},clipData:{type:Object,required:!0},clipPath:{type:String,required:!0},canvasScale:{type:Number,required:!0},width:{type:Number,required:!0},height:{type:Number,required:!0},top:{type:Number,required:!0},left:{type:Number,required:!0}},setup:function(e,t){var n=t.emit,c=Object(o["reactive"])({top:0,left:0,width:0,height:0}),i=Object(o["reactive"])({top:"0",left:"0"}),r=Object(o["ref"])(!1),a=Object(o["ref"])(null),l=function(){var t=e.clipData?e.clipData.range:[[0,0],[100,100]],n=Object(tt["a"])(t,2),o=n[0],c=n[1],i=(c[0]-o[0])/100,r=(c[1]-o[1])/100,a=o[0]/i,l=o[1]/r;return{widthScale:i,heightScale:r,left:a,top:l}},u=Object(o["computed"])((function(){var e=l(),t=e.widthScale,n=e.heightScale,o=e.left,c=e.top;return{left:-o,top:-c,width:100/t,height:100/n}})),s=Object(o["computed"])((function(){return{top:u.value.top+"%",left:u.value.left+"%",width:u.value.width+"%",height:u.value.height+"%"}})),d=Object(o["computed"])((function(){return{top:c.top+"%",left:c.left+"%",width:c.width+"%",height:c.height+"%"}})),p=Object(o["computed"])((function(){var e=u.value.width,t=u.value.height,n=c.left,o=c.top,i=c.width,r=c.height;return{left:100/i*-n+"%",top:100/r*-o+"%",width:e/i*100+"%",height:t/r*100+"%"}})),f=function(){var e=l(),t=e.left,n=e.top;c.left=t,c.top=n,c.width=100,c.height=100,i.top=-n+"%",i.left=-t+"%"},m=function(){if(!r.value)if(a.value){var t=l(),o=t.left,i=t.top,u={left:(c.left-o)/100*e.width,top:(c.top-i)/100*e.height,width:(c.width-100)/100*e.width,height:(c.height-100)/100*e.height},s={range:a.value,position:u};n("clip",s)}else n("clip",null)},h=function(e){var t=e.key.toUpperCase();t===M.ENTER&&m()};Object(o["onMounted"])((function(){f(),document.addEventListener("keydown",h)})),Object(o["onUnmounted"])((function(){document.removeEventListener("keydown",h)}));var v=function(){var e={left:parseInt(p.value.left),top:parseInt(p.value.top),width:parseInt(p.value.width),height:parseInt(p.value.height)},t=100/e.width,n=100/e.height,o=[-e.left*t,-e.top*n],c=[100*t+o[0],100*n+o[1]];a.value=[o,c]},b=function(t){r.value=!0;var n=!0,o=t.pageX,i=t.pageY,a=u.value,l={left:c.left,top:c.top,width:c.width,height:c.height};document.onmousemove=function(t){if(n){var r=t.pageX,u=t.pageY,s=(r-o)/e.canvasScale/e.width*100,d=(u-i)/e.canvasScale/e.height*100,p=l.left+s,f=l.top+d;p<0?p=0:p+l.width>a.width&&(p=a.width-l.width),f<0?f=0:f+l.height>a.height&&(f=a.height-l.height),c.left=p,c.top=f}},document.onmouseup=function(){n=!1,document.onmousemove=null,document.onmouseup=null,v(),setTimeout((function(){r.value=!1}),0)}},O=function(t,n){r.value=!0;var o=!0,i=32/e.width*100,a=32/e.height*100,l=t.pageX,s=t.pageY,d=u.value,p={left:c.left,top:c.top,width:c.width,height:c.height};document.onmousemove=function(t){if(o){var r,u,f,m,h=t.pageX,v=t.pageY,b=(h-l)/e.canvasScale/e.width*100,O=(v-s)/e.canvasScale/e.height*100;"t-l"===n?(p.left+b<0&&(b=-p.left),p.top+O<0&&(O=-p.top),p.width-b<i&&(b=p.width-i),p.height-O<a&&(O=p.height-a),f=p.width-b,m=p.height-O,r=p.left+b,u=p.top+O):"t-r"===n?(p.left+p.width+b>d.width&&(b=d.width-(p.left+p.width)),p.top+O<0&&(O=-p.top),p.width+b<i&&(b=i-p.width),p.height-O<a&&(O=p.height-a),f=p.width+b,m=p.height-O,r=p.left,u=p.top+O):"b-l"===n?(p.left+b<0&&(b=-p.left),p.top+p.height+O>d.height&&(O=d.height-(p.top+p.height)),p.width-b<i&&(b=p.width-i),p.height+O<a&&(O=a-p.height),f=p.width-b,m=p.height+O,r=p.left+b,u=p.top):(p.left+p.width+b>d.width&&(b=d.width-(p.left+p.width)),p.top+p.height+O>d.height&&(O=d.height-(p.top+p.height)),p.width+b<i&&(b=i-p.width),p.height+O<a&&(O=a-p.height),f=p.width+b,m=p.height+O,r=p.left,u=p.top),c.left=r,c.top=u,c.width=f,c.height=m}},document.onmouseup=function(){o=!1,document.onmousemove=null,document.onmouseup=null,v(),setTimeout((function(){return r.value=!1}),0)}};return{clipWrapperPositionStyle:i,bottomImgPositionStyle:s,topImgWrapperPositionStyle:d,topImgPositionStyle:p,clip:m,moveClipRange:b,scaleClipRange:O}}});n("dda4");yn.render=En,yn.__scopeId="data-v-5cf013bf";var In=yn,Tn=Object(o["defineComponent"])({name:"image-element-operate",components:{RotateHandler:gn,ResizeHandler:nn,BorderLine:an,ImageClipHandler:In},props:{elementInfo:{type:Object,required:!0},isSelected:{type:Boolean,required:!0},isActive:{type:Boolean,required:!0},isActiveGroupElement:{type:Boolean,required:!0},isMultiSelect:{type:Boolean,required:!0},rotateElement:{type:Function,required:!0},scaleElement:{type:Function,required:!0}},setup:function(e){var t=Object(a["b"])(),n=Object(o["computed"])((function(){return t.state.canvasScale})),c=Object(o["computed"])((function(){return e.elementInfo.width*n.value})),i=Object(o["computed"])((function(){return e.elementInfo.height*n.value})),r=Qt(c,i),l=r.resizeHandlers,u=r.borderLines,s=Object(o["ref"])(""),d=Object(o["computed"])((function(){return s.value===e.elementInfo.id})),p=function(t){if(s.value="",t){var n=t.range,o=t.position,c=e.elementInfo.clip||{},i={clip:Object(S["a"])(Object(S["a"])({},c),{},{range:n}),left:e.elementInfo.left+o.left,top:e.elementInfo.top+o.top,width:e.elementInfo.width+o.width,height:e.elementInfo.height+o.height};console.log(i)}};return{scaleWidth:c,resizeHandlers:l,borderLines:u,isCliping:d,clip:p}}});n("0f90");Tn.render=mn,Tn.__scopeId="data-v-378f5cf2";var xn=Tn,wn=Object(o["withScopeId"])("data-v-a0695f48"),_n=wn((function(e,t,n,c,i,r){var a=Object(o["resolveComponent"])("BorderLine"),l=Object(o["resolveComponent"])("ResizeHandler"),u=Object(o["resolveComponent"])("RotateHandler");return Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:["text-element-operate",{selected:e.isSelected,"multi-select":e.isMultiSelect&&e.isSelected,active:e.isActive}]},[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.borderLines,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])(a,{class:"operate-border-line",key:e.type,type:e.type,style:e.style},null,8,["type","style"])})),128)),e.elementInfo.lock||!e.isActiveGroupElement&&e.isMultiSelect?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],{key:0},[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.textElementResizeHandlers,(function(t){return Object(o["openBlock"])(),Object(o["createBlock"])(l,{class:"operate-resize-handler",key:t.direction,type:t.direction,style:t.style,onMousedown:Object(o["withModifiers"])((function(n){return e.scaleElement(n,e.elementInfo,t.direction)}),["stop"])},null,8,["type","style","onMousedown"])})),128)),Object(o["createVNode"])(u,{class:"operate-rotate-handler",style:{left:e.scaleWidth/2+"px"},onMousedown:t[1]||(t[1]=Object(o["withModifiers"])((function(t){return e.rotateElement(e.elementInfo)}),["stop"]))},null,8,["style"])],64))],2)})),kn=Object(o["defineComponent"])({name:"text-element-operate",components:{RotateHandler:gn,ResizeHandler:nn,BorderLine:an},props:{elementInfo:{type:Object,required:!0},isSelected:{type:Boolean,required:!0},isActive:{type:Boolean,required:!0},isActiveGroupElement:{type:Boolean,required:!0},isMultiSelect:{type:Boolean,required:!0},rotateElement:{type:Function,required:!0},scaleElement:{type:Function,required:!0}},setup:function(e){var t=Object(a["b"])(),n=Object(o["computed"])((function(){return t.state.canvasScale})),c=Object(o["computed"])((function(){return e.elementInfo.width*n.value})),i=Object(o["computed"])((function(){return e.elementInfo.height*n.value})),r=Qt(c,i),l=r.textElementResizeHandlers,u=r.borderLines;return{scaleWidth:c,textElementResizeHandlers:l,borderLines:u}}});n("2769");kn.render=_n,kn.__scopeId="data-v-a0695f48";var Ln=kn,Cn=Object(o["defineComponent"])({name:"operate",props:{elementInfo:{type:Object,required:!0},isSelected:{type:Boolean,required:!0},isActive:{type:Boolean,required:!0},isActiveGroupElement:{type:Boolean,required:!0},isMultiSelect:{type:Boolean,required:!0},rotateElement:{type:Function,required:!0},scaleElement:{type:Function,required:!0}},setup:function(e){var t=Object(a["b"])(),n=Object(o["computed"])((function(){return t.state.canvasScale})),c=Object(o["computed"])((function(){return t.state.toolbarState})),i=Object(o["computed"])((function(){return t.getters.currentSlide})),r=Object(o["computed"])((function(){var t={image:xn,text:Ln};return t[e.elementInfo.type]||null})),l=Object(o["computed"])((function(){var t=i.value.animations||[];return t.findIndex((function(t){return t.elId===e.elementInfo.id}))}));return{currentOperateComponent:r,canvasScale:n,toolbarState:c,elementIndexInAnimation:l}}});n("f079");Cn.render=pn,Cn.__scopeId="data-v-3a032a14";var Mn=Cn,An=Object(o["defineComponent"])({name:"editor-canvas",components:{EditableElement:Mt,MouseSelection:Dt,SlideBackground:Yt,AlignmentLine:Jt,MultiSelectOperate:un,Operate:Mn},setup:function(){var e=Object(a["b"])(),t=Object(o["computed"])((function(){return e.state.activeElementIdList})),n=Object(o["computed"])((function(){return e.state.handleElementId})),c=Object(o["computed"])((function(){return e.state.editorAreaFocus})),r=Object(o["computed"])((function(){return e.state.ctrlKeyState})),l=Object(o["computed"])((function(){return e.getters.ctrlOrShiftKeyActive})),u=Object(o["ref"])(null),s=Object(o["ref"])(!1),d=Object(o["ref"])([]),p=Object(o["ref"])("");Object(o["watch"])(n,(function(){return p.value=""}));var f=Object(o["computed"])((function(){return e.getters.currentSlide})),m=Object(o["ref"])([]),h=function(){m.value=f.value?JSON.parse(JSON.stringify(f.value.elements)):[]};Object(o["watchEffect"])(h),Pe(u);var v=Object(o["ref"])(null),b=Object(o["computed"])((function(){return e.state.canvasScale})),O=we(v),g=O.viewportStyles,j=De(m,u),S=j.mouseSelectionState,E=j.updateMouseSelection,y=Xe(m,p,d),I=y.dragElement,T=Ye(m,p,I),x=T.selectElement,w=qe(m,p,d),_=w.scaleElement,k=w.scaleMultiElement,L=He(m,u),C=L.rotateElement,M=ue(),A=M.selectAllElement,N=re(),B=N.deleteAllElements,D=le(),P=D.pasteElement,R=function(t){e.commit(i.SET_ACTIVE_ELEMENT_ID_LIST,[]),l.value||E(t),c.value||e.commit(i.SET_EDITORAREA_FOCUS,!0)},H=function(){c.value&&e.commit(i.SET_EDITORAREA_FOCUS,!1)},F=Ue(),V=F.scaleCanvas,q=te()(V,100,{leading:!0,trailing:!1}),G=function(e){r.value&&(e.preventDefault(),e.deltaY>0?q("-"):e.deltaY<0&&q("+"))},z=function(){return[{text:"全选",subText:"Ctrl + A",handler:A},{text:"粘贴",subText:"Ctrl + V",handler:P},{text:"清空本页",handler:B}]};return{elementList:m,activeElementIdList:t,handleElementId:n,activeGroupElementId:p,canvasRef:v,viewportRef:u,viewportStyles:g,canvasScale:b,mouseSelectionState:S,handleClickBlankArea:R,removeEditorAreaFocus:H,currentSlide:f,isShowGridLines:s,alignmentLines:d,selectElement:x,rotateElement:C,scaleElement:_,scaleMultiElement:k,mousewheelScaleCanvas:G,contextmenus:z}}});n("21ca");An.render=xe,An.__scopeId="data-v-84a5165a";var Nn=An,Bn=Object(o["withScopeId"])("data-v-2674f9a5");Object(o["pushScopeId"])("data-v-2674f9a5");var Dn={class:"canvas-tool"},Pn={class:"left-handler"},Rn={class:"add-element-handler"},Hn={class:"right-handler"},Fn={class:"text"};Object(o["popScopeId"])();var Vn=Bn((function(e,t,n,c,i,r){var a=Object(o["resolveComponent"])("IconFont");return Object(o["openBlock"])(),Object(o["createBlock"])("div",Dn,[Object(o["createVNode"])("div",Pn,[Object(o["createVNode"])(a,{class:["handler-item",{disable:!e.canUndo}],type:"icon-undo",onClick:t[1]||(t[1]=function(t){return e.undo()})},null,8,["class"]),Object(o["createVNode"])(a,{class:["handler-item",{disable:!e.canRedo}],type:"icon-redo",onClick:t[2]||(t[2]=function(t){return e.redo()})},null,8,["class"])]),Object(o["createVNode"])("div",Rn,[Object(o["createVNode"])(a,{class:"handler-item",type:"icon-font-size"}),Object(o["createVNode"])(a,{class:"handler-item",type:"icon-image"})]),Object(o["createVNode"])("div",Hn,[Object(o["createVNode"])(a,{class:"handler-item viewport-size",type:"icon-minus",onClick:t[3]||(t[3]=function(t){return e.scaleCanvas("-")})}),Object(o["createVNode"])("span",Fn,Object(o["toDisplayString"])(e.canvasScalePercentage),1),Object(o["createVNode"])(a,{class:"handler-item viewport-size",type:"icon-plus",onClick:t[4]||(t[4]=function(t){return e.scaleCanvas("+")})}),Object(o["createVNode"])(a,{class:"handler-item viewport-size",type:"icon-number",onClick:t[5]||(t[5]=function(t){return e.toggleGridLines()})})])])})),qn=Object(o["defineComponent"])({name:"canvas-tool",setup:function(){var e=Object(a["b"])(),t=Object(o["computed"])((function(){return e.state.canvasScale})),n=Object(o["computed"])((function(){return e.state.showGridLines})),c=Object(o["computed"])((function(){return e.getters.canUndo})),r=Object(o["computed"])((function(){return e.getters.canRedo})),l=Object(o["computed"])((function(){return parseInt(100*t.value+"")+"%"})),u=Ue(),s=u.scaleCanvas,d=ne(),p=d.redo,f=d.undo,m=function(){e.commit(i.SET_GRID_LINES_STATE,!n.value)};return{scaleCanvas:s,canvasScalePercentage:l,toggleGridLines:m,canUndo:c,canRedo:r,redo:p,undo:f}}});n("4395");qn.render=Vn,qn.__scopeId="data-v-2674f9a5";var Gn=qn,zn=Object(o["withScopeId"])("data-v-df9ef2ec");Object(o["pushScopeId"])("data-v-df9ef2ec");var Yn={class:"add-slide"},Xn={class:"slide-index"},Un={class:"thumbnail"};Object(o["popScopeId"])();var Wn=zn((function(e,t,n,c,i,r){var a=Object(o["resolveComponent"])("ThumbnailSlide"),l=Object(o["resolveComponent"])("draggable"),u=Object(o["resolveDirective"])("contextmenu"),s=Object(o["resolveDirective"])("click-outside");return Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:"thumbnails",onMousedown:t[2]||(t[2]=function(){return e.setThumbnailsFocus(!0)})},[Object(o["createVNode"])("div",Yn,[Object(o["createVNode"])("span",{onClick:t[1]||(t[1]=function(t){return e.createSlide()})},"+ 添加幻灯片")]),Object(o["createVNode"])(l,{class:"thumbnail-list",modelValue:e.slides,animation:300,scroll:!0,scrollSensitivity:50,onEnd:e.handleDragEnd,itemKey:"id"},{item:zn((function(t){var n=t.element,c=t.index;return[Object(o["withDirectives"])(Object(o["createVNode"])("div",{class:["thumbnail-wrapper",{active:e.slideIndex===c}],onMousedown:function(t){return e.changSlideIndex(c)}},[Object(o["createVNode"])("div",Xn,Object(o["toDisplayString"])(e.fillDigit(c+1,2)),1),Object(o["createVNode"])("div",Un,[Object(o["createVNode"])(a,{slide:n,size:120},null,8,["slide"])])],42,["onMousedown"]),[[u,e.contextmenus]])]})),_:1},8,["modelValue","onEnd"])],544)),[[s,function(){return e.setThumbnailsFocus(!1)}]])})),Jn=n("b76a"),Kn=n.n(Jn),Zn=Object(o["withScopeId"])("data-v-1abbc471"),Qn=Zn((function(e,t,n,c,i,r){var a=Object(o["resolveComponent"])("ThumbnailElement");return Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:"thumbnail-slide",style:{width:e.size+"px",height:e.size*e.VIEWPORT_ASPECT_RATIO+"px"}},[Object(o["createVNode"])("div",{class:"elements-wrapper",style:{width:e.VIEWPORT_SIZE+"px",height:e.VIEWPORT_SIZE*e.VIEWPORT_ASPECT_RATIO+"px",transform:"scale(".concat(e.size/e.VIEWPORT_SIZE,")")}},[Object(o["createVNode"])("div",{class:"background",style:Object(S["a"])({},e.backgroundStyle)},null,4),(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.slide.elements,(function(e,t){return Object(o["openBlock"])(),Object(o["createBlock"])(a,{key:e.id,elementInfo:e,elementIndex:t+1},null,8,["elementInfo","elementIndex"])})),128))],4)],4)}));function $n(e,t,n,c,i,r){return Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:"base-element",style:{zIndex:e.elementIndex}},[(Object(o["openBlock"])(),Object(o["createBlock"])(Object(o["resolveDynamicComponent"])(e.currentElementComponent),{elementInfo:e.elementInfo},null,8,["elementInfo"]))],4)}var eo=Object(o["withScopeId"])("data-v-008489be"),to=eo((function(e,t,n,c,i,r){var a=Object(o["resolveComponent"])("ImageRectOutline"),l=Object(o["resolveComponent"])("ImageEllipseOutline"),u=Object(o["resolveComponent"])("ImagePolygonOutline");return Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:"base-element-image",style:{top:e.elementInfo.top+"px",left:e.elementInfo.left+"px",width:e.elementInfo.width+"px",height:e.elementInfo.height+"px",transform:"rotate(".concat(e.elementInfo.rotate,"deg)")}},[Object(o["createVNode"])("div",{class:"element-content",style:{filter:e.shadowStyle?"drop-shadow(".concat(e.shadowStyle,")"):"",transform:e.flip}},["rect"===e.clipShape.type?(Object(o["openBlock"])(),Object(o["createBlock"])(a,{key:0,width:e.elementInfo.width,height:e.elementInfo.height,radius:e.clipShape.radius,outline:e.elementInfo.outline},null,8,["width","height","radius","outline"])):"ellipse"===e.clipShape.type?(Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:1,width:e.elementInfo.width,height:e.elementInfo.height,outline:e.elementInfo.outline},null,8,["width","height","outline"])):"polygon"===e.clipShape.type?(Object(o["openBlock"])(),Object(o["createBlock"])(u,{key:2,width:e.elementInfo.width,height:e.elementInfo.height,createPath:e.clipShape.createPath,outline:e.elementInfo.outline},null,8,["width","height","createPath","outline"])):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])("div",{class:"image-content",style:{clipPath:e.clipShape.style}},[Object(o["createVNode"])("img",{src:e.elementInfo.src,draggable:!1,style:{top:e.imgPosition.top,left:e.imgPosition.left,width:e.imgPosition.width,height:e.imgPosition.height,filter:e.filter},alt:""},null,12,["src"])],4)],4)],4)})),no=Object(o["defineComponent"])({name:"base-element-image",components:{ImageRectOutline:pt,ImageEllipseOutline:vt,ImagePolygonOutline:jt},props:{elementInfo:{type:Object,required:!0}},setup:function(e){var t=Object(o["computed"])((function(){if(!e.elementInfo||!e.elementInfo.clip)return{top:"0",left:"0",width:"100%",height:"100%"};var t=Object(tt["a"])(e.elementInfo.clip.range,2),n=t[0],o=t[1],c=(o[0]-n[0])/100,i=(o[1]-n[1])/100,r=n[0]/c,a=n[1]/i;return{left:-r+"%",top:-a+"%",width:100/c+"%",height:100/i+"%"}})),n=Object(o["computed"])((function(){if(!e.elementInfo||!e.elementInfo.clip)return nt.rect;var t=e.elementInfo.clip.shape||Je.RECT;return nt[t]})),c=Object(o["computed"])((function(){if(!e.elementInfo.filters)return"";for(var t="",n=0,o=Object.keys(e.elementInfo.filters);n<o.length;n++){var c=o[n];t+="".concat(c,"(").concat(e.elementInfo.filters[c],") ")}return t})),i=Object(o["computed"])((function(){if(!e.elementInfo.flip)return"";var t=e.elementInfo.flip,n=t.x,o=t.y;return n&&o?"rotateX(".concat(n,"deg) rotateY(").concat(o,"deg)"):n?"rotateX(".concat(n,"deg)"):o?"rotateY(".concat(o,"deg)"):""})),r=Object(o["computed"])((function(){return e.elementInfo.shadow})),a=ot(r),l=a.shadowStyle;return{imgPosition:t,clipShape:n,filter:c,flip:i,shadowStyle:l}}});n("5ec9");no.render=to,no.__scopeId="data-v-008489be";var oo=no,co=Object(o["withScopeId"])("data-v-4940a104"),io=co((function(e,t,n,c,i,r){var a=Object(o["resolveComponent"])("ElementOutline");return Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:"base-element-text",style:{top:e.elementInfo.top+"px",left:e.elementInfo.left+"px",width:e.elementInfo.width+"px",transform:"rotate(".concat(e.elementInfo.rotate,"deg)")}},[Object(o["createVNode"])("div",{class:"element-content",style:{backgroundColor:e.elementInfo.fill,opacity:e.elementInfo.opacity,textShadow:e.shadowStyle}},[Object(o["createVNode"])(a,{width:e.elementInfo.width,height:e.elementInfo.height,outline:e.elementInfo.outline},null,8,["width","height","outline"]),Object(o["createVNode"])("div",{class:"text",innerHTML:e.elementInfo.content},null,8,["innerHTML"])],4)],4)})),ro=Object(o["defineComponent"])({name:"base-element-text",components:{ElementOutline:_t},props:{elementInfo:{type:Object,required:!0}},setup:function(e){var t=Object(o["computed"])((function(){return e.elementInfo.shadow})),n=ot(t),c=n.shadowStyle;return{shadowStyle:c}}});n("4e63");ro.render=io,ro.__scopeId="data-v-4940a104";var ao=ro,lo=Object(o["defineComponent"])({name:"base-element",props:{elementInfo:{type:Object,required:!0},elementIndex:{type:Number,required:!0}},setup:function(e){var t=Object(o["computed"])((function(){var t={image:oo,text:ao};return t[e.elementInfo.type]||null}));return{currentElementComponent:t}}});lo.render=$n;var uo=lo,so=Object(o["defineComponent"])({name:"thumbnail-slide",components:{ThumbnailElement:uo},props:{slide:{type:Object,required:!0},size:{type:Number,required:!0}},setup:function(e){var t=Object(o["computed"])((function(){return e.slide.background})),n=Gt(t),c=n.backgroundStyle;return{backgroundStyle:c,VIEWPORT_SIZE:me,VIEWPORT_ASPECT_RATIO:he}}});n("48e7");so.render=Qn,so.__scopeId="data-v-1abbc471";var po=so,fo=Object(o["defineComponent"])({name:"thumbnails",components:{draggable:Kn.a,ThumbnailSlide:po},setup:function(){var e=Object(a["b"])(),t=Object(o["computed"])((function(){return e.state.slides})),n=Object(o["computed"])((function(){return e.state.slideIndex})),c=ce(),r=c.copySlide,l=c.pasteSlide,u=c.createSlide,s=c.copyAndPasteSlide,d=c.deleteSlide,p=c.cutSlide,f=function(t){e.commit(i.SET_ACTIVE_ELEMENT_ID_LIST,[]),n.value!==t&&e.commit(i.UPDATE_SLIDE_INDEX,t)},m=Object(o["computed"])((function(){return e.state.thumbnailsFocus})),h=function(t){m.value!==t&&e.commit(i.SET_THUMBNAILS_FOCUS,t)},v=function(n){var o=n.newIndex,c=n.oldIndex;if(c!==o){var r=JSON.parse(JSON.stringify(t.value)),a=r[c];r.splice(c,1),r.splice(o,0,a),e.commit(i.SET_SLIDES,r),e.commit(i.UPDATE_SLIDE_INDEX,o)}},b=function(){return[{text:"剪切",subText:"Ctrl + X",handler:p},{text:"复制",subText:"Ctrl + C",handler:r},{text:"粘贴",subText:"Ctrl + V",handler:l},{divider:!0},{text:"新建页面",subText:"Enter",handler:u},{text:"复制页面",handler:s},{text:"删除页面",subText:"Delete",handler:d}]};return{setThumbnailsFocus:h,slides:t,slideIndex:n,createSlide:u,changSlideIndex:f,contextmenus:b,fillDigit:F,handleDragEnd:v}}});n("6387");fo.render=Wn,fo.__scopeId="data-v-df9ef2ec";var mo=fo,ho=Object(o["defineComponent"])({name:"editor",components:{Canvas:Nn,CanvasTool:Gn,Thumbnails:mo},setup:function(){de(),Ie()}});n("8a22");ho.render=A,ho.__scopeId="data-v-7eed2f38";var vo=ho,bo=Object(o["defineComponent"])({name:"app",components:{Editor:vo},setup:function(){var e=Object(a["b"])(),t=Object(o["computed"])((function(){return e.state.screening}));return Object(o["onMounted"])((function(){e.commit(i.SET_AVAILABLE_FONTS),e.dispatch(r.INIT_SNAPSHOT_DATABASE)})),{screening:t}}});n("f969");bo.render=c;var Oo=bo,go=(n("c860"),n("77ed"),{class:"icon-font","aria-hidden":"true"});function jo(e,t,n,c,i,r){return Object(o["openBlock"])(),Object(o["createBlock"])("svg",go,[Object(o["createVNode"])("use",{"xlink:href":"#".concat(n.type)},null,8,["xlink:href"])])}var So={name:"icon-font",props:{type:{type:String,required:!0}}};n("86a4");So.render=jo;var Eo=So;function yo(e,t,n,c,i,r){var a=Object(o["resolveComponent"])("ContextmenuContent");return Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],null,[Object(o["createVNode"])("div",{class:"mask",onContextmenu:t[1]||(t[1]=Object(o["withModifiers"])((function(t){return e.removeContextMenu()}),["prevent"])),onMousedown:t[2]||(t[2]=function(t){return e.removeContextMenu()})},null,32),Object(o["createVNode"])("div",{class:"contextmenu",style:{left:e.style.left,top:e.style.top},onContextmenu:t[3]||(t[3]=Object(o["withModifiers"])((function(){}),["prevent"]))},[Object(o["createVNode"])(a,{menus:e.menus,subMenuPosition:e.style.subMenuPosition,handleClickMenuItem:e.handleClickMenuItem},null,8,["menus","subMenuPosition","handleClickMenuItem"])],36)],64)}var Io=Object(o["withScopeId"])("data-v-89581ea8");Object(o["pushScopeId"])("data-v-89581ea8");var To={class:"contextmenu-content"},xo={class:"text"},wo={key:0,class:"sub-text"};Object(o["popScopeId"])();var _o=Io((function(e,t,n,c,i,r){var a=Object(o["resolveComponent"])("_self");return Object(o["openBlock"])(),Object(o["createBlock"])("ul",To,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(n.menus,(function(e,t){return Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],null,[e.hide?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])("li",{class:["contextmenu-item",{divider:e.divider,disable:e.disable}],key:e.text||t,onClick:Object(o["withModifiers"])((function(t){return n.handleClickMenuItem(e)}),["stop"])},[e.divider?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])("div",{key:0,class:["contextmenu-item-content",{"has-sub-menu":e.children}]},[Object(o["createVNode"])("span",xo,Object(o["toDisplayString"])(e.text),1),e.subText&&!e.children?(Object(o["openBlock"])(),Object(o["createBlock"])("span",wo,Object(o["toDisplayString"])(e.subText),1)):Object(o["createCommentVNode"])("",!0),e.children&&e.children.length?(Object(o["openBlock"])(),Object(o["createBlock"])(a,{key:1,class:"sub-menu",style:Object(u["a"])({},n.subMenuPosition,"112.5%"),menus:e.children,handleClickMenuItem:n.handleClickMenuItem},null,8,["style","menus","handleClickMenuItem"])):Object(o["createCommentVNode"])("",!0)],2))],10,["onClick"]))],64)})),256))])})),ko={name:"contextmenu-content",props:{menus:{type:Array,required:!0},subMenuPosition:{type:String,default:"left"},handleClickMenuItem:{type:Function,required:!0}}};n("430e");ko.render=_o,ko.__scopeId="data-v-89581ea8";var Lo=ko,Co=160,Mo=32,Ao=11,No=120,Bo=Object(o["defineComponent"])({name:"contextmenu",components:{ContextmenuContent:Lo},props:{axis:{type:Object,required:!0},el:{type:Object,required:!0},menus:{type:Array,required:!0},removeContextMenu:{type:Function,required:!0}},setup:function(e){var t=Object(o["computed"])((function(){var t=e.axis,n=t.x,o=t.y,c=e.menus.filter((function(e){return!e.divider&&!e.hide})).length,i=e.menus.filter((function(e){return e.divider})).length,r=10,a=Co,l=c*Mo+i*Ao+r,u=Co+No-10,s=document.body.clientWidth,d=document.body.clientHeight,p=s<=n+a?n-a:n,f=d<=o+l?o-l:o,m=s<=p+u?"right":"left";return{left:p+"px",top:f+"px",subMenuPosition:m}})),n=function(t){t.disable||t.children||(t.handler&&t.handler(e.el),e.removeContextMenu())};return{style:t,handleClickMenuItem:n}}});n("9ef8");Bo.render=yo;var Do=Bo,Po="CTX_CONTEXTMENU_HANDLER",Ro=function(e,t,n){t.stopPropagation(),t.preventDefault();var c=n.value(e);if(c){var i=null,r=function t(){i&&(document.body.removeChild(i),i=null),e.classList.remove("contextmenu-active"),document.body.removeEventListener("scroll",t),window.removeEventListener("resize",t)},a={axis:{x:t.x,y:t.y},el:e,menus:c,removeContextMenu:r};i=document.createElement("div");var l=Object(o["createVNode"])(Do,a,null);Object(o["render"])(l,i),document.body.appendChild(i),e.classList.add("contextmenu-active"),document.body.addEventListener("scroll",r),window.addEventListener("resize",r)}},Ho={mounted:function(e,t){e[Po]=function(n){return Ro(e,n,t)},e.addEventListener("contextmenu",e[Po])},unmounted:function(e){e&&e[Po]&&(e.removeEventListener("contextmenu",e[Po]),delete e[Po])}},Fo={install:function(e){e.directive("contextmenu",Ho)}},Vo="CTX_CLICK_OUTSIDE_HANDLER",qo=function(e,t,n){var o=n.value,c=t.composedPath(),i=c?c.indexOf(e)<0:!e.contains(t.target);i&&o(t)},Go={mounted:function(e,t){e[Vo]=function(n){return qo(e,n,t)},document.addEventListener("click",e[Vo])},unmounted:function(e){e[Vo]&&(document.removeEventListener("click",e[Vo]),delete e[Vo])}},zo={install:function(e){e.directive("click-outside",Go)},directive:Go},Yo=Object(o["createApp"])(Oo);Yo.component("IconFont",Eo),Yo.use(Fo),Yo.use(zo),Yo.use(w),Yo.mount("#app")},d569:function(e,t,n){"use strict";n("323f")},d7a3:function(e,t,n){"use strict";n("7f12")},dda4:function(e,t,n){"use strict";n("eb84")},e682:function(e,t,n){"use strict";n("8c93")},eb08:function(e,t,n){},eb84:function(e,t,n){},ecf8:function(e,t,n){},ed6b:function(e,t,n){},f079:function(e,t,n){"use strict";n("34cf")},f26f:function(e,t,n){"use strict";n("c4fe")},f969:function(e,t,n){"use strict";n("ed6b")},fb1d:function(e,t,n){"use strict";n("86fb")},febb:function(e,t,n){},ff8d:function(e,t,n){}});
//# sourceMappingURL=app.b002f9ac.js.map