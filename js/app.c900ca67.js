(function(e){function t(t){for(var o,i,r=t[0],l=t[1],u=t[2],d=0,p=[];d<r.length;d++)i=r[d],Object.prototype.hasOwnProperty.call(c,i)&&c[i]&&p.push(c[i][0]),c[i]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);s&&s(t);while(p.length)p.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],o=!0,r=1;r<n.length;r++){var l=n[r];0!==c[l]&&(o=!1)}o&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var o={},c={app:0},a=[];function i(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=o,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/PPTst/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=t,r=r.slice();for(var u=0;u<r.length;u++)t(r[u]);var s=l;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"0a56":function(e,t,n){"use strict";n("ecf8")},"0bac":function(e,t,n){},"0f5f":function(e,t,n){},"0f90":function(e,t,n){"use strict";n("eb08")},1:function(e,t){},10:function(e,t){},11:function(e,t){},12:function(e,t){},13:function(e,t){},14:function(e,t){},"17e9":function(e,t,n){},"1c33":function(e,t,n){},2:function(e,t){},"241e":function(e,t,n){},2769:function(e,t,n){"use strict";n("851d")},3:function(e,t){},"323f":function(e,t,n){},"34cf":function(e,t,n){},4:function(e,t){},"48e7":function(e,t,n){"use strict";n("ff8d")},"494d":function(e,t,n){"use strict";n("0f5f")},"4a14":function(e,t,n){"use strict";n("7688")},"4b70":function(e,t,n){"use strict";n("5a20")},"4e63":function(e,t,n){"use strict";n("62e2")},5:function(e,t){},5448:function(e,t,n){},"579f":function(e,t,n){"use strict";n("7eb3")},"5a20":function(e,t,n){},"5ec9":function(e,t,n){"use strict";n("9dbe")},6:function(e,t){},"62e2":function(e,t,n){},"6a38":function(e,t,n){},7:function(e,t){},7688:function(e,t,n){},"78b9":function(e,t,n){"use strict";n("17e9")},"7db6":function(e,t,n){},"7eb3":function(e,t,n){},"7f12":function(e,t,n){},8:function(e,t){},"851d":function(e,t,n){},"86a4":function(e,t,n){"use strict";n("5448")},"8a22":function(e,t,n){"use strict";n("241e")},"8c93":function(e,t,n){},9:function(e,t){},9051:function(e,t,n){"use strict";n("0bac")},"9dbe":function(e,t,n){},"9ea0":function(e,t,n){},a12d:function(e,t,n){},aa47:function(e,t,n){"use strict";n("9ea0")},b8d1:function(e,t,n){"use strict";n("6a38")},bbf5:function(e,t,n){},c4fe:function(e,t,n){},c860:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("7a23");function c(e,t,n,c,a,i){var r=Object(o["resolveComponent"])("Editor"),l=Object(o["resolveComponent"])("Screen");return e.screening?(Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:1})):(Object(o["openBlock"])(),Object(o["createBlock"])(r,{key:0}))}var a,i,r=n("5502"),l=(n("4de4"),n("7db0"),n("caad"),n("d81d"),n("2532"),{currentSlide:function(e){return e.slides[e.slideIndex]||null},currentSlideAnimations:function(e){var t=e.slides[e.slideIndex];if(!t)return null;var n=t.animations;if(!n)return null;var o=t.elements,c=o.map((function(e){return e.id}));return n.filter((function(e){return c.includes(e.elId)}))},activeElementList:function(e){var t=e.slides[e.slideIndex];return t&&t.elements?t.elements.filter((function(t){return e.activeElementIdList.includes(t.id)})):[]},handleElement:function(e){var t=e.slides[e.slideIndex];return t&&t.elements&&t.elements.find((function(t){return e.handleElementId===t.id}))||null},canUndo:function(e){return e.snapshotCursor>0},canRedo:function(e){return e.snapshotCursor<e.snapshotLength-1},ctrlOrShiftKeyActive:function(e){return e.ctrlKeyState||e.shiftKeyState}}),u=(n("fb6a"),n("d3b7"),n("ddb0"),n("ade3")),s=(n("96cf"),n("1da1"));(function(e){e["SET_ACTIVE_ELEMENT_ID_LIST"]="setActiveElementIdList",e["SET_HANDLE_ELEMENT_ID"]="setHandleElementId",e["SET_CANVAS_PERCENTAGE"]="setCanvasPercentage",e["SET_CANVAS_SCALE"]="setCanvasScale",e["SET_THUMBNAILS_FOCUS"]="setThumbnailsFocus",e["SET_EDITORAREA_FOCUS"]="setEditorAreaFocus",e["SET_DISABLE_HOTKEYS_STATE"]="setDisableHotkeysState",e["SET_GRID_LINES_STATE"]="setGridLinesState",e["SET_AVAILABLE_FONTS"]="setAvailableFonts",e["SET_TOOLBAR_STATE"]="setToolbarState",e["SET_SLIDES"]="setSlides",e["ADD_SLIDE"]="addSlide",e["UPDATE_SLIDE"]="updateSlide",e["DELETE_SLIDE"]="deleteSlide",e["UPDATE_SLIDE_INDEX"]="updateSlideIndex",e["ADD_ELEMENT"]="addElement",e["UPDATE_ELEMENT"]="updateElement",e["SET_SNAPSHOT_CURSOR"]="setSnapshotCursor",e["SET_SNAPSHOT_LENGTH"]="setSnapshotLength",e["SET_CTRL_KEY_STATE"]="setCtrlKeyState",e["SET_SHIFT_KEY_STATE"]="setShiftKeyState",e["SET_SCREENING"]="setScreening"})(a||(a={})),function(e){e["INIT_SNAPSHOT_DATABASE"]="initSnapshotDatabase",e["ADD_SNAPSHOT"]="addSnapshot",e["UN_DO"]="undo",e["RE_DO"]="redo"}(i||(i={}));var d,p,f=n("d4ec"),m=n("262e"),h=n("2caf"),v=n("4dec"),b=function(e){Object(m["a"])(n,e);var t=Object(h["a"])(n);function n(){var e;return Object(f["a"])(this,n),e=t.call(this,"SnapshotDatabase"),e.version(1).stores({snapshots:"++id"}),e.snapshots=e.table("snapshots"),e}return n}(v["a"]),O=new b,g=(d={},Object(u["a"])(d,i.INIT_SNAPSHOT_DATABASE,(function(e){return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,o,c,i,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,o=e.state,t.next=3,O.snapshots.orderBy("id").toArray();case 3:return c=t.sent,i=c.slice(-1)[0],i&&O.snapshots.clear(),r={index:o.slideIndex,slides:o.slides},t.next=9,O.snapshots.add(r);case 9:n(a.SET_SNAPSHOT_CURSOR,0),n(a.SET_SNAPSHOT_LENGTH,1);case 11:case"end":return t.stop()}}),t)})))()})),Object(u["a"])(d,i.ADD_SNAPSHOT,(function(e){return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,o,c,i,r,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.state,o=e.commit,t.next=3,O.snapshots.orderBy("id").keys();case 3:return c=t.sent,i=[],n.snapshotCursor>=0&&n.snapshotCursor<c.length-1&&(i=c.slice(n.snapshotCursor+1)),r={index:n.slideIndex,slides:n.slides},t.next=9,O.snapshots.add(r);case 9:return l=c.length-i.length+1,l>20&&(i.push(c[0]),l--),t.next=13,O.snapshots.bulkDelete(i);case 13:o(a.SET_SNAPSHOT_CURSOR,l-1),o(a.SET_SNAPSHOT_LENGTH,l);case 15:case"end":return t.stop()}}),t)})))()})),Object(u["a"])(d,i.UN_DO,(function(e){return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,o,c,i,r,l,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.state,o=e.commit,!(n.snapshotCursor<=0)){t.next=3;break}return t.abrupt("return");case 3:return c=n.snapshotCursor-1,t.next=6,O.snapshots.orderBy("id").toArray();case 6:i=t.sent,r=i[c],l=r.index,u=r.slides,o(a.SET_SLIDES,u),o(a.UPDATE_SLIDE_INDEX,l),o(a.SET_SNAPSHOT_CURSOR,c),o(a.SET_ACTIVE_ELEMENT_ID_LIST,[]);case 13:case"end":return t.stop()}}),t)})))()})),Object(u["a"])(d,i.RE_DO,(function(e){return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,o,c,i,r,l,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.state,o=e.commit,!(n.snapshotCursor>=n.snapshotLength-1)){t.next=3;break}return t.abrupt("return");case 3:return c=n.snapshotCursor+1,t.next=6,O.snapshots.orderBy("id").toArray();case 6:i=t.sent,r=i[c],l=r.index,u=r.slides,o(a.SET_SLIDES,u),o(a.UPDATE_SLIDE_INDEX,l),o(a.SET_SNAPSHOT_CURSOR,c),o(a.SET_ACTIVE_ELEMENT_ID_LIST,[]);case 13:case"end":return t.stop()}}),t)})))()})),d),j=(n("99af"),n("c740"),n("a434"),n("2909")),S=n("5530"),E=[{source:"windows",zh:"微软雅黑",en:"Microsoft Yahei"},{source:"windows",zh:"宋体",en:"SimSun"},{source:"windows",zh:"黑体",en:"SimHei"},{source:"windows",zh:"楷体",en:"KaiTi"},{source:"windows",zh:"新宋体",en:"NSimSun"},{source:"windows",zh:"仿宋",en:"FangSong"},{source:"osx",zh:"苹方",en:"PingFang SC"},{source:"osx",zh:"华文黑体",en:"STHeiti"},{source:"osx",zh:"华文楷体",en:"STKaiti"},{source:"osx",zh:"华文宋体",en:"STSong"},{source:"osx",zh:"华文仿宋",en:"STFangSong"},{source:"osx",zh:"华文中宋",en:"STZhongSong"},{source:"osx",zh:"华文琥珀",en:"STHupo"},{source:"osx",zh:"华文新魏",en:"STXinwei"},{source:"osx",zh:"华文隶书",en:"STLiti"},{source:"osx",zh:"华文行楷",en:"STXingkai"},{source:"osx",zh:"冬青黑体简",en:"Hiragino Sans GB"},{source:"osx",zh:"兰亭黑-简",en:"Lantinghei SC"},{source:"osx",zh:"偏偏体-简",en:"Hanzipen SC"},{source:"osx",zh:"手札体-简",en:"Hannotate SC"},{source:"osx",zh:"宋体-简",en:"Songti SC"},{source:"osx",zh:"娃娃体-简",en:"Wawati SC"},{source:"osx",zh:"行楷-简",en:"Xingkai SC"},{source:"osx",zh:"圆体-简",en:"Yuanti SC"},{source:"office",zh:"华文细黑",en:"STXihei"},{source:"office",zh:"幼圆",en:"YouYuan"},{source:"office",zh:"隶书",en:"LiSu"},{source:"",zh:"Arial",en:"Arial"}],I=(n("a15b"),function(e){if("string"!==typeof e)return!1;var t="Arial";if(e.toLowerCase()===t.toLowerCase())return!0;var n="a",o=100,c=100,a=100,i=document.createElement("canvas"),r=i.getContext("2d");if(!r)return!1;i.width=c,i.height=a,r.textAlign="center",r.fillStyle="black",r.textBaseline="middle";var l=function(e){r.clearRect(0,0,c,a),r.font="".concat(o,"px ").concat(e,", ").concat(t),r.fillText(n,c/2,a/2);var i=r.getImageData(0,0,c,a).data;return[].slice.call(i).filter((function(e){return 0!==e}))};return l(t).join("")!==l(e).join("")}),y=(p={},Object(u["a"])(p,a.SET_ACTIVE_ELEMENT_ID_LIST,(function(e,t){1===t.length?e.handleElementId=t[0]:e.handleElementId="",e.activeElementIdList=t})),Object(u["a"])(p,a.SET_HANDLE_ELEMENT_ID,(function(e,t){e.handleElementId=t})),Object(u["a"])(p,a.SET_CANVAS_PERCENTAGE,(function(e,t){e.canvasPercentage=t})),Object(u["a"])(p,a.SET_CANVAS_SCALE,(function(e,t){e.canvasScale=t})),Object(u["a"])(p,a.SET_THUMBNAILS_FOCUS,(function(e,t){e.thumbnailsFocus=t})),Object(u["a"])(p,a.SET_EDITORAREA_FOCUS,(function(e,t){e.editorAreaFocus=t})),Object(u["a"])(p,a.SET_DISABLE_HOTKEYS_STATE,(function(e,t){e.disableHotkeys=t})),Object(u["a"])(p,a.SET_GRID_LINES_STATE,(function(e,t){e.showGridLines=t})),Object(u["a"])(p,a.SET_AVAILABLE_FONTS,(function(e){e.availableFonts=E.filter((function(e){return I(e.en)}))})),Object(u["a"])(p,a.SET_TOOLBAR_STATE,(function(e,t){e.toolbarState=t})),Object(u["a"])(p,a.SET_SLIDES,(function(e,t){e.slides=t})),Object(u["a"])(p,a.ADD_SLIDE,(function(e,t){var n=e.slideIndex+1;e.slides.splice(n,0,t),e.slideIndex=n})),Object(u["a"])(p,a.UPDATE_SLIDE,(function(e,t){var n=e.slideIndex;e.slides[n]=Object(S["a"])(Object(S["a"])({},e.slides[n]),t)})),Object(u["a"])(p,a.DELETE_SLIDE,(function(e,t){var n=e.slides.findIndex((function(e){return e.id===t}));n===e.slides.length-1&&(e.slideIndex=n-1),e.slides.splice(n,1)})),Object(u["a"])(p,a.UPDATE_SLIDE_INDEX,(function(e,t){e.slideIndex=t})),Object(u["a"])(p,a.ADD_ELEMENT,(function(e,t){var n=Array.isArray(t)?t:[t],o=e.slides[e.slideIndex].elements,c=[].concat(Object(j["a"])(o),Object(j["a"])(n));e.slides[e.slideIndex].elements=c})),Object(u["a"])(p,a.UPDATE_ELEMENT,(function(e,t){var n=t.id,o=t.props,c="string"===typeof n?[n]:n,a=e.slideIndex,i=e.slides[a],r=i.elements.map((function(e){return c.includes(e.id)?Object(S["a"])(Object(S["a"])({},e),o):e}));e.slides[a].elements=r})),Object(u["a"])(p,a.SET_SNAPSHOT_CURSOR,(function(e,t){e.snapshotCursor=t})),Object(u["a"])(p,a.SET_SNAPSHOT_LENGTH,(function(e,t){e.snapshotLength=t})),Object(u["a"])(p,a.SET_CTRL_KEY_STATE,(function(e,t){e.ctrlKeyState=t})),Object(u["a"])(p,a.SET_SHIFT_KEY_STATE,(function(e,t){e.shiftKeyState=t})),Object(u["a"])(p,a.SET_SCREENING,(function(e,t){e.screening=t})),p),T=[{id:"xxx1",background:{type:"solid",value:"#fff"},elements:[{id:"xxx3",type:"image",left:80,top:250,width:180,height:180,rotate:0,fixedRatio:!1,lock:!1,src:"https://img.lessonplan.cn/IMG/Show/ppt/3ab74e91-c34f-499d-9711-166e423d4dd6/1573622467064v2-7aa3ce420052983d91c6d01b47a7441d_hd.jpg"},{id:"xxx2",type:"image",left:750,top:320,width:150,height:150,rotate:0,fixedRatio:!0,lock:!1,src:"https://img.lessonplan.cn/IMG/Show/ppt/3ab74e91-c34f-499d-9711-166e423d4dd6/62d9adb3-e7a6-4dc4-a352-095cffb49f08/b1be1a2f-f893-47d3-a8a3-eac7d04d395f/1596159381259v2-b2c69096d25ae16bf6ca09e30add3e65_hd.jpg"}],animations:[{elId:"xxx1",type:"rotateIn",duration:1e3},{elId:"xxx2",type:"zoomIn",duration:1e3}]},{id:"sajd172",elements:[],animations:[{elId:"yyx1",type:"flipInX",duration:1e3}]}],w={activeElementIdList:[],handleElementId:"",canvasPercentage:90,canvasScale:1,thumbnailsFocus:!1,editorAreaFocus:!1,disableHotkeys:!1,showGridLines:!1,availableFonts:[],toolbarState:"",slides:T,slideIndex:0,snapshotCursor:-1,snapshotLength:0,ctrlKeyState:!1,shiftKeyState:!1,screening:!1},_=Object(r["a"])({state:w,getters:l,mutations:y,actions:g}),x=Object(o["withScopeId"])("data-v-7eed2f38");Object(o["pushScopeId"])("data-v-7eed2f38");var k={class:"hamster-ppt-editor"},L={class:"layout-content"},M={class:"layout-content-center"};Object(o["popScopeId"])();var A,C=x((function(e,t,n,c,a,i){var r=Object(o["resolveComponent"])("EditorHeader"),l=Object(o["resolveComponent"])("Thumbnails"),u=Object(o["resolveComponent"])("CanvasTool"),s=Object(o["resolveComponent"])("Canvas");return Object(o["openBlock"])(),Object(o["createBlock"])("div",k,[Object(o["createVNode"])(r,{class:"layout-header"}),Object(o["createVNode"])("div",L,[Object(o["createVNode"])(l,{class:"layout-content-left"}),Object(o["createVNode"])("div",M,[Object(o["createVNode"])(u,{class:"center-top"}),Object(o["createVNode"])(s,{class:"center-body"})])])])}));(function(e){e["C"]="C",e["X"]="X",e["Z"]="Z",e["Y"]="Y",e["A"]="A",e["G"]="G",e["L"]="L",e["F"]="F",e["DELETE"]="DELETE",e["UP"]="ARROWUP",e["DOWN"]="ARROWDOWN",e["LEFT"]="ARROWLEFT",e["RIGHT"]="ARROWRIGHT",e["ENTER"]="ENTER",e["SPACE"]=" ",e["TAB"]="TAB"})(A||(A={}));var N,B=function(){var e=document.documentElement;e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullScreen&&e.webkitRequestFullScreen()},D=(n("3b18"),n("f64c")),P=n("4106"),R=n.n(P),H=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,t="_0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",n=t.length,o="",c=0;c<e;c++){var a=Math.floor(Math.random()*n);o+=t[a]}return o},F=function(e,t){return R()(""+e,t,"0")},V=n("b311"),G=n.n(V),q=function(e){return new Promise((function(t,n){var o=document.createElement("button"),c=new G.a(o,{text:function(){return e},action:function(){return"copy"},container:document.body});c.on("success",(function(e){c.destroy(),t(e)})),c.on("error",(function(e){c.destroy(),n(e)})),document.body.appendChild(o),o.click(),document.body.removeChild(o)}))},Y=function(){return new Promise((function(e,t){navigator.clipboard?navigator.clipboard.readText().then((function(n){return n||t("剪贴板为空或者不包含文本"),e(n)})):t("浏览器不支持或禁止访问剪贴板")}))},z=(n("25f0"),n("3452")),X=n.n(z),U="zxc_ppt_online_editor",W=function(e){return X.a.AES.encrypt(e,U).toString()},J=function(e){var t=X.a.AES.decrypt(e,U);return t.toString(X.a.enc.Utf8)},K=(n("07ac"),n("53ca")),Z=n("b85c"),Q=n("b047"),$=n.n(Q),ee=n("0f32"),te=n.n(ee),ne=function(){var e=Object(r["b"])(),t=$()((function(){e.dispatch(i.ADD_SNAPSHOT)}),300,{trailing:!0}),n=te()((function(){e.dispatch(i.RE_DO)}),100,{leading:!0,trailing:!1}),o=te()((function(){e.dispatch(i.UN_DO)}),100,{leading:!0,trailing:!1});return{addHistorySnapshot:t,redo:n,undo:o}},oe=function(){var e=Object(r["b"])(),t=Object(o["computed"])((function(){return e.getters.currentSlide})),n=ne(),c=n.addHistorySnapshot,i=function(n){var o,i={},r={},l=Object(Z["a"])(n);try{for(l.s();!(o=l.n()).done;){var u=o.value,s=u.groupId;s&&!i[s]&&(i[s]=H()),r[u.id]=H()}}catch(v){l.e(v)}finally{l.f()}var d,p=t.value.elements.map((function(e){return e.id})),f=Object(Z["a"])(n);try{for(f.s();!(d=f.n()).done;){var m=d.value,h=p.includes(m.id);m.id=r[m.id],h&&(m.left=m.left+10,m.top=m.top+10),m.groupId&&(m.groupId=i[m.groupId])}}catch(v){f.e(v)}finally{f.f()}e.commit(a.ADD_ELEMENT,n),e.commit(a.SET_ACTIVE_ELEMENT_ID_LIST,Object.values(r)),c()},l=function(t){e.commit(a.ADD_SLIDE,t),c()},u=function(e){console.log(e)},s=function(e,t){var n,o=(null===t||void 0===t?void 0:t.onlySlide)||!1,c=(null===t||void 0===t?void 0:t.onlyElements)||!1;try{n=JSON.parse(J(e))}catch(d){n=e}if("object"===Object(K["a"])(n)){var a=n,r=a.type,s=a.data;"elements"!==r||o?"slide"!==r||c||l(s):i(s)}else c||o||u(n)};return{pasteTextClipboardData:s}},ce=function(){var e=Object(r["b"])(),t=Object(o["computed"])((function(){return e.state.slideIndex})),n=Object(o["computed"])((function(){return e.state.slides.length})),c=Object(o["computed"])((function(){return e.getters.currentSlide})),i=oe(),l=i.pasteTextClipboardData,u=ne(),s=u.addHistorySnapshot,d=function(o){var c=0;o===A.UP&&t.value>0?c=t.value-1:o===A.DOWN&&t.value<n.value-1&&(c=t.value+1),e.commit(a.UPDATE_SLIDE_INDEX,c)},p=function(){var t=W(JSON.stringify({type:"slide",data:c.value}));q(t).then((function(){e.commit(a.SET_THUMBNAILS_FOCUS,!0)}))},f=function(){Y().then((function(e){l(e,{onlySlide:!0})})).catch((function(e){return D["a"].warning(e)}))},m=function(){var t={id:H(8),elements:[]};e.commit(a.ADD_SLIDE,t),s()},h=function(){e.commit(a.ADD_SLIDE,c.value),s()},v=function(){e.commit(a.DELETE_SLIDE,c.value.id),s()},b=function(){p(),v()};return{updateSlideIndex:d,copySlide:p,pasteSlide:f,createSlide:m,copyAndPasteSlide:h,deleteSlide:v,cutSlide:b}},ae=function(){var e=Object(r["b"])(),t=Object(o["computed"])((function(){return e.state.activeElementIdList})),n=Object(o["computed"])((function(){return e.getters.currentSlide})),c=ne(),i=c.addHistorySnapshot,l=function(){var o,c=JSON.parse(JSON.stringify(n.value.elements)),r=Object(Z["a"])(c);try{for(r.s();!(o=r.n()).done;){var l=o.value;t.value.includes(l.id)&&(l.lock=!0)}}catch(u){r.e(u)}finally{r.f()}e.commit(a.UPDATE_SLIDE,{elements:c}),i()},u=function(t){var o=JSON.parse(JSON.stringify(n.value.elements));if(t.groupId){var c,r=Object(Z["a"])(o);try{for(r.s();!(c=r.n()).done;){var l=c.value;l.groupId===t.groupId&&(l.lock=!1)}}catch(p){r.e(p)}finally{r.f()}return o}var u,s=Object(Z["a"])(o);try{for(s.s();!(u=s.n()).done;){var d=u.value;if(d.id===t.id){d.lock=!1;break}}}catch(p){s.e(p)}finally{s.f()}e.commit(a.UPDATE_SLIDE,{elements:o}),i()};return{lockElement:l,unlockElement:u}},ie=function(){var e=Object(r["b"])(),t=Object(o["computed"])((function(){return e.state.activeElementIdList})),n=Object(o["computed"])((function(){return e.getters.currentSlide})),c=ne(),i=c.addHistorySnapshot,l=function(){if(t.value.length){var o=n.value.elements.filter((function(e){return!t.value.includes(e.id)}));e.commit(a.SET_ACTIVE_ELEMENT_ID_LIST,[]),e.commit(a.UPDATE_SLIDE,{elements:o}),i()}},u=function(){n.value.elements.length&&(e.commit(a.SET_ACTIVE_ELEMENT_ID_LIST,[]),e.commit(a.UPDATE_SLIDE,{elements:[]}),i())};return{deleteElement:l,deleteAllElements:u}},re=(n("45fc"),function(){var e=Object(r["b"])(),t=Object(o["computed"])((function(){return e.state.activeElementIdList})),n=Object(o["computed"])((function(){return e.getters.activeElementList})),c=Object(o["computed"])((function(){return e.getters.currentSlide})),i=ne(),l=i.addHistorySnapshot,u=function(){var o;if(n.value.length){var i,r=JSON.parse(JSON.stringify(c.value.elements)),u=H(),s=[],d=Object(Z["a"])(r);try{for(d.s();!(i=d.n()).done;){var p=i.value;t.value.includes(p.id)&&(p.groupId=u,s.push(p))}}catch(v){d.e(v)}finally{d.f()}var f=r.findIndex((function(e){return e.id===s[s.length-1].id})),m=s.map((function(e){return e.id}));r=r.filter((function(e){return!m.includes(e.id)}));var h=f-s.length+1;(o=r).splice.apply(o,[h,0].concat(s)),e.commit(a.UPDATE_SLIDE,{elements:r}),l()}},s=function(){if(n.value.length){var o=n.value.some((function(e){return e.groupId}));if(o){var i,r=JSON.parse(JSON.stringify(c.value.elements)),u=Object(Z["a"])(r);try{for(u.s();!(i=u.n()).done;){var s=i.value;t.value.includes(s.id)&&s.groupId&&delete s.groupId}}catch(d){u.e(d)}finally{u.f()}e.commit(a.UPDATE_SLIDE,{elements:r}),l()}}};return{combineElements:u,uncombineElements:s}}),le=function(){var e=Object(r["b"])(),t=Object(o["computed"])((function(){return e.state.activeElementIdList})),n=Object(o["computed"])((function(){return e.getters.activeElementList})),c=oe(),i=c.pasteTextClipboardData,l=ie(),u=l.deleteElement,s=function(){if(t.value.length){var o=W(JSON.stringify({type:"elements",data:n.value}));q(o).then((function(){e.commit(a.SET_EDITORAREA_FOCUS,!0)}))}},d=function(){s(),u()},p=function(){Y().then((function(e){i(e)})).catch((function(e){return D["a"].warning(e)}))};return{copyElement:s,cutElement:d,pasteElement:p}},ue=function(){var e=Object(r["b"])(),t=Object(o["computed"])((function(){return e.getters.currentSlide})),n=function(){var n=t.value.elements.filter((function(e){return!e.lock})),o=n.map((function(e){return e.id}));e.commit(a.SET_ACTIVE_ELEMENT_ID_LIST,o)};return{selectAllElement:n}},se=function(){var e=Object(r["b"])(),t=Object(o["computed"])((function(){return e.state.activeElementIdList})),n=Object(o["computed"])((function(){return e.getters.currentSlide})),c=ne(),i=c.addHistorySnapshot,l=function(o){var c=n.value.elements.map((function(e){if(t.value.includes(e.id)){var n=e.left,c=e.top;switch(o){case A.LEFT:n-=1;break;case A.RIGHT:n+=1;break;case A.UP:c-=1;break;case A.DOWN:c+=1;break;default:break}return Object(S["a"])(Object(S["a"])({},e),{},{left:n,top:c})}return e}));e.commit(a.UPDATE_SLIDE,{elements:c}),i()};return{moveElement:l}},de=function(){var e=Object(r["b"])(),t=Object(o["computed"])((function(){return e.state.ctrlKeyState})),n=Object(o["computed"])((function(){return e.state.shiftKeyState})),c=Object(o["computed"])((function(){return e.state.disableHotkeys})),i=Object(o["computed"])((function(){return e.state.activeElementIdList})),l=Object(o["computed"])((function(){return e.state.editorAreaFocus})),u=Object(o["computed"])((function(){return e.state.thumbnailsFocus})),s=ce(),d=s.updateSlideIndex,p=s.copySlide,f=s.createSlide,m=s.deleteSlide,h=s.cutSlide,v=re(),b=v.combineElements,O=v.uncombineElements,g=ie(),j=g.deleteElement,S=ae(),E=S.lockElement,I=le(),y=I.copyElement,T=I.cutElement,w=ue(),_=w.selectAllElement,x=se(),k=x.moveElement,L=ne(),M=L.redo,C=L.undo,N=function(){c.value||(u.value?p():i.value.length&&y())},D=function(){c.value||(u.value?h():i.value.length&&T())},P=function(){!l.value&&c.value||_()},R=function(){!l.value&&c.value||E()},H=function(){!l.value&&c.value||b()},F=function(){!l.value&&c.value||O()},V=function(){c.value||(u.value?m():i.value.length&&j())},G=function(e){c.value||(!u.value||e!==A.UP&&e!==A.DOWN?i.value.length&&k(e):d(e))},q=function(){u.value&&!c.value&&f()},Y=function(){B(),e.commit(a.SET_SCREENING,!0)},z=function(o){var c=o.ctrlKey,i=o.shiftKey,r=o.key.toUpperCase();c&&r===A.F&&(o.preventDefault(),Y()),c&&!t.value&&e.commit(a.SET_CTRL_KEY_STATE,!0),i&&!n.value&&e.commit(a.SET_SHIFT_KEY_STATE,!0),(l.value||u.value)&&(c&&r===A.C&&(o.preventDefault(),N()),c&&r===A.X&&(o.preventDefault(),D()),c&&r===A.Z&&(o.preventDefault(),C()),c&&r===A.Y&&(o.preventDefault(),M()),c&&r===A.A&&(o.preventDefault(),P()),c&&r===A.L&&(o.preventDefault(),R()),!i&&c&&r===A.G&&(o.preventDefault(),H()),i&&c&&r===A.G&&(o.preventDefault(),F()),r===A.DELETE&&(o.preventDefault(),V()),r===A.UP&&(o.preventDefault(),G(A.UP)),r===A.DOWN&&(o.preventDefault(),G(A.DOWN)),r===A.LEFT&&(o.preventDefault(),G(A.LEFT)),r===A.RIGHT&&(o.preventDefault(),G(A.RIGHT)),r===A.ENTER&&(o.preventDefault(),q()))},X=function(){t.value&&e.commit(a.SET_CTRL_KEY_STATE,!1),n.value&&e.commit(a.SET_SHIFT_KEY_STATE,!1)};Object(o["onMounted"])((function(){document.addEventListener("keydown",z),document.addEventListener("keyup",X),window.addEventListener("blur",X)})),Object(o["onUnmounted"])((function(){document.removeEventListener("keydown",z),document.removeEventListener("keyup",X),window.removeEventListener("blur",X)}))},pe=(n("c975"),function(e){return new Promise((function(t){var n=document.createElement("img");n.src=e,n.style.opacity="0",document.body.appendChild(n),n.onload=function(){var e=n.clientWidth,o=n.clientHeight;n.onload=null,n.onerror=null,document.body.removeChild(n),t({width:e,height:o})},n.onerror=function(){n.onload=null,n.onerror=null}}))}),fe=function(e){return new Promise((function(t){var n=new FileReader;n.addEventListener("load",(function(){t(n.result)})),n.readAsDataURL(e)}))},me=(n("cb29"),1e3),he=.5625,ve="#41464b",be={left:0,top:0,width:300,height:0,opacity:1,lineHeight:1.5,segmentSpacing:5,content:"请输入内容"},Oe={left:0,top:0,fixedRatio:!0},ge={fill:ve,fixedRatio:!1},je={style:"solid",points:["",""],width:4,color:ve},Se={left:0,top:0,width:500,height:500},Ee={left:0,top:0,outline:{width:2,style:"solid",color:ve}},Ie=function(){var e=Object(r["b"])(),t=ne(),n=t.addHistorySnapshot,o=function(t){e.commit(a.ADD_ELEMENT,t),e.commit(a.SET_ACTIVE_ELEMENT_ID_LIST,[t.id]),n()},c=function(e){pe(e).then((function(t){var n=t.width,c=t.height,a=n/c;a<he&&n>me?(n=me,c=n*a):c>me*he&&(c=me*he,n=c/a),o(Object(S["a"])(Object(S["a"])({},Oe),{},{type:"image",id:H(),src:e,width:n,height:c}))}))},i=function(e,t){o(Object(S["a"])(Object(S["a"])({},Se),{},{type:"chart",id:H(),chartType:e,data:t}))},l=function(e,t){var n=new Array(t).fill({colspan:1,rowspan:1,content:""}),c=new Array(e).fill(n),a=80,i=35,r=2,l=new Array(t).fill(a),u=new Array(e).fill(i);o(Object(S["a"])(Object(S["a"])({},Ee),{},{type:"table",id:H(),width:t*a+r,height:e*i+r,colSizes:l,rowSizes:u,data:c}))},u=function(e){var t=e.left,n=e.top,c=e.width,a=e.height;o(Object(S["a"])(Object(S["a"])({},be),{},{type:"text",id:H(),left:t,top:n,width:c,height:a}))},s=function(e,t){var n=e.left,c=e.top,a=e.width,i=e.height;o(Object(S["a"])(Object(S["a"])({},ge),{},{type:"shape",id:H(),left:n,top:c,width:a,height:i,svgCode:t}))},d=function(e,t,n){var c=e.left,a=e.top,i=e.start,r=e.end;o(Object(S["a"])(Object(S["a"])({},je),{},{type:"line",id:H(),left:c,top:a,start:i,end:r,points:t,lineType:n}))};return{createImageElement:c,createChartElement:i,createTableElement:l,createTextElement:u,createShapeElement:s,createLineElement:d}},ye=function(){var e=Object(r["b"])(),t=Object(o["computed"])((function(){return e.state.editorAreaFocus})),n=Object(o["computed"])((function(){return e.state.thumbnailsFocus})),c=Object(o["computed"])((function(){return e.state.disableHotkeys})),a=oe(),i=a.pasteTextClipboardData,l=Ie(),u=l.createImageElement,s=function(e){fe(e).then((function(e){return u(e)}))},d=function(e){if((t.value||n.value)&&!c.value&&e.clipboardData){var o=e.clipboardData.items,a=o[0];if(a){var r,l=Object(Z["a"])(o);try{for(l.s();!(r=l.n()).done;){var u=r.value;if("file"===u.kind&&-1!==u.type.indexOf("image")){var d=u.getAsFile();return void(d&&s(d))}}}catch(p){l.e(p)}finally{l.f()}"string"===a.kind&&"text/plain"===a.type&&a.getAsString((function(e){return i(e)}))}}};Object(o["onMounted"])((function(){document.addEventListener("paste",d)})),Object(o["onUnmounted"])((function(){document.removeEventListener("paste",d)}))},Te=Object(o["withScopeId"])("data-v-4a95a75c"),we=Te((function(e,t,n,c,a,i){var r=Object(o["resolveComponent"])("AlignmentLine"),l=Object(o["resolveComponent"])("MultiSelectOperate"),u=Object(o["resolveComponent"])("Operate"),s=Object(o["resolveComponent"])("MouseSelection"),d=Object(o["resolveComponent"])("SlideBackground"),p=Object(o["resolveComponent"])("EditableElement"),f=Object(o["resolveDirective"])("click-outside");return Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:"canvas",ref:"canvasRef",onMousewheel:t[1]||(t[1]=function(t){return e.mousewheelScaleCanvas(t)}),onMousedown:t[2]||(t[2]=function(t){return e.handleClickBlankArea(t)})},[Object(o["createVNode"])("div",{class:"operates",style:{left:e.viewportStyles.left+"px",top:e.viewportStyles.top+"px"}},[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.alignmentLines,(function(e,t){return Object(o["openBlock"])(),Object(o["createBlock"])(r,{key:t,type:e.type,axis:e.axis,length:e.length},null,8,["type","axis","length"])})),128)),e.activeElementIdList.length>1?(Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:0,elementList:e.elementList,scaleMultiElement:e.scaleMultiElement},null,8,["elementList","scaleMultiElement"])):Object(o["createCommentVNode"])("",!0),(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.elementList,(function(t){return Object(o["openBlock"])(),Object(o["createBlock"])(u,{key:t.id,elementInfo:t,isSelected:e.activeElementIdList.includes(t.id),isActive:e.handleElementId===t.id,isActiveGroupElement:e.activeGroupElementId===t.id,isMultiSelect:e.activeElementIdList.length>1,rotateElement:e.rotateElement,scaleElement:e.scaleElement},null,8,["elementInfo","isSelected","isActive","isActiveGroupElement","isMultiSelect","rotateElement","scaleElement"])})),128))],4),Object(o["createVNode"])("div",{class:"viewport",ref:"viewportRef",style:{width:e.viewportStyles.width+"px",height:e.viewportStyles.height+"px",left:e.viewportStyles.left+"px",top:e.viewportStyles.top+"px",transform:"scale(".concat(e.canvasScale,")")}},[e.mouseSelectionState.isShow?(Object(o["openBlock"])(),Object(o["createBlock"])(s,{key:0,top:e.mouseSelectionState.top,left:e.mouseSelectionState.left,width:e.mouseSelectionState.width,height:e.mouseSelectionState.height,quadrant:e.mouseSelectionState.quadrant},null,8,["top","left","width","height","quadrant"])):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(d),(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.elementList,(function(t,n){return Object(o["openBlock"])(),Object(o["createBlock"])(p,{key:t.id,elementInfo:t,elementIndex:n+1,isMultiSelect:e.activeElementIdList.length>1,selectElement:e.selectElement},null,8,["elementInfo","elementIndex","isMultiSelect","selectElement"])})),128))],4)],544)),[[f,e.removeEditorAreaFocus]])})),_e=function(e){var t=Object(o["ref"])(0),n=Object(o["ref"])(0),c=Object(r["b"])(),i=Object(o["computed"])((function(){return c.state.canvasPercentage})),l=function(){if(e.value){var o=e.value.clientWidth,r=e.value.clientHeight;if(r/o>he){var l=o*(i.value/100);c.commit(a.SET_CANVAS_SCALE,l/me),t.value=(o-l)/2,n.value=(r-l*he)/2}else{var u=r*(i.value/100);c.commit(a.SET_CANVAS_SCALE,u/(me*he)),t.value=(o-u/he)/2,n.value=(r-u)/2}}};Object(o["watch"])(i,l);var u=Object(o["computed"])((function(){return{width:me,height:me*he,left:t.value,top:n.value}})),s=new ResizeObserver(l);return Object(o["onMounted"])((function(){e.value&&s.observe(e.value)})),Object(o["onUnmounted"])((function(){e.value&&s.unobserve(e.value)})),{viewportStyles:u}};n("a623"),n("4160"),n("159b");(function(e){e["TEXT"]="text",e["IMAGE"]="image",e["SHAPE"]="shape",e["LINE"]="line",e["CHART"]="chart",e["TABLE"]="table"})(N||(N={}));var xe,ke,Le,Me,Ae=function(e){var t=e.left,n=e.top,o=e.width,c=e.height,a=e.rotate,i=void 0===a?0:a,r=Math.sqrt(Math.pow(o,2)+Math.pow(c,2))/2,l=180*Math.atan(c/o)/Math.PI,u=(180-i-l)*Math.PI/180,s=(l-i)*Math.PI/180,d=o/2,p=c/2,f=t+d,m=n+p,h=[f+r*Math.cos(u),f+r*Math.cos(s),f-r*Math.cos(u),f-r*Math.cos(s)],v=[m-r*Math.sin(u),m-r*Math.sin(s),m+r*Math.sin(u),m+r*Math.sin(s)];return{xRange:[Math.min.apply(Math,h),Math.max.apply(Math,h)],yRange:[Math.min.apply(Math,v),Math.max.apply(Math,v)]}},Ce=function(e){var t,n,o,c;if(e.type===N.LINE)t=e.left,n=e.left+Math.max(e.start[0],e.end[0]),o=e.top,c=e.top+Math.max(e.start[1],e.end[1]);else if("rotate"in e&&e.rotate){var a=e.left,i=e.top,r=e.width,l=e.height,u=e.rotate,s=Ae({left:a,top:i,width:r,height:l,rotate:u}),d=s.xRange,p=s.yRange;t=d[0],n=d[1],o=p[0],c=p[1]}else t=e.left,n=e.left+e.width,o=e.top,c=e.top+e.height;return{minX:t,maxX:n,minY:o,maxY:c}},Ne=function(e){var t=[],n=[],o=[],c=[];e.forEach((function(e){var a=Ce(e),i=a.minX,r=a.maxX,l=a.minY,u=a.maxY;t.push(i),n.push(l),o.push(r),c.push(u)}));var a=Math.min.apply(Math,t),i=Math.max.apply(Math,o),r=Math.min.apply(Math,n),l=Math.max.apply(Math,c);return{minX:a,maxX:i,minY:r,maxY:l}},Be=function(e){var t=[];return e.forEach((function(e){var n=t.findIndex((function(t){return t.value===e.value}));if(-1===n)t.push(e);else{var o=t[n],c=Math.min(o.range[0],e.range[0]),a=Math.max(o.range[1],e.range[1]),i=[c,a],r={value:e.value,range:i};t[n]=r}})),t},De=function(e,t){var n=Object(r["b"])(),c=Object(o["computed"])((function(){return n.state.canvasScale})),i=Object(o["reactive"])({isShow:!1,top:0,left:0,width:0,height:0,quadrant:1}),l=function(o){if(t.value){var r=!0,l=t.value.getBoundingClientRect(),u=5,s=o.pageX,d=o.pageY,p=(s-l.x)/c.value,f=(d-l.y)/c.value;i.isShow=!1,i.quadrant=4,i.top=f,i.left=p,i.width=0,i.height=0,document.onmousemove=function(e){if(r){var t=e.pageX,n=e.pageY,o=(t-s)/c.value,a=(n-d)/c.value,l=Math.abs(o),p=Math.abs(a);if(!(l<u||p<u)){var f=0;o>0&&a>0?f=4:o<0&&a<0?f=1:o>0&&a<0?f=2:o<0&&a>0&&(f=3),i.isShow=!0,i.quadrant=f,i.width=l,i.height=p}}},document.onmouseup=function(){document.onmousemove=null,document.onmouseup=null,r=!1;for(var t=[],o=0;o<e.value.length;o++){var c=e.value[o],l=i.left,u=i.top,s=i.width,d=i.height,p=i.quadrant,f=Ce(c),m=f.minX,h=f.maxX,v=f.minY,b=f.maxY,O=!1;4===p?O=m>l&&h<l+s&&v>u&&b<u+d:1===p?O=m>l-s&&h<l-s+s&&v>u-d&&b<u-d+d:2===p?O=m>l&&h<l+s&&v>u-d&&b<u-d+d:3===p&&(O=m>l-s&&h<l-s+s&&v>u&&b<u+d),O&&!c.lock&&t.push(c)}t=t.filter((function(n){if(n.groupId){var o=t.map((function(e){return e.id})),c=e.value.filter((function(e){return e.groupId===n.groupId}));return c.every((function(e){return o.includes(e.id)}))}return!0}));var g=t.map((function(e){return e.id}));g.length&&n.commit(a.SET_ACTIVE_ELEMENT_ID_LIST,g),i.isShow=!1}}};return{mouseSelectionState:i,updateMouseSelection:l}},Pe=function(e){var t=Ie(),n=t.createImageElement,c=function(e){if(e.dataTransfer){var t=e.dataTransfer.items[0];if("file"===t.kind&&-1!==t.type.indexOf("image")){var o=t.getAsFile();o&&fe(o).then((function(e){return n(e)}))}else"string"===t.kind&&"text/plain"===t.type&&t.getAsString((function(e){console.log(e)}))}};Object(o["onMounted"])((function(){e.value&&e.value.addEventListener("drop",c),document.ondragleave=function(e){return e.preventDefault()},document.ondrop=function(e){return e.preventDefault()},document.ondragenter=function(e){return e.preventDefault()},document.ondragover=function(e){return e.preventDefault()}})),Object(o["onUnmounted"])((function(){e.value&&e.value.removeEventListener("drop",c),document.ondragleave=null,document.ondrop=null,document.ondragenter=null,document.ondragover=null}))},Re=function(e,t){var n=Math.atan2(e,t),o=180/Math.PI*n;return o},He=function(e,t){var n=Object(r["b"])(),c=Object(o["computed"])((function(){return n.state.canvasScale})),i=ne(),l=i.addHistorySnapshot,u=function(o){var i=!0,r=0,u=o.rotate||0,s=o.left,d=o.top,p=o.width,f=o.height,m=s+p/2,h=d+f/2;if(t.value){var v=t.value.getBoundingClientRect();document.onmousemove=function(t){if(i){var n=(t.pageX-v.left)/c.value,a=(t.pageY-v.top)/c.value,l=n-m,u=h-a;r=Re(l,u);var s=5;Math.abs(r)<=s?r=0:r>0&&Math.abs(r-45)<=s?r-=r-45:r<0&&Math.abs(r+45)<=s?r-=r+45:r>0&&Math.abs(r-90)<=s?r-=r-90:r<0&&Math.abs(r+90)<=s?r-=r+90:r>0&&Math.abs(r-135)<=s?r-=r-135:r<0&&Math.abs(r+135)<=s?r-=r+135:r>0&&Math.abs(r-180)<=s?r-=r-180:r<0&&Math.abs(r+180)<=s&&(r-=r+180),e.value=e.value.map((function(e){return o.id===e.id?Object(S["a"])(Object(S["a"])({},e),{},{rotate:r}):e}))}},document.onmouseup=function(){i=!1,document.onmousemove=null,document.onmouseup=null,u!==r&&(n.commit(a.UPDATE_SLIDE,{elements:e.value}),l())}}};return{rotateElement:u}};(function(e){e["UP"]="up",e["DOWN"]="down",e["TOP"]="top",e["BOTTOM"]="bottom"})(xe||(xe={})),function(e){e["TOP"]="top",e["BOTTOM"]="bottom",e["LEFT"]="left",e["RIGHT"]="right",e["VERTICAL"]="vertical",e["HORIZONTAL"]="horizontal"}(ke||(ke={})),function(e){e["T"]="top",e["B"]="bottom",e["L"]="left",e["R"]="right"}(Le||(Le={})),function(e){e["LEFT_TOP"]="left-top",e["TOP"]="top",e["RIGHT_TOP"]="right-top",e["LEFT"]="left",e["RIGHT"]="right",e["LEFT_BOTTOM"]="left-bottom",e["BOTTOM"]="bottom",e["RIGHT_BOTTOM"]="right-bottom"}(Me||(Me={}));var Fe=function(e,t){var n=e.left,o=e.top,c=e.width,a=e.height,i=Math.sqrt(Math.pow(c,2)+Math.pow(a,2))/2,r=180*Math.atan(a/c)/Math.PI,l=(180-t-r)*Math.PI/180,u=(r-t)*Math.PI/180,s=(90-t)*Math.PI/180,d=t*Math.PI/180,p=c/2,f=a/2,m=n+p,h=o+f,v={left:m+i*Math.cos(l),top:h-i*Math.sin(l)},b={left:m+f*Math.cos(s),top:h-f*Math.sin(s)},O={left:m+i*Math.cos(u),top:h-i*Math.sin(u)},g={left:m+p*Math.cos(d),top:h+p*Math.sin(d)},j={left:m-i*Math.cos(l),top:h+i*Math.sin(l)},S={left:m-f*Math.sin(d),top:h+f*Math.cos(d)},E={left:m-i*Math.cos(u),top:h+i*Math.sin(u)},I={left:m-p*Math.cos(d),top:h-p*Math.sin(d)};return{leftTopPoint:v,topPoint:b,rightTopPoint:O,rightPoint:g,rightBottomPoint:j,bottomPoint:S,leftBottomPoint:E,leftPoint:I}},Ve=function(e,t){var n,o=(n={},Object(u["a"])(n,Me.RIGHT_BOTTOM,t.leftTopPoint),Object(u["a"])(n,Me.LEFT_BOTTOM,t.rightTopPoint),Object(u["a"])(n,Me.LEFT_TOP,t.rightBottomPoint),Object(u["a"])(n,Me.RIGHT_TOP,t.leftBottomPoint),Object(u["a"])(n,Me.TOP,t.bottomPoint),Object(u["a"])(n,Me.BOTTOM,t.topPoint),Object(u["a"])(n,Me.LEFT,t.rightPoint),Object(u["a"])(n,Me.RIGHT,t.leftPoint),n);return o[e]},Ge=function(e,t,n){var c=Object(r["b"])(),i=Object(o["computed"])((function(){return c.state.activeElementIdList})),l=Object(o["computed"])((function(){return c.getters.ctrlOrShiftKeyActive})),u=Object(o["computed"])((function(){return c.state.canvasScale})),s=ne(),d=s.addHistorySnapshot,p=function(o,r,s){var p,f=!0,m=r.left,h=r.top,v=r.width,b=r.height,O=l.value||"fixedRatio"in r&&r.fixedRatio,g=v/b,E="rotate"in r&&r.rotate?r.rotate:0,I=Math.PI*E/180,y=o.pageX,T=o.pageY,w=15,_=function(e){return e<w?w:e},x=0,k=0,L=[],M=[];if("rotate"in r&&r.rotate){var A=r.left,C=r.top,B=r.width,D=r.height;p=Fe({left:A,top:C,width:B,height:D},E);var P=Ve(s,p);x=P.left,k=P.top}else{var R,H=me,F=me*he,V=r.id===t.value,G=Object(Z["a"])(e.value);try{for(G.s();!(R=G.n()).done;){var q=R.value;if((!("rotate"in q)||!q.rotate)&&(q.type!==N.LINE&&(!V||q.id!==r.id)&&(V||!i.value.includes(q.id)))){var Y=q.left,z=q.top,X=q.width,U=q.height,W=Y+X,J=z+U,K={value:z,range:[Y,W]},Q={value:J,range:[Y,W]},$={value:Y,range:[z,J]},ee={value:W,range:[z,J]};L.push(K,Q),M.push($,ee)}}}catch(le){G.e(le)}finally{G.f()}var te={value:0,range:[0,H]},ne={value:F,range:[0,H]},oe={value:F/2,range:[0,H]},ce={value:0,range:[0,F]},ae={value:H,range:[0,F]},ie={value:H/2,range:[0,F]};L.push(te,ne,oe),M.push(ce,ae,ie),L=Be(L),M=Be(M)}var re=function(e,t){var o=3,c=[],a=!1,i=!1,r={offsetX:0,offsetY:0};if(t||0===t)for(var l=0;l<L.length;l++){var u=L[l],s=u.value,d=u.range,p=Math.min.apply(Math,Object(j["a"])(d).concat([e||0])),f=Math.max.apply(Math,Object(j["a"])(d).concat([e||0]));Math.abs(t-s)<o&&(i||(r.offsetY=t-s,i=!0),c.push({type:"horizontal",axis:{x:p-50,y:s},length:f-p+100}))}if(e||0===e)for(var m=0;m<M.length;m++){var h=M[m],v=h.value,b=h.range,O=Math.min.apply(Math,Object(j["a"])(b).concat([t||0])),g=Math.max.apply(Math,Object(j["a"])(b).concat([t||0]));Math.abs(e-v)<o&&(a||(r.offsetX=e-v,a=!0),c.push({type:"vertical",axis:{x:v,y:O-50},length:g-O+100}))}return n.value=c,r};document.onmousemove=function(t){if(f){var n=t.pageX,o=t.pageY,c=n-y,a=o-T,i=v,l=b,d=m,p=h;if(E){var j=(Math.cos(I)*c+Math.sin(I)*a)/u.value,w=(Math.cos(I)*a-Math.sin(I)*c)/u.value;O&&(s!==Me.RIGHT_BOTTOM&&s!==Me.LEFT_TOP||(w=j/g),s!==Me.LEFT_BOTTOM&&s!==Me.RIGHT_TOP||(w=-j/g)),s===Me.RIGHT_BOTTOM?(i=_(v+j),l=_(b+w)):s===Me.LEFT_BOTTOM?(i=_(v-j),l=_(b+w),d=m-(i-v)):s===Me.LEFT_TOP?(i=_(v-j),l=_(b-w),d=m-(i-v),p=h-(l-b)):s===Me.RIGHT_TOP?(i=_(v+j),l=_(b-w),p=h-(l-b)):s===Me.TOP?(l=_(b-w),p=h-(l-b)):s===Me.BOTTOM?l=_(b+w):s===Me.LEFT?(i=_(v-j),d=m-(i-v)):s===Me.RIGHT&&(i=_(v+j));var L=Fe({width:i,height:l,left:d,top:p},E),M=Ve(s,L),A=M.left,C=M.top,N=A-x,B=C-k;d-=N,p-=B}else{var D=c/u.value,P=a/u.value;if(O&&(s!==Me.RIGHT_BOTTOM&&s!==Me.LEFT_TOP||(P=D/g),s!==Me.LEFT_BOTTOM&&s!==Me.RIGHT_TOP||(P=-D/g)),s===Me.RIGHT_BOTTOM){var R=re(m+v+D,h+b+P),H=R.offsetX,F=R.offsetY;D-=H,P-=F,O&&(F?D=P*g:P=D/g),i=_(v+D),l=_(b+P)}else if(s===Me.LEFT_BOTTOM){var V=re(m+D,h+b+P),G=V.offsetX,q=V.offsetY;D-=G,P-=q,O&&(q?D=-P*g:P=-D/g),i=_(v-D),l=_(b+P),d=m-(i-v)}else if(s===Me.LEFT_TOP){var Y=re(m+D,h+P),z=Y.offsetX,X=Y.offsetY;D-=z,P-=X,O&&(X?D=P*g:P=D/g),i=_(v-D),l=_(b-P),d=m-(i-v),p=h-(l-b)}else if(s===Me.RIGHT_TOP){var U=re(m+v+D,h+P),W=U.offsetX,J=U.offsetY;D-=W,P-=J,O&&(J?D=-P*g:P=-D/g),i=_(v+D),l=_(b-P),p=h-(l-b)}else if(s===Me.LEFT){var K=re(m+D,null),Z=K.offsetX;D-=Z,i=_(v-D),d=m-(i-v)}else if(s===Me.RIGHT){var Q=re(m+v+D,null),$=Q.offsetX;D-=$,i=_(v+D)}else if(s===Me.TOP){var ee=re(null,h+P),te=ee.offsetY;P-=te,l=_(b-P),p=h-(l-b)}else if(s===Me.BOTTOM){var ne=re(null,h+b+P),oe=ne.offsetY;P-=oe,l=_(b+P)}}e.value=e.value.map((function(e){return r.id===e.id?Object(S["a"])(Object(S["a"])({},e),{},{left:d,top:p,width:i,height:l}):e}))}},document.onmouseup=function(t){f=!1,document.onmousemove=null,document.onmouseup=null,n.value=[],y===t.pageX&&T===t.pageY||(c.commit(a.UPDATE_SLIDE,{elements:e.value}),d())}},f=function(t,n,o){var r=!0,s=n.minX,p=n.maxX,f=n.minY,m=n.maxY,h=p-s,v=m-f,b=h/v,O=t.pageX,g=t.pageY,j=JSON.parse(JSON.stringify(e.value));document.onmousemove=function(t){if(r){var n=t.pageX,c=t.pageY,a=(n-O)/u.value,d=(c-g)/u.value;l.value&&(o!==Me.RIGHT_BOTTOM&&o!==Me.LEFT_TOP||(d=a/b),o!==Me.LEFT_BOTTOM&&o!==Me.RIGHT_TOP||(d=-a/b));var E=s,I=p,y=f,T=m;o===Me.RIGHT_BOTTOM?(I=p+a,T=m+d):o===Me.LEFT_BOTTOM?(E=s+a,T=m+d):o===Me.LEFT_TOP?(E=s+a,y=f+d):o===Me.RIGHT_TOP?(I=p+a,y=f+d):o===Me.TOP?y=f+d:o===Me.BOTTOM?T=m+d:o===Me.LEFT?E=s+a:o===Me.RIGHT&&(I=p+a);var w=I-E,_=T-y,x=w/h,k=_/v;x<=0&&(x=0),k<=0&&(k=0),e.value=e.value.map((function(e){if((e.type===N.IMAGE||e.type===N.SHAPE)&&i.value.includes(e.id)){var t=j.find((function(t){return t.id===e.id}));return Object(S["a"])(Object(S["a"])({},e),{},{width:t.width*x,height:t.height*k,left:E+(t.left-s)*x,top:y+(t.top-f)*k})}return e}))}},document.onmouseup=function(t){r=!1,document.onmousemove=null,document.onmouseup=null,O===t.pageX&&g===t.pageY||(c.commit(a.UPDATE_SLIDE,{elements:e.value}),d())}};return{scaleElement:p,scaleMultiElement:f}},qe=n("eed6"),Ye=n.n(qe),ze=function(e,t,n){var c=Object(r["b"])(),i=Object(o["computed"])((function(){return c.state.activeElementIdList})),l=Object(o["computed"])((function(){return c.state.handleElementId})),u=Object(o["computed"])((function(){return c.state.editorAreaFocus})),s=Object(o["computed"])((function(){return c.getters.ctrlOrShiftKeyActive})),d=function(o,r){var d=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(u.value||c.commit(a.SET_EDITORAREA_FOCUS,!0),i.value.includes(r.id)){if(s.value){var p=[];if(r.groupId){var f=[];e.value.forEach((function(e){e.groupId===r.groupId&&f.push(e.id)})),p=i.value.filter((function(e){return!f.includes(e)}))}else p=i.value.filter((function(e){return e!==r.id}));p.length>0&&c.commit(a.SET_ACTIVE_ELEMENT_ID_LIST,p)}else if(l.value!==r.id)c.commit(a.SET_HANDLE_ELEMENT_ID,r.id);else if(t.value!==r.id&&r.groupId){var m=o.pageX,h=o.pageY;o.target.onmouseup=function(e){var n=e.pageX,o=e.pageY;m===n&&h===o&&(t.value=r.id,e.target.onmouseup=null)}}}else{var v=[];if(v=s.value?[].concat(Object(j["a"])(i.value),[r.id]):[r.id],r.groupId){var b=[];e.value.forEach((function(e){e.groupId===r.groupId&&b.push(e.id)})),v=[].concat(Object(j["a"])(v),b)}c.commit(a.SET_ACTIVE_ELEMENT_ID_LIST,Ye()(v)),c.commit(a.SET_HANDLE_ELEMENT_ID,r.id)}d&&n(o,r)},p=function(){var t=e.value.filter((function(e){return!e.lock})),n=t.map((function(e){return e.id}));c.commit(a.SET_ACTIVE_ELEMENT_ID_LIST,n)};return{selectElement:d,selectAllElement:p}},Xe=function(e,t,n){var c=Object(r["b"])(),i=Object(o["computed"])((function(){return c.state.activeElementIdList})),l=Object(o["computed"])((function(){return c.state.canvasScale})),u=ne(),s=u.addHistorySnapshot,d=function(o,r){if(i.value.includes(r.id)){var u,d=!0,p=me,f=me*he,m=JSON.parse(JSON.stringify(e.value)),h=m.filter((function(e){return i.value.includes(e.id)})),v=3,b=r.left,O=r.top,g=r.width,E="height"in r&&r.height?r.height:0,I="rotate"in r&&r.rotate?r.rotate:0,y=o.pageX,T=o.pageY,w=null,_=r.id===t.value,x=[],k=[],L=Object(Z["a"])(e.value);try{for(L.s();!(u=L.n()).done;){var M=u.value;if(M.type!==N.LINE&&((!_||M.id!==r.id)&&(_||!i.value.includes(M.id)))){var A=void 0,C=void 0,B=void 0,D=void 0;if("rotate"in M&&M.rotate){var P=Ae({left:M.left,top:M.top,width:M.width,height:M.height,rotate:M.rotate}),R=P.xRange,H=P.yRange;A=R[0],C=H[0],B=R[1]-R[0],D=H[1]-H[0]}else A=M.left,C=M.top,B=M.width,D=M.height;var F=A+B,V=C+D,G=C+D/2,q=A+B/2,Y={value:C,range:[A,F]},z={value:V,range:[A,F]},X={value:G,range:[A,F]},U={value:A,range:[C,V]},W={value:F,range:[C,V]},J={value:q,range:[C,V]};x.push(Y,z,X),k.push(U,W,J)}}}catch(oe){L.e(oe)}finally{L.f()}var K={value:0,range:[0,p]},Q={value:f,range:[0,p]},$={value:f/2,range:[0,p]},ee={value:0,range:[0,f]},te={value:p,range:[0,f]},ne={value:p/2,range:[0,f]};x.push(K,Q,$),k.push(ee,te,ne),x=Be(x),k=Be(k),document.onmousemove=function(t){var o=t.pageX,c=t.pageY;if(!1!==w&&(w=Math.abs(y-o)<v&&Math.abs(T-c)<v),d&&!w){var a,u,s,p,f=(o-y)/l.value,m=(c-T)/l.value,L=b+f,M=O+m;if(1===i.value.length||_)if(I){var A=Ae({left:L,top:M,width:g,height:E,rotate:I}),C=A.xRange,B=A.yRange;a=C[0],u=C[1],s=B[0],p=B[1]}else r.type===N.LINE?(a=L,u=L+Math.max(r.start[0],r.end[0]),s=M,p=M+Math.max(r.start[1],r.end[1])):(a=L,u=L+g,s=M,p=M+E);else{for(var D=[],P=[],R=[],H=[],F=0;F<h.length;F++){var V=h[F],G=V.left+f,q=V.top+m,Y=V.width,z="height"in V&&V.height?V.height:0,X="rotate"in V&&V.rotate?V.rotate:0;if("rotate"in V&&V.rotate){var U=Ae({left:G,top:q,width:Y,height:z,rotate:X}),W=U.xRange,J=U.yRange;D.push(W[0]),P.push(J[0]),R.push(W[1]),H.push(J[1])}else V.type===N.LINE?(D.push(G),P.push(q),R.push(G+Math.max(V.start[0],V.end[0])),H.push(q+Math.max(V.start[1],V.end[1]))):(D.push(G),P.push(q),R.push(G+Y),H.push(q+z))}a=Math.min.apply(Math,D),u=Math.max.apply(Math,R),s=Math.min.apply(Math,P),p=Math.max.apply(Math,H)}for(var K=a+(u-a)/2,Z=s+(p-s)/2,Q=[],$=!1,ee=!1,te=0;te<x.length;te++){var ne=x[te],oe=ne.value,ce=ne.range,ae=Math.min.apply(Math,Object(j["a"])(ce).concat([a,u])),ie=Math.max.apply(Math,Object(j["a"])(ce).concat([a,u]));Math.abs(s-oe)<v&&(ee||(M-=s-oe,ee=!0),Q.push({type:"horizontal",axis:{x:ae-50,y:oe},length:ie-ae+100})),Math.abs(p-oe)<v&&(ee||(M-=p-oe,ee=!0),Q.push({type:"horizontal",axis:{x:ae-50,y:oe},length:ie-ae+100})),Math.abs(Z-oe)<v&&(ee||(M-=Z-oe,ee=!0),Q.push({type:"horizontal",axis:{x:ae-50,y:oe},length:ie-ae+100}))}for(var re=0;re<k.length;re++){var le=k[re],ue=le.value,se=le.range,de=Math.min.apply(Math,Object(j["a"])(se).concat([s,p])),pe=Math.max.apply(Math,Object(j["a"])(se).concat([s,p]));Math.abs(a-ue)<v&&($||(L-=a-ue,$=!0),Q.push({type:"vertical",axis:{x:ue,y:de-50},length:pe-de+100})),Math.abs(u-ue)<v&&($||(L-=u-ue,$=!0),Q.push({type:"vertical",axis:{x:ue,y:de-50},length:pe-de+100})),Math.abs(K-ue)<v&&($||(L-=K-ue,$=!0),Q.push({type:"vertical",axis:{x:ue,y:de-50},length:pe-de+100}))}if(n.value=Q,1===i.value.length||_)e.value=e.value.map((function(e){return e.id===r.id?Object(S["a"])(Object(S["a"])({},e),{},{left:L,top:M}):e}));else{var fe=e.value.find((function(e){return e.id===r.id}));if(!fe)return;e.value=e.value.map((function(e){return i.value.includes(e.id)?e.id===r.id?Object(S["a"])(Object(S["a"])({},e),{},{left:L,top:M}):Object(S["a"])(Object(S["a"])({},e),{},{left:e.left+(L-fe.left),top:e.top+(M-fe.top)}):e}))}}},document.onmouseup=function(t){d=!1,document.onmousemove=null,document.onmouseup=null,n.value=[];var o=t.pageX,i=t.pageY;y===o&&T===i||(c.commit(a.UPDATE_SLIDE,{elements:e.value}),s())}}};return{dragElement:d}},Ue=function(){var e=Object(r["b"])(),t=Object(o["computed"])((function(){return e.state.canvasPercentage})),n=function(n){var o=t.value,c=5,i=120,r=60;"+"===n&&o<=i&&(o+=c),"-"===n&&o>=r&&(o-=c),e.commit(a.SET_CANVAS_PERCENTAGE,o)};return{scaleCanvas:n}};function We(e,t,n,c,a,i){return Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:"editable-element",ref:"elementRef",id:"editable-element-"+e.elementInfo.id,style:{zIndex:e.elementIndex}},[(Object(o["openBlock"])(),Object(o["createBlock"])(Object(o["resolveDynamicComponent"])(e.currentElementComponent),{elementInfo:e.elementInfo,selectElement:e.selectElement,contextmenus:e.contextmenus},null,8,["elementInfo","selectElement","contextmenus"]))],12,["id"])}n("a9e3");var Je,Ke,Ze=function(){var e=Object(r["b"])(),t=Object(o["computed"])((function(){return e.getters.currentSlide})),n=ne(),c=n.addHistorySnapshot,i=function(e,t){var n=e.findIndex((function(e){return e.id===t[0].id})),o=e.findIndex((function(e){return e.id===t[t.length-1].id}));return{minIndex:n,maxIndex:o}},l=function(e,t){var n=JSON.parse(JSON.stringify(e));if(t.groupId){var o=n.filter((function(e){return e.groupId===t.groupId})),c=i(e,o),a=c.minIndex,r=c.maxIndex;if(r===e.length-1)return null;var l=n[r+1],u=n.splice(a,o.length);if(l.groupId){var s=n.filter((function(e){return e.groupId===l.groupId}));n.splice.apply(n,[a+s.length,0].concat(Object(j["a"])(u)))}else n.splice.apply(n,[a+1,0].concat(Object(j["a"])(u)))}else{var d=e.findIndex((function(e){return e.id===t.id}));if(d===e.length-1)return null;var p=n[d+1],f=n.splice(d,1)[0];if(p.groupId){var m=n.filter((function(e){return e.groupId===p.groupId}));n.splice(d+m.length,0,f)}else n.splice(d+1,0,f)}return n},u=function(e,t){var n=JSON.parse(JSON.stringify(e));if(t.groupId){var o=n.filter((function(e){return e.groupId===t.groupId})),c=i(e,o),a=c.minIndex;if(0===a)return null;var r=n[a-1],l=n.splice(a,o.length);if(r.groupId){var u=n.filter((function(e){return e.groupId===r.groupId}));n.splice.apply(n,[a-u.length,0].concat(Object(j["a"])(l)))}else n.splice.apply(n,[a-1,0].concat(Object(j["a"])(l)))}else{var s=e.findIndex((function(e){return e.id===t.id}));if(0===s)return null;var d=n[s-1],p=n.splice(s,1)[0];if(d.groupId){var f=n.filter((function(e){return e.groupId===d.groupId}));n.splice(s-f.length,0,p)}else n.splice(s-1,0,p)}return n},s=function(e,t){var n=JSON.parse(JSON.stringify(e));if(t.groupId){var o=n.filter((function(e){return e.groupId===t.groupId})),c=i(e,o),a=c.minIndex,r=c.maxIndex;if(r===e.length-1)return null;var l=n.splice(a,o.length);n.push.apply(n,Object(j["a"])(l))}else{var u=e.findIndex((function(e){return e.id===t.id}));if(u===e.length-1)return null;n.splice(u,1),n.push(t)}return n},d=function(e,t){var n=JSON.parse(JSON.stringify(e));if(t.groupId){var o=n.filter((function(e){return e.groupId===t.groupId})),c=i(e,o),a=c.minIndex;if(0===a)return null;var r=n.splice(a,o.length);n.unshift.apply(n,Object(j["a"])(r))}else{var l=e.findIndex((function(e){return e.id===t.id}));if(0===l)return null;n.splice(l,1),n.unshift(t)}return n},p=function(n,o){var i=null;o===xe.UP?i=l(t.value.elements,n):o===xe.DOWN?i=u(t.value.elements,n):o===xe.TOP?i=s(t.value.elements,n):o===xe.BOTTOM&&(i=d(t.value.elements,n)),e.commit(a.UPDATE_SLIDE,{elements:i}),c()};return{orderElement:p}},Qe=function(){var e=Object(r["b"])(),t=Object(o["computed"])((function(){return e.state.activeElementIdList})),n=Object(o["computed"])((function(){return e.getters.activeElementList})),c=Object(o["computed"])((function(){return e.getters.currentSlide})),i=function(o){var i,r=me,l=me*he,u=Ne(n.value),s=u.minX,d=u.maxX,p=u.minY,f=u.maxY,m=JSON.parse(JSON.stringify(c.value.elements)),h=Object(Z["a"])(m);try{for(h.s();!(i=h.n()).done;){var v=i.value;if(t.value.includes(v.id))if(o===ke.TOP){var b=p-0;v.top=v.top-b}else if(o===ke.VERTICAL){var O=p+(f-p)/2-l/2;v.top=v.top-O}else if(o===ke.BOTTOM){var g=f-l;v.top=v.top-g}else if(o===ke.LEFT){var j=s-0;v.left=v.left-j}else if(o===ke.HORIZONTAL){var S=s+(d-s)/2-r/2;v.left=v.left-S}else if(o===ke.RIGHT){var E=d-r;v.left=v.left-E}}}catch(I){h.e(I)}finally{h.f()}e.commit(a.UPDATE_SLIDE,{elements:m})};return{alignElementToCanvas:i}},$e=Object(o["withScopeId"])("data-v-7980a6e9"),et=$e((function(e,t,n,c,a,i){var r=Object(o["resolveComponent"])("ImageRectOutline"),l=Object(o["resolveComponent"])("ImageEllipseOutline"),u=Object(o["resolveComponent"])("ImagePolygonOutline");return Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:["editable-element-image",{lock:e.elementInfo.lock}],style:{top:e.elementInfo.top+"px",left:e.elementInfo.left+"px",width:e.elementInfo.width+"px",height:e.elementInfo.height+"px",transform:"rotate(".concat(e.elementInfo.rotate,"deg)")},onMousedown:t[1]||(t[1]=function(t){return e.handleSelectElement(t)})},[Object(o["createVNode"])("div",null,["rect"===e.clipShape.type?(Object(o["openBlock"])(),Object(o["createBlock"])(r,{key:0,width:e.elementInfo.width,height:e.elementInfo.height,radius:e.clipShape.radius,outline:e.elementInfo.outline},null,8,["width","height","radius","outline"])):"ellipse"===e.clipShape.type?(Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:1,width:e.elementInfo.width,height:e.elementInfo.height,outline:e.elementInfo.outline},null,8,["width","height","outline"])):"polygon"===e.clipShape.type?(Object(o["openBlock"])(),Object(o["createBlock"])(u,{key:2,width:e.elementInfo.width,height:e.elementInfo.height,outline:e.elementInfo.outline,createPath:e.clipShape.createPath},null,8,["width","height","outline","createPath"])):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])("div",{class:"image-content",style:{clipPath:e.clipShape.style}},[Object(o["createVNode"])("img",{src:e.elementInfo.src,draggable:!1,style:{top:e.imgPosition.top,left:e.imgPosition.left,width:e.imgPosition.width,height:e.imgPosition.height,filter:e.filter},alt:""},null,12,["src"])],4)])],38)})),tt=(n("b64b"),n("3835"));(function(e){e["RECT"]="rect",e["ELLIPSE"]="ellipse",e["POLYGON"]="polygon"})(Je||(Je={})),function(e){e["RECT"]="rect",e["ROUNDRECT"]="roundRect",e["ELLIPSE"]="ellipse",e["TRIANGLE"]="triangle",e["PENTAGON"]="pentagon",e["RHOMBUS"]="rhombus",e["STAR"]="star"}(Ke||(Ke={}));var nt={rect:{name:"矩形",type:Je.RECT,radius:"0",style:""},roundRect:{name:"圆角矩形",type:Je.RECT,radius:"10%",style:"inset(0 0 0 0 round 10% 10% 10% 10%)"},ellipse:{name:"圆形",type:Je.ELLIPSE,style:"ellipse(50% 50% at 50% 50%)"},triangle:{name:"三角形",type:Je.POLYGON,style:"polygon(50% 0%, 0% 100%, 100% 100%)",createPath:function(e,t){return"M ".concat(e/2," 0 L 0 ").concat(t," L ").concat(e," ").concat(t," Z")}},pentagon:{name:"五边形",type:Je.POLYGON,style:"polygon(50% 0%, 100% 38%, 82% 100%, 18% 100%, 0% 38%)",createPath:function(e,t){return"M ".concat(e/2," 0 L ").concat(e," ").concat(.38*t," L ").concat(.82*e," ").concat(t," L ").concat(.18*e," ").concat(t," L 0 ").concat(.38*t," Z")}},rhombus:{name:"菱形",type:Je.POLYGON,style:"polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%)",createPath:function(e,t){return"M ".concat(e/2," 0 L ").concat(e," ").concat(t/2," L ").concat(e/2," ").concat(t," L 0 ").concat(t/2," Z")}},star:{name:"五角星",type:Je.POLYGON,style:"polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%)",createPath:function(e,t){return"M ".concat(e/2," 0 L ").concat(.61*e," ").concat(.35*t," L ").concat(.98*e," ").concat(.35*t," L ").concat(.68*e," ").concat(.57*t," L ").concat(.79*e," ").concat(.91*t," L ").concat(.5*e," ").concat(.7*t," L ").concat(.21*e," ").concat(.91*t," L ").concat(.32*e," ").concat(.57*t," L ").concat(.02*e," ").concat(.35*t," L ").concat(.39*e," ").concat(.35*t," Z")}}},ot=function(e){var t="";if(e.value){var n=e.value,o=n.h,c=n.v,a=n.blur,i=n.color;t="".concat(o,"px ").concat(c,"px ").concat(a,"px ").concat(i)}return{shadowStyle:t}},ct=Object(o["withScopeId"])("data-v-7714d164"),at=ct((function(e,t,n,c,a,i){var r=Object(o["resolveComponent"])("SvgWrapper");return e.outline?(Object(o["openBlock"])(),Object(o["createBlock"])(r,{key:0,class:"image-rect-outline",overflow:"visible",width:e.width,height:e.height},{default:ct((function(){return[Object(o["createVNode"])("rect",{"vector-effect":"non-scaling-stroke","stroke-linecap":"butt","stroke-miterlimit":"8","stroke-linejoin":"",fill:"transparent",rx:e.radius,ry:e.radius,width:e.width,height:e.height,stroke:e.outlineColor,"stroke-width":e.outlineWidth,"stroke-dasharray":"dashed"===e.outlineStyle?"12 9":"0 0"},null,8,["rx","ry","width","height","stroke","stroke-width","stroke-dasharray"])]})),_:1},8,["width","height"])):Object(o["createCommentVNode"])("",!0)})),it={xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",version:"1.1"};function rt(e,t,n,c,a,i){return Object(o["openBlock"])(),Object(o["createBlock"])("svg",it,[Object(o["renderSlot"])(e.$slots,"default")])}var lt={name:"svg-wrapper"};lt.render=rt;var ut=lt,st=function(e){var t=Object(o["computed"])((function(){return e.value&&void 0!==e.value.width?e.value.width:0})),n=Object(o["computed"])((function(){return e.value&&void 0!==e.value.style?e.value.style:"solid"})),c=Object(o["computed"])((function(){return e.value&&void 0!==e.value.color?e.value.color:"#41464b"}));return{outlineWidth:t,outlineStyle:n,outlineColor:c}},dt=Object(o["defineComponent"])({name:"image-rect-outline",components:{SvgWrapper:ut},props:{width:{type:Number,required:!0},height:{type:Number,required:!0},outline:{type:Object},radius:{type:String,default:"0"}},setup:function(e){var t=st(Object(o["toRef"])(e,"outline")),n=t.outlineWidth,c=t.outlineStyle,a=t.outlineColor;return{outlineWidth:n,outlineStyle:c,outlineColor:a}}});n("0a56");dt.render=at,dt.__scopeId="data-v-7714d164";var pt=dt,ft=Object(o["withScopeId"])("data-v-46fac852"),mt=ft((function(e,t,n,c,a,i){var r=Object(o["resolveComponent"])("SvgWrapper");return e.outline?(Object(o["openBlock"])(),Object(o["createBlock"])(r,{key:0,class:"image-ellipse-outline",overflow:"visible",width:e.width,height:e.height},{default:ft((function(){return[Object(o["createVNode"])("ellipse",{"vector-effect":"non-scaling-stroke","stroke-linecap":"butt","stroke-miterlimit":"8","stroke-linejoin":"",fill:"transparent",cx:e.width/2,cy:e.height/2,rx:e.width/2,ry:e.height/2,stroke:e.outlineColor,"stroke-width":e.outlineWidth,"stroke-dasharray":"dashed"===e.outlineStyle?"12 9":"0 0"},null,8,["cx","cy","rx","ry","stroke","stroke-width","stroke-dasharray"])]})),_:1},8,["width","height"])):Object(o["createCommentVNode"])("",!0)})),ht=Object(o["defineComponent"])({name:"image-ellipse-outline",components:{SvgWrapper:ut},props:{width:{type:Number,required:!0},height:{type:Number,required:!0},outline:{type:Object}},setup:function(e){var t=st(Object(o["toRef"])(e,"outline")),n=t.outlineWidth,c=t.outlineStyle,a=t.outlineColor;return{outlineWidth:n,outlineStyle:c,outlineColor:a}}});n("494d");ht.render=mt,ht.__scopeId="data-v-46fac852";var vt=ht,bt=Object(o["withScopeId"])("data-v-516342b7"),Ot=bt((function(e,t,n,c,a,i){var r=Object(o["resolveComponent"])("SvgWrapper");return e.outline?(Object(o["openBlock"])(),Object(o["createBlock"])(r,{key:0,class:"image-polygon-outline",overflow:"visible",width:e.width,height:e.height},{default:bt((function(){return[Object(o["createVNode"])("path",{"vector-effect":"non-scaling-stroke","stroke-linecap":"butt","stroke-miterlimit":"8","stroke-linejoin":"",fill:"transparent",d:e.createPath(e.width,e.height),stroke:e.outlineColor,"stroke-width":e.outlineWidth,"stroke-dasharray":"dashed"===e.outlineStyle?"12 9":"0 0"},null,8,["d","stroke","stroke-width","stroke-dasharray"])]})),_:1},8,["width","height"])):Object(o["createCommentVNode"])("",!0)})),gt=Object(o["defineComponent"])({name:"image-polygon-outline",components:{SvgWrapper:ut},props:{width:{type:Number,required:!0},height:{type:Number,required:!0},outline:{type:Object},createPath:{type:Function,required:!0}},setup:function(e){var t=st(Object(o["toRef"])(e,"outline")),n=t.outlineWidth,c=t.outlineStyle,a=t.outlineColor;return{outlineWidth:n,outlineStyle:c,outlineColor:a}}});n("e682");gt.render=Ot,gt.__scopeId="data-v-516342b7";var jt=gt,St=Object(o["defineComponent"])({name:"editable-element-image",components:{ImageRectOutline:pt,ImageEllipseOutline:vt,ImagePolygonOutline:jt},props:{elementInfo:{type:Object,required:!0},selectElement:{type:Function,required:!0},contextmenus:{type:Function}},setup:function(e){var t=Object(o["computed"])((function(){return e.elementInfo.shadow})),n=ot(t),c=n.shadowStyle,a=function(t){e.elementInfo.lock||(t.stopPropagation(),e.selectElement(t,e.elementInfo))},i=Object(o["computed"])((function(){if(!e.elementInfo||!e.elementInfo.clip)return nt.rect;var t=e.elementInfo.clip.shape||Je.RECT;return nt[t]})),r=Object(o["computed"])((function(){if(!e.elementInfo||!e.elementInfo.clip)return{top:"0",left:"0",width:"100%",height:"100%"};var t=Object(tt["a"])(e.elementInfo.clip.range,2),n=t[0],o=t[1],c=(o[0]-n[0])/100,a=(o[1]-n[1])/100,i=n[0]/c,r=n[1]/a;return{left:-i+"%",top:-r+"%",width:100/c+"%",height:100/a+"%"}})),l=Object(o["computed"])((function(){if(!e.elementInfo.filters)return"";for(var t="",n=0,o=Object.keys(e.elementInfo.filters);n<o.length;n++){var c=o[n];t+="".concat(c,"(").concat(e.elementInfo.filters[c],") ")}return t})),u=Object(o["computed"])((function(){if(!e.elementInfo.flip)return"";var t=e.elementInfo.flip,n=t.x,o=t.y;return n&&o?"rotateX(".concat(n,"deg) rotateY(").concat(o,"deg)"):n?"rotateX(".concat(n,"deg)"):o?"rotateY(".concat(o,"deg)"):""}));return{shadowStyle:c,handleSelectElement:a,clipShape:i,imgPosition:r,filter:l,flip:u}}});n("ea06");St.render=et,St.__scopeId="data-v-7980a6e9";var Et=St,It=Object(o["withScopeId"])("data-v-32fe5950"),yt=It((function(e,t,n,c,a,i){var r=Object(o["resolveComponent"])("ElementOutline");return Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:["editable-element-text",{lock:e.elementInfo.lock}],style:{top:e.elementInfo.top+"px",left:e.elementInfo.left+"px",width:e.elementInfo.width+"px",transform:"rotate(".concat(e.elementInfo.rotate,"deg)")},onMousedown:t[2]||(t[2]=function(t){return e.handleSelectElement(t)})},[Object(o["createVNode"])("div",{class:"element-content",style:{backgroundColor:e.elementInfo.fill,opacity:e.elementInfo.opacity,textShadow:e.shadowStyle}},[Object(o["createVNode"])(r,{width:e.elementInfo.width,height:e.elementInfo.height,outline:e.elementInfo.outline},null,8,["width","height","outline"]),Object(o["createVNode"])("div",{class:"text",innerHTML:e.elementInfo.content,contenteditable:!e.elementInfo.lock,onMousedown:t[1]||(t[1]=function(t){return e.handleSelectElement(t,!1)})},null,40,["innerHTML","contenteditable"])],4)],38)})),Tt=Object(o["withScopeId"])("data-v-138fe760"),wt=Tt((function(e,t,n,c,a,i){var r=Object(o["resolveComponent"])("SvgWrapper");return e.outline?(Object(o["openBlock"])(),Object(o["createBlock"])(r,{key:0,class:"element-outline",overflow:"visible",width:e.width,height:e.height},{default:Tt((function(){return[Object(o["createVNode"])("path",{"vector-effect":"non-scaling-stroke","stroke-linecap":"butt","stroke-miterlimit":"8","stroke-linejoin":"",fill:"transparent",d:"M0,0 L".concat(e.width,",0 L").concat(e.width,",").concat(e.height," L0,").concat(e.height," Z"),stroke:e.outlineColor,"stroke-width":e.outlineWidth,"stroke-dasharray":"dashed"===e.outlineStyle?"12 9":"0 0"},null,8,["d","stroke","stroke-width","stroke-dasharray"])]})),_:1},8,["width","height"])):Object(o["createCommentVNode"])("",!0)})),_t=Object(o["defineComponent"])({name:"element-outline",components:{SvgWrapper:ut},props:{width:{type:Number,required:!0},height:{type:Number,required:!0},outline:{type:Object}},setup:function(e){var t=st(Object(o["toRef"])(e,"outline")),n=t.outlineWidth,c=t.outlineStyle,a=t.outlineColor;return{outlineWidth:n,outlineStyle:c,outlineColor:a}}});n("aa47");_t.render=wt,_t.__scopeId="data-v-138fe760";var xt=_t,kt=Object(o["defineComponent"])({name:"editable-element-text",components:{ElementOutline:xt},props:{elementInfo:{type:Object,required:!0},selectElement:{type:Function,required:!0},contextmenus:{type:Function}},setup:function(e){var t=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.elementInfo.lock||(t.stopPropagation(),e.selectElement(t,e.elementInfo,n))},n=Object(o["computed"])((function(){return e.elementInfo.shadow})),c=ot(n),a=c.shadowStyle;return{handleSelectElement:t,shadowStyle:a}}});n("e22f");kt.render=yt,kt.__scopeId="data-v-32fe5950";var Lt=kt,Mt=Object(o["defineComponent"])({name:"editable-element",props:{elementInfo:{type:Object,required:!0},elementIndex:{type:Number,required:!0},isMultiSelect:{type:Boolean,required:!0},selectElement:{type:Function,required:!0}},setup:function(e){var t=Object(o["computed"])((function(){var t={image:Et,text:Lt};return t[e.elementInfo.type]||null})),n=Ze(),c=(n.orderElement,Qe()),a=(c.alignElementToCanvas,re()),i=(a.combineElements,a.uncombineElements,ie()),r=(i.deleteElement,ae()),l=(r.lockElement,r.unlockElement,le()),u=(l.copyElement,l.cutElement,function(){return e.elementInfo.lock?[{}]:[]});return{currentElementComponent:t,contextmenus:u}}});Mt.render=We;var At=Mt,Ct=Object(o["withScopeId"])("data-v-9a95dde2"),Nt=Ct((function(e,t,n,c,a,i){return Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:"mouse-selection quadrant-".concat(n.quadrant),style:{top:n.top+"px",left:n.left+"px",width:n.width+"px",height:n.height+"px"}},null,6)})),Bt={name:"mouse-selection",props:{top:{type:Number,required:!0},left:{type:Number,required:!0},width:{type:Number,required:!0},height:{type:Number,required:!0},quadrant:{type:Number,required:!0,validator:function(e){return[1,2,3,4].includes(e)}}}};n("4a14");Bt.render=Nt,Bt.__scopeId="data-v-9a95dde2";var Dt=Bt,Pt=Object(o["withScopeId"])("data-v-0abf6edf"),Rt=Pt((function(e,t,n,c,a,i){var r=Object(o["resolveComponent"])("GridLines");return Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:"slide-background",style:e.backgroundStyle},[e.showGridLines?(Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],{key:0},[Object(o["createVNode"])(r),Object(o["createVNode"])(r,{gridSize:100,gridColor:"rgba(100, 100, 100, 0.3)"})],64)):Object(o["createCommentVNode"])("",!0)],4)})),Ht=Object(o["withScopeId"])("data-v-7879d934"),Ft=Ht((function(e,t,n,c,a,i){return Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:"grid-lines",style:e.style},null,4)})),Vt=Object(o["defineComponent"])({name:"grid-lines",props:{gridSize:{type:Number,default:20},gridColor:{type:String,default:"rgba(100, 100, 100, 0.2)"}},setup:function(e){var t=Object(o["computed"])((function(){var t=e.gridSize+"px",n=e.gridSize-1+"px",o=e.gridColor;return{backgroundImage:"linear-gradient(transparent ".concat(n,", ").concat(o," ").concat(n,", ").concat(o," ").concat(t,"), linear-gradient(90deg, transparent ").concat(n,", ").concat(o," ").concat(n,", ").concat(o," ").concat(t,")"),backgroundSize:"".concat(t," ").concat(t)}}));return{style:t}}});n("f26f");Vt.render=Ft,Vt.__scopeId="data-v-7879d934";var Gt=Vt,qt=function(e){var t=Object(o["computed"])((function(){if(!e.value)return{backgroundColor:"#fff"};var t=e.value,n=t.type,o=t.value;return"solid"===n?{backgroundColor:o}:"image"===n?{backgroundImage:"url(".concat(o)}:{backgroundColor:"#fff"}}));return{backgroundStyle:t}},Yt=Object(o["defineComponent"])({name:"slide-background",components:{GridLines:Gt},setup:function(){var e=Object(r["b"])(),t=Object(o["computed"])((function(){return e.state.showGridLines})),n=Object(o["computed"])((function(){return e.getters.currentSlide.background})),c=qt(n),a=c.backgroundStyle;return{showGridLines:t,backgroundStyle:a}}});n("b8d1");Yt.render=Rt,Yt.__scopeId="data-v-0abf6edf";var zt=Yt,Xt=Object(o["withScopeId"])("data-v-4e4decb0"),Ut=Xt((function(e,t,n,c,a,i){return Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:"alignment-line",style:{left:e.left,top:e.top}},[Object(o["createVNode"])("div",{class:["line",e.type],style:e.sizeStyle},null,6)],4)})),Wt=Object(o["defineComponent"])({name:"alignment-line",props:{type:{type:String,required:!0},axis:{type:Object,required:!0},length:{type:Number,required:!0}},setup:function(e){var t=Object(r["b"])(),n=Object(o["computed"])((function(){return t.state.canvasScale}));Object(o["computed"])((function(){return e.axis.x*n.value+"px"})),Object(o["computed"])((function(){return e.axis.y*n.value+"px"})),Object(o["computed"])((function(){return"vertical"===e.type?{height:e.length*n.value+"px"}:{width:e.length*n.value+"px"}}));return{}}});n("fd18");Wt.render=Ut,Wt.__scopeId="data-v-4e4decb0";var Jt=Wt,Kt=Object(o["withScopeId"])("data-v-693e74ed"),Zt=Kt((function(e,t,n,c,a,i){var r=Object(o["resolveComponent"])("BorderLine"),l=Object(o["resolveComponent"])("ResizeHandler");return Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:"multi-select-operate",style:{left:e.minX*e.canvasScale+"px",top:e.minY*e.canvasScale+"px"}},[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.borderLines,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])(r,{key:e.type,type:e.type,style:e.style},null,8,["type","style"])})),128)),e.disableResize?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],{key:0},Object(o["renderList"])(e.resizeHandlers,(function(t){return Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:t.direction,type:t.direction,style:t.style,onMousedown:Object(o["withModifiers"])((function(n){return e.scaleMultiElement(n,{minX:e.minX,maxX:e.maxX,minY:e.minY,maxY:e.maxY},t.direction)}),["stop"])},null,8,["type","style","onMousedown"])})),128))],4)})),Qt=function(e,t){var n=Object(o["computed"])((function(){return[{direction:Me.LEFT_TOP,style:{}},{direction:Me.TOP,style:{left:e.value/2+"px"}},{direction:Me.RIGHT_TOP,style:{left:e.value+"px"}},{direction:Me.LEFT,style:{top:t.value/2+"px"}},{direction:Me.RIGHT,style:{left:e.value+"px",top:t.value/2+"px"}},{direction:Me.LEFT_BOTTOM,style:{top:t.value+"px"}},{direction:Me.BOTTOM,style:{left:e.value/2+"px",top:t.value+"px"}},{direction:Me.RIGHT_BOTTOM,style:{left:e.value+"px",top:t.value+"px"}}]})),c=Object(o["computed"])((function(){return[{direction:Me.LEFT,style:{top:t.value/2+"px"}},{direction:Me.RIGHT,style:{left:e.value+"px",top:t.value/2+"px"}}]})),a=Object(o["computed"])((function(){return[{type:Le.T,style:{width:e.value+"px"}},{type:Le.B,style:{top:t.value+"px",width:e.value+"px"}},{type:Le.L,style:{height:t.value+"px"}},{type:Le.R,style:{left:e.value+"px",height:t.value+"px"}}]}));return{resizeHandlers:n,textElementResizeHandlers:c,borderLines:a}},$t=Object(o["withScopeId"])("data-v-2400f56e"),en=$t((function(e,t,n,c,a,i){return Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:["resize-handler",n.type]},null,2)})),tn={name:"resize-handler",props:{type:{type:String,required:!0}}};n("4b70");tn.render=en,tn.__scopeId="data-v-2400f56e";var nn=tn,on=Object(o["withScopeId"])("data-v-2a7ad812"),cn=on((function(e,t,n,c,a,i){return Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:["border-line",n.type,{wide:n.isWide}]},null,2)})),an={name:"border-line",props:{type:{},isWide:{type:Boolean,default:!1}}};n("cd87");an.render=cn,an.__scopeId="data-v-2a7ad812";var rn=an,ln=Object(o["defineComponent"])({name:"multi-select-operate",components:{ResizeHandler:nn,BorderLine:rn},props:{elementList:{type:Array,required:!0},scaleMultiElement:{type:Function,required:!0}},setup:function(e){var t=Object(r["b"])(),n=Object(o["computed"])((function(){return t.state.activeElementIdList})),c=Object(o["computed"])((function(){return t.state.canvasScale})),a=Object(o["computed"])((function(){return e.elementList.filter((function(e){return n.value.includes(e.id)}))})),i=Object(o["reactive"])({minX:0,maxX:0,minY:0,maxY:0}),l=Object(o["computed"])((function(){return(i.maxX-i.minX)*c.value})),u=Object(o["computed"])((function(){return(i.maxY-i.minY)*c.value})),s=Qt(l,u),d=s.resizeHandlers,p=s.borderLines,f=Object(o["computed"])((function(){return a.value.some((function(e){return!!(e.type!==N.IMAGE&&e.type!==N.SHAPE||e.rotate)}))})),m=function(){var e=Ne(a.value),t=e.minX,n=e.maxX,o=e.minY,c=e.maxY;i.minX=t,i.maxX=n,i.minY=o,i.maxY=c};return Object(o["watchEffect"])(m),Object(S["a"])(Object(S["a"])({},Object(o["toRefs"])(i)),{},{canvasScale:c,borderLines:p,disableResize:f,resizeHandlers:d})}});n("d7a3");ln.render=Zt,ln.__scopeId="data-v-693e74ed";var un=ln,sn=Object(o["withScopeId"])("data-v-3a032a14");Object(o["pushScopeId"])("data-v-3a032a14");var dn={key:0,class:"animation-index"};Object(o["popScopeId"])();var pn=sn((function(e,t,n,c,a,i){return Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:"operate",style:{top:e.elementInfo.top*e.canvasScale+"px",left:e.elementInfo.left*e.canvasScale+"px",transform:"rotate(".concat(e.elementInfo.rotate,"deg)"),"transform-origin":"".concat(e.elementInfo.width*e.canvasScale/2,"px ").concat(e.elementInfo.height*e.canvasScale/2,"px")}},[(Object(o["openBlock"])(),Object(o["createBlock"])(Object(o["resolveDynamicComponent"])(e.currentOperateComponent),{elementInfo:e.elementInfo,isSelected:e.isSelected,isActive:e.isActive,isActiveGroupElement:e.isActiveGroupElement,isMultiSelect:e.isMultiSelect,animationIndex:e.elementIndexInAnimation,rotateElement:e.rotateElement,scaleElement:e.scaleElement},null,8,["elementInfo","isSelected","isActive","isActiveGroupElement","isMultiSelect","animationIndex","rotateElement","scaleElement"])),"animation"===e.toolbarState&&-1!==e.elementIndexInAnimation?(Object(o["openBlock"])(),Object(o["createBlock"])("div",dn,Object(o["toDisplayString"])(e.elementIndexInAnimation+1),1)):Object(o["createCommentVNode"])("",!0)],4)})),fn=Object(o["withScopeId"])("data-v-378f5cf2"),mn=fn((function(e,t,n,c,a,i){var r=Object(o["resolveComponent"])("ImageClipHandler"),l=Object(o["resolveComponent"])("BorderLine"),u=Object(o["resolveComponent"])("ResizeHandler"),s=Object(o["resolveComponent"])("RotateHandler");return e.isCliping?(Object(o["openBlock"])(),Object(o["createBlock"])(r,{key:0,src:e.elementInfo.src,clipData:e.elementInfo.clip,canvasScale:e.canvasScale,width:e.elementInfo.width,height:e.elementInfo.height,top:e.elementInfo.top,left:e.elementInfo.left,clipPath:e.clipShape.style,onClip:t[1]||(t[1]=function(t){return e.clip(t)})},null,8,["src","clipData","canvasScale","width","height","top","left","clipPath"])):(Object(o["openBlock"])(),Object(o["createBlock"])("div",{key:1,class:["image-element-operate",{selected:e.isSelected,"multi-select":e.isMultiSelect&&e.isSelected,active:e.isActive}]},[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.borderLines,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])(l,{class:"operate-border-line",key:e.type,type:e.type,style:e.style},null,8,["type","style"])})),128)),e.elementInfo.lock||!e.isActiveGroupElement&&e.isMultiSelect?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],{key:0},[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.resizeHandlers,(function(t){return Object(o["openBlock"])(),Object(o["createBlock"])(u,{class:"operate-resize-handler",key:t.direction,type:t.direction,style:t.style,onMousedown:Object(o["withModifiers"])((function(n){return e.scaleElement(n,e.elementInfo,t.direction)}),["stop"])},null,8,["type","style","onMousedown"])})),128)),Object(o["createVNode"])(s,{class:"operate-rotate-handler",style:{left:e.scaleWidth/2+"px"},onMousedown:t[2]||(t[2]=Object(o["withModifiers"])((function(t){return e.rotateElement(e.elementInfo)}),["stop"]))},null,8,["style"])],64))],2))})),hn=Object(o["withScopeId"])("data-v-63651762");Object(o["pushScopeId"])("data-v-63651762");var vn={class:"rotate-handler"};Object(o["popScopeId"])();var bn=hn((function(e,t,n,c,a,i){return Object(o["openBlock"])(),Object(o["createBlock"])("div",vn)})),On={name:"rotate-handler"};n("d569");On.render=bn,On.__scopeId="data-v-63651762";var gn=On,jn=Object(o["withScopeId"])("data-v-5cf013bf");Object(o["pushScopeId"])("data-v-5cf013bf");var Sn=Object(o["createVNode"])("path",{d:"M 12 0 L 0 0 L 0 12 L 3 12 L 3 3 L 12 3 L 12 0 Z"},null,-1);Object(o["popScopeId"])();var En=jn((function(e,t,n,c,a,i){var r=Object(o["resolveComponent"])("SvgWrapper"),l=Object(o["resolveDirective"])("click-outside");return Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:"image-clip-handler",style:e.clipWrapperPositionStyle},[Object(o["createVNode"])("img",{class:"bottom-img",src:e.src,draggable:!1,alt:"",style:e.bottomImgPositionStyle},null,12,["src"]),Object(o["createVNode"])("div",{class:"top-image-content",style:Object(S["a"])(Object(S["a"])({},e.topImgWrapperPositionStyle),{},{clipPath:e.clipPath})},[Object(o["createVNode"])("img",{class:"top-img",src:e.src,draggable:!1,alt:"",style:e.topImgPositionStyle},null,12,["src"])],4),Object(o["createVNode"])("div",{class:"operate",style:e.topImgWrapperPositionStyle,onMousedown:t[1]||(t[1]=Object(o["withModifiers"])((function(t){return e.moveClipRange(t)}),["stop"]))},[(Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(["t-l","t-r","b-l","b-r"],(function(t){return Object(o["createVNode"])("div",{class:["clip-point",t],key:t,onMousedown:Object(o["withModifiers"])((function(n){return e.scaleClipRange(n,t)}),["stop"])},[Object(o["createVNode"])(r,{width:"12",height:"12",fill:"#fff",stroke:"#666"},{default:jn((function(){return[Sn]})),_:1})],42,["onMousedown"])})),64))],36)],4)),[[l,e.clip]])})),In=Object(o["defineComponent"])({name:"image-clip-handler",components:{SvgWrapper:ut},props:{src:{type:String,required:!0},clipData:{type:Object,required:!0},clipPath:{type:String,required:!0},canvasScale:{type:Number,required:!0},width:{type:Number,required:!0},height:{type:Number,required:!0},top:{type:Number,required:!0},left:{type:Number,required:!0}},setup:function(e,t){var n=t.emit,c=Object(o["reactive"])({top:0,left:0,width:0,height:0}),a=Object(o["reactive"])({top:"0",left:"0"}),i=Object(o["ref"])(!1),r=Object(o["ref"])(null),l=function(){var t=e.clipData?e.clipData.range:[[0,0],[100,100]],n=Object(tt["a"])(t,2),o=n[0],c=n[1],a=(c[0]-o[0])/100,i=(c[1]-o[1])/100,r=o[0]/a,l=o[1]/i;return{widthScale:a,heightScale:i,left:r,top:l}},u=Object(o["computed"])((function(){var e=l(),t=e.widthScale,n=e.heightScale,o=e.left,c=e.top;return{left:-o,top:-c,width:100/t,height:100/n}})),s=Object(o["computed"])((function(){return{top:u.value.top+"%",left:u.value.left+"%",width:u.value.width+"%",height:u.value.height+"%"}})),d=Object(o["computed"])((function(){return{top:c.top+"%",left:c.left+"%",width:c.width+"%",height:c.height+"%"}})),p=Object(o["computed"])((function(){var e=u.value.width,t=u.value.height,n=c.left,o=c.top,a=c.width,i=c.height;return{left:100/a*-n+"%",top:100/i*-o+"%",width:e/a*100+"%",height:t/i*100+"%"}})),f=function(){var e=l(),t=e.left,n=e.top;c.left=t,c.top=n,c.width=100,c.height=100,a.top=-n+"%",a.left=-t+"%"},m=function(){if(!i.value)if(r.value){var t=l(),o=t.left,a=t.top,u={left:(c.left-o)/100*e.width,top:(c.top-a)/100*e.height,width:(c.width-100)/100*e.width,height:(c.height-100)/100*e.height},s={range:r.value,position:u};n("clip",s)}else n("clip",null)},h=function(e){var t=e.key.toUpperCase();t===A.ENTER&&m()};Object(o["onMounted"])((function(){f(),document.addEventListener("keydown",h)})),Object(o["onUnmounted"])((function(){document.removeEventListener("keydown",h)}));var v=function(){var e={left:parseInt(p.value.left),top:parseInt(p.value.top),width:parseInt(p.value.width),height:parseInt(p.value.height)},t=100/e.width,n=100/e.height,o=[-e.left*t,-e.top*n],c=[100*t+o[0],100*n+o[1]];r.value=[o,c]},b=function(t){i.value=!0;var n=!0,o=t.pageX,a=t.pageY,r=u.value,l={left:c.left,top:c.top,width:c.width,height:c.height};document.onmousemove=function(t){if(n){var i=t.pageX,u=t.pageY,s=(i-o)/e.canvasScale/e.width*100,d=(u-a)/e.canvasScale/e.height*100,p=l.left+s,f=l.top+d;p<0?p=0:p+l.width>r.width&&(p=r.width-l.width),f<0?f=0:f+l.height>r.height&&(f=r.height-l.height),c.left=p,c.top=f}},document.onmouseup=function(){n=!1,document.onmousemove=null,document.onmouseup=null,v(),setTimeout((function(){i.value=!1}),0)}},O=function(t,n){i.value=!0;var o=!0,a=32/e.width*100,r=32/e.height*100,l=t.pageX,s=t.pageY,d=u.value,p={left:c.left,top:c.top,width:c.width,height:c.height};document.onmousemove=function(t){if(o){var i,u,f,m,h=t.pageX,v=t.pageY,b=(h-l)/e.canvasScale/e.width*100,O=(v-s)/e.canvasScale/e.height*100;"t-l"===n?(p.left+b<0&&(b=-p.left),p.top+O<0&&(O=-p.top),p.width-b<a&&(b=p.width-a),p.height-O<r&&(O=p.height-r),f=p.width-b,m=p.height-O,i=p.left+b,u=p.top+O):"t-r"===n?(p.left+p.width+b>d.width&&(b=d.width-(p.left+p.width)),p.top+O<0&&(O=-p.top),p.width+b<a&&(b=a-p.width),p.height-O<r&&(O=p.height-r),f=p.width+b,m=p.height-O,i=p.left,u=p.top+O):"b-l"===n?(p.left+b<0&&(b=-p.left),p.top+p.height+O>d.height&&(O=d.height-(p.top+p.height)),p.width-b<a&&(b=p.width-a),p.height+O<r&&(O=r-p.height),f=p.width-b,m=p.height+O,i=p.left+b,u=p.top):(p.left+p.width+b>d.width&&(b=d.width-(p.left+p.width)),p.top+p.height+O>d.height&&(O=d.height-(p.top+p.height)),p.width+b<a&&(b=a-p.width),p.height+O<r&&(O=r-p.height),f=p.width+b,m=p.height+O,i=p.left,u=p.top),c.left=i,c.top=u,c.width=f,c.height=m}},document.onmouseup=function(){o=!1,document.onmousemove=null,document.onmouseup=null,v(),setTimeout((function(){return i.value=!1}),0)}};return{clipWrapperPositionStyle:a,bottomImgPositionStyle:s,topImgWrapperPositionStyle:d,topImgPositionStyle:p,clip:m,moveClipRange:b,scaleClipRange:O}}});n("dda4");In.render=En,In.__scopeId="data-v-5cf013bf";var yn=In,Tn=Object(o["defineComponent"])({name:"image-element-operate",components:{RotateHandler:gn,ResizeHandler:nn,BorderLine:rn,ImageClipHandler:yn},props:{elementInfo:{type:Object,required:!0},isSelected:{type:Boolean,required:!0},isActive:{type:Boolean,required:!0},isActiveGroupElement:{type:Boolean,required:!0},isMultiSelect:{type:Boolean,required:!0},rotateElement:{type:Function,required:!0},scaleElement:{type:Function,required:!0}},setup:function(e){var t=Object(r["b"])(),n=Object(o["computed"])((function(){return t.state.canvasScale})),c=Object(o["computed"])((function(){return e.elementInfo.width*n.value})),a=Object(o["computed"])((function(){return e.elementInfo.height*n.value})),i=Qt(c,a),l=i.resizeHandlers,u=i.borderLines,s=Object(o["ref"])(""),d=Object(o["computed"])((function(){return s.value===e.elementInfo.id})),p=function(t){if(s.value="",t){var n=t.range,o=t.position,c=e.elementInfo.clip||{},a={clip:Object(S["a"])(Object(S["a"])({},c),{},{range:n}),left:e.elementInfo.left+o.left,top:e.elementInfo.top+o.top,width:e.elementInfo.width+o.width,height:e.elementInfo.height+o.height};console.log(a)}};return{scaleWidth:c,resizeHandlers:l,borderLines:u,isCliping:d,clip:p}}});n("0f90");Tn.render=mn,Tn.__scopeId="data-v-378f5cf2";var wn=Tn,_n=Object(o["withScopeId"])("data-v-a0695f48"),xn=_n((function(e,t,n,c,a,i){var r=Object(o["resolveComponent"])("BorderLine"),l=Object(o["resolveComponent"])("ResizeHandler"),u=Object(o["resolveComponent"])("RotateHandler");return Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:["text-element-operate",{selected:e.isSelected,"multi-select":e.isMultiSelect&&e.isSelected,active:e.isActive}]},[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.borderLines,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])(r,{class:"operate-border-line",key:e.type,type:e.type,style:e.style},null,8,["type","style"])})),128)),e.elementInfo.lock||!e.isActiveGroupElement&&e.isMultiSelect?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],{key:0},[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.textElementResizeHandlers,(function(t){return Object(o["openBlock"])(),Object(o["createBlock"])(l,{class:"operate-resize-handler",key:t.direction,type:t.direction,style:t.style,onMousedown:Object(o["withModifiers"])((function(n){return e.scaleElement(n,e.elementInfo,t.direction)}),["stop"])},null,8,["type","style","onMousedown"])})),128)),Object(o["createVNode"])(u,{class:"operate-rotate-handler",style:{left:e.scaleWidth/2+"px"},onMousedown:t[1]||(t[1]=Object(o["withModifiers"])((function(t){return e.rotateElement(e.elementInfo)}),["stop"]))},null,8,["style"])],64))],2)})),kn=Object(o["defineComponent"])({name:"text-element-operate",components:{RotateHandler:gn,ResizeHandler:nn,BorderLine:rn},props:{elementInfo:{type:Object,required:!0},isSelected:{type:Boolean,required:!0},isActive:{type:Boolean,required:!0},isActiveGroupElement:{type:Boolean,required:!0},isMultiSelect:{type:Boolean,required:!0},rotateElement:{type:Function,required:!0},scaleElement:{type:Function,required:!0}},setup:function(e){var t=Object(r["b"])(),n=Object(o["computed"])((function(){return t.state.canvasScale})),c=Object(o["computed"])((function(){return e.elementInfo.width*n.value})),a=Object(o["computed"])((function(){return e.elementInfo.height*n.value})),i=Qt(c,a),l=i.textElementResizeHandlers,u=i.borderLines;return{scaleWidth:c,textElementResizeHandlers:l,borderLines:u}}});n("2769");kn.render=xn,kn.__scopeId="data-v-a0695f48";var Ln=kn,Mn=Object(o["defineComponent"])({name:"operate",props:{elementInfo:{type:Object,required:!0},isSelected:{type:Boolean,required:!0},isActive:{type:Boolean,required:!0},isActiveGroupElement:{type:Boolean,required:!0},isMultiSelect:{type:Boolean,required:!0},rotateElement:{type:Function,required:!0},scaleElement:{type:Function,required:!0}},setup:function(e){var t=Object(r["b"])(),n=Object(o["computed"])((function(){return t.state.canvasScale})),c=Object(o["computed"])((function(){return t.state.toolbarState})),a=Object(o["computed"])((function(){return t.getters.currentSlide})),i=Object(o["computed"])((function(){var t={image:wn,text:Ln};return t[e.elementInfo.type]||null})),l=Object(o["computed"])((function(){var t=a.value.animations||[];return t.findIndex((function(t){return t.elId===e.elementInfo.id}))}));return{currentOperateComponent:i,canvasScale:n,toolbarState:c,elementIndexInAnimation:l}}});n("f079");Mn.render=pn,Mn.__scopeId="data-v-3a032a14";var An=Mn,Cn=Object(o["defineComponent"])({name:"editor-canvas",components:{EditableElement:At,MouseSelection:Dt,SlideBackground:zt,AlignmentLine:Jt,MultiSelectOperate:un,Operate:An},setup:function(){var e=Object(r["b"])(),t=Object(o["computed"])((function(){return e.state.activeElementIdList})),n=Object(o["computed"])((function(){return e.state.handleElementId})),c=Object(o["computed"])((function(){return e.state.editorAreaFocus})),i=Object(o["computed"])((function(){return e.state.ctrlKeyState})),l=Object(o["computed"])((function(){return e.getters.ctrlOrShiftKeyActive})),u=Object(o["ref"])(null),s=Object(o["ref"])(!1),d=Object(o["ref"])([]),p=Object(o["ref"])("");Object(o["watch"])(n,(function(){return p.value=""}));var f=Object(o["computed"])((function(){return e.getters.currentSlide})),m=Object(o["ref"])([]),h=function(){m.value=f.value?JSON.parse(JSON.stringify(f.value.elements)):[]};Object(o["watchEffect"])(h),Pe(u);var v=Object(o["ref"])(null),b=Object(o["computed"])((function(){return e.state.canvasScale})),O=_e(v),g=O.viewportStyles,j=De(m,u),S=j.mouseSelectionState,E=j.updateMouseSelection,I=Xe(m,p,d),y=I.dragElement,T=ze(m,p,y),w=T.selectElement,_=Ge(m,p,d),x=_.scaleElement,k=_.scaleMultiElement,L=He(m,u),M=L.rotateElement,A=ue(),C=(A.selectAllElement,ie()),N=(C.deleteAllElements,le()),B=(N.pasteElement,function(t){e.commit(a.SET_ACTIVE_ELEMENT_ID_LIST,[]),l.value||E(t),c.value||e.commit(a.SET_EDITORAREA_FOCUS,!0)}),D=function(){c.value&&e.commit(a.SET_EDITORAREA_FOCUS,!1)},P=Ue(),R=P.scaleCanvas,H=te()(R,100,{leading:!0,trailing:!1}),F=function(e){i.value&&(e.preventDefault(),e.deltaY>0?H("-"):e.deltaY<0&&H("+"))},V=function(){return[]};return{elementList:m,activeElementIdList:t,handleElementId:n,activeGroupElementId:p,canvasRef:v,viewportRef:u,viewportStyles:g,canvasScale:b,mouseSelectionState:S,handleClickBlankArea:B,removeEditorAreaFocus:D,currentSlide:f,isShowGridLines:s,alignmentLines:d,selectElement:w,rotateElement:M,scaleElement:x,scaleMultiElement:k,mousewheelScaleCanvas:F,contextmenus:V}}});n("579f");Cn.render=we,Cn.__scopeId="data-v-4a95a75c";var Nn=Cn,Bn=Object(o["withScopeId"])("data-v-5c025ef8");Object(o["pushScopeId"])("data-v-5c025ef8");var Dn={class:"canvas-tool"},Pn={class:"left-handler"},Rn={class:"add-element-handler"};Object(o["popScopeId"])();var Hn=Bn((function(e,t,n,c,a,i){var r=Object(o["resolveComponent"])("IconFont");return Object(o["openBlock"])(),Object(o["createBlock"])("div",Dn,[Object(o["createVNode"])("div",Pn,[Object(o["createVNode"])(r,{class:["handler-item",{disable:!e.canUndo}],type:"icon-undo",onClick:t[1]||(t[1]=function(t){return e.undo()})},null,8,["class"]),Object(o["createVNode"])(r,{class:["handler-item",{disable:!e.canRedo}],type:"icon-redo",onClick:t[2]||(t[2]=function(t){return e.redo()})},null,8,["class"])]),Object(o["createVNode"])("div",Rn,[Object(o["createVNode"])(r,{class:"handler-item",type:"icon-font-size"}),Object(o["createVNode"])(r,{class:"handler-item",type:"icon-image"})])])})),Fn=Object(o["defineComponent"])({name:"canvas-tool",setup:function(){var e=Object(r["b"])(),t=Object(o["computed"])((function(){return e.state.canvasScale})),n=Object(o["computed"])((function(){return e.state.showGridLines})),c=Object(o["computed"])((function(){return e.getters.canUndo})),i=Object(o["computed"])((function(){return e.getters.canRedo})),l=Object(o["computed"])((function(){return parseInt(100*t.value+"")+"%"})),u=Ue(),s=u.scaleCanvas,d=ne(),p=d.redo,f=d.undo,m=function(){e.commit(a.SET_GRID_LINES_STATE,!n.value)};return{scaleCanvas:s,canvasScalePercentage:l,toggleGridLines:m,canUndo:c,canRedo:i,redo:p,undo:f}}});n("9051");Fn.render=Hn,Fn.__scopeId="data-v-5c025ef8";var Vn=Fn,Gn=Object(o["withScopeId"])("data-v-5e126f4f");Object(o["pushScopeId"])("data-v-5e126f4f");var qn={class:"add-slide"},Yn={class:"slide-index"},zn={class:"thumbnail"};Object(o["popScopeId"])();var Xn=Gn((function(e,t,n,c,a,i){var r=Object(o["resolveComponent"])("ThumbnailSlide"),l=Object(o["resolveComponent"])("draggable"),u=Object(o["resolveDirective"])("click-outside");return Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:"thumbnails",onMousedown:t[2]||(t[2]=function(){return e.setThumbnailsFocus(!0)})},[Object(o["createVNode"])("div",qn,[Object(o["createVNode"])("span",{onClick:t[1]||(t[1]=function(t){return e.createSlide()})},"+ 添加幻灯片")]),Object(o["createVNode"])(l,{class:"thumbnail-list",modelValue:e.slides,animation:300,scroll:!0,scrollSensitivity:50,onEnd:e.handleDragEnd,itemKey:"id"},{item:Gn((function(t){var n=t.element,c=t.index;return[Object(o["createVNode"])("div",{class:["thumbnail-wrapper",{active:e.slideIndex===c}],onMousedown:function(t){return e.changSlideIndex(c)}},[Object(o["createVNode"])("div",Yn,Object(o["toDisplayString"])(e.fillDigit(c+1,2)),1),Object(o["createVNode"])("div",zn,[Object(o["createVNode"])(r,{slide:n,size:120},null,8,["slide"])])],42,["onMousedown"])]})),_:1},8,["modelValue","onEnd"])],544)),[[u,function(){return e.setThumbnailsFocus(!1)}]])})),Un=n("b76a"),Wn=n.n(Un),Jn=Object(o["withScopeId"])("data-v-1abbc471"),Kn=Jn((function(e,t,n,c,a,i){var r=Object(o["resolveComponent"])("ThumbnailElement");return Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:"thumbnail-slide",style:{width:e.size+"px",height:e.size*e.VIEWPORT_ASPECT_RATIO+"px"}},[Object(o["createVNode"])("div",{class:"elements-wrapper",style:{width:e.VIEWPORT_SIZE+"px",height:e.VIEWPORT_SIZE*e.VIEWPORT_ASPECT_RATIO+"px",transform:"scale(".concat(e.size/e.VIEWPORT_SIZE,")")}},[Object(o["createVNode"])("div",{class:"background",style:Object(S["a"])({},e.backgroundStyle)},null,4),(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.slide.elements,(function(e,t){return Object(o["openBlock"])(),Object(o["createBlock"])(r,{key:e.id,elementInfo:e,elementIndex:t+1},null,8,["elementInfo","elementIndex"])})),128))],4)],4)}));function Zn(e,t,n,c,a,i){return Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:"base-element",style:{zIndex:e.elementIndex}},[(Object(o["openBlock"])(),Object(o["createBlock"])(Object(o["resolveDynamicComponent"])(e.currentElementComponent),{elementInfo:e.elementInfo},null,8,["elementInfo"]))],4)}var Qn=Object(o["withScopeId"])("data-v-008489be"),$n=Qn((function(e,t,n,c,a,i){var r=Object(o["resolveComponent"])("ImageRectOutline"),l=Object(o["resolveComponent"])("ImageEllipseOutline"),u=Object(o["resolveComponent"])("ImagePolygonOutline");return Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:"base-element-image",style:{top:e.elementInfo.top+"px",left:e.elementInfo.left+"px",width:e.elementInfo.width+"px",height:e.elementInfo.height+"px",transform:"rotate(".concat(e.elementInfo.rotate,"deg)")}},[Object(o["createVNode"])("div",{class:"element-content",style:{filter:e.shadowStyle?"drop-shadow(".concat(e.shadowStyle,")"):"",transform:e.flip}},["rect"===e.clipShape.type?(Object(o["openBlock"])(),Object(o["createBlock"])(r,{key:0,width:e.elementInfo.width,height:e.elementInfo.height,radius:e.clipShape.radius,outline:e.elementInfo.outline},null,8,["width","height","radius","outline"])):"ellipse"===e.clipShape.type?(Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:1,width:e.elementInfo.width,height:e.elementInfo.height,outline:e.elementInfo.outline},null,8,["width","height","outline"])):"polygon"===e.clipShape.type?(Object(o["openBlock"])(),Object(o["createBlock"])(u,{key:2,width:e.elementInfo.width,height:e.elementInfo.height,createPath:e.clipShape.createPath,outline:e.elementInfo.outline},null,8,["width","height","createPath","outline"])):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])("div",{class:"image-content",style:{clipPath:e.clipShape.style}},[Object(o["createVNode"])("img",{src:e.elementInfo.src,draggable:!1,style:{top:e.imgPosition.top,left:e.imgPosition.left,width:e.imgPosition.width,height:e.imgPosition.height,filter:e.filter},alt:""},null,12,["src"])],4)],4)],4)})),eo=Object(o["defineComponent"])({name:"base-element-image",components:{ImageRectOutline:pt,ImageEllipseOutline:vt,ImagePolygonOutline:jt},props:{elementInfo:{type:Object,required:!0}},setup:function(e){var t=Object(o["computed"])((function(){if(!e.elementInfo||!e.elementInfo.clip)return{top:"0",left:"0",width:"100%",height:"100%"};var t=Object(tt["a"])(e.elementInfo.clip.range,2),n=t[0],o=t[1],c=(o[0]-n[0])/100,a=(o[1]-n[1])/100,i=n[0]/c,r=n[1]/a;return{left:-i+"%",top:-r+"%",width:100/c+"%",height:100/a+"%"}})),n=Object(o["computed"])((function(){if(!e.elementInfo||!e.elementInfo.clip)return nt.rect;var t=e.elementInfo.clip.shape||Je.RECT;return nt[t]})),c=Object(o["computed"])((function(){if(!e.elementInfo.filters)return"";for(var t="",n=0,o=Object.keys(e.elementInfo.filters);n<o.length;n++){var c=o[n];t+="".concat(c,"(").concat(e.elementInfo.filters[c],") ")}return t})),a=Object(o["computed"])((function(){if(!e.elementInfo.flip)return"";var t=e.elementInfo.flip,n=t.x,o=t.y;return n&&o?"rotateX(".concat(n,"deg) rotateY(").concat(o,"deg)"):n?"rotateX(".concat(n,"deg)"):o?"rotateY(".concat(o,"deg)"):""})),i=Object(o["computed"])((function(){return e.elementInfo.shadow})),r=ot(i),l=r.shadowStyle;return{imgPosition:t,clipShape:n,filter:c,flip:a,shadowStyle:l}}});n("5ec9");eo.render=$n,eo.__scopeId="data-v-008489be";var to=eo,no=Object(o["withScopeId"])("data-v-4940a104"),oo=no((function(e,t,n,c,a,i){var r=Object(o["resolveComponent"])("ElementOutline");return Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:"base-element-text",style:{top:e.elementInfo.top+"px",left:e.elementInfo.left+"px",width:e.elementInfo.width+"px",transform:"rotate(".concat(e.elementInfo.rotate,"deg)")}},[Object(o["createVNode"])("div",{class:"element-content",style:{backgroundColor:e.elementInfo.fill,opacity:e.elementInfo.opacity,textShadow:e.shadowStyle}},[Object(o["createVNode"])(r,{width:e.elementInfo.width,height:e.elementInfo.height,outline:e.elementInfo.outline},null,8,["width","height","outline"]),Object(o["createVNode"])("div",{class:"text",innerHTML:e.elementInfo.content},null,8,["innerHTML"])],4)],4)})),co=Object(o["defineComponent"])({name:"base-element-text",components:{ElementOutline:xt},props:{elementInfo:{type:Object,required:!0}},setup:function(e){var t=Object(o["computed"])((function(){return e.elementInfo.shadow})),n=ot(t),c=n.shadowStyle;return{shadowStyle:c}}});n("4e63");co.render=oo,co.__scopeId="data-v-4940a104";var ao=co,io=Object(o["defineComponent"])({name:"base-element",props:{elementInfo:{type:Object,required:!0},elementIndex:{type:Number,required:!0}},setup:function(e){var t=Object(o["computed"])((function(){var t={image:to,text:ao};return t[e.elementInfo.type]||null}));return{currentElementComponent:t}}});io.render=Zn;var ro=io,lo=Object(o["defineComponent"])({name:"thumbnail-slide",components:{ThumbnailElement:ro},props:{slide:{type:Object,required:!0},size:{type:Number,required:!0}},setup:function(e){var t=Object(o["computed"])((function(){return e.slide.background})),n=qt(t),c=n.backgroundStyle;return{backgroundStyle:c,VIEWPORT_SIZE:me,VIEWPORT_ASPECT_RATIO:he}}});n("48e7");lo.render=Kn,lo.__scopeId="data-v-1abbc471";var uo=lo,so=Object(o["defineComponent"])({name:"thumbnails",components:{draggable:Wn.a,ThumbnailSlide:uo},setup:function(){var e=Object(r["b"])(),t=Object(o["computed"])((function(){return e.state.slides})),n=Object(o["computed"])((function(){return e.state.slideIndex})),c=ce(),i=c.copySlide,l=c.pasteSlide,u=c.createSlide,s=c.copyAndPasteSlide,d=c.deleteSlide,p=c.cutSlide,f=function(t){e.commit(a.SET_ACTIVE_ELEMENT_ID_LIST,[]),n.value!==t&&e.commit(a.UPDATE_SLIDE_INDEX,t)},m=Object(o["computed"])((function(){return e.state.thumbnailsFocus})),h=function(t){m.value!==t&&e.commit(a.SET_THUMBNAILS_FOCUS,t)},v=function(n){var o=n.newIndex,c=n.oldIndex;if(c!==o){var i=JSON.parse(JSON.stringify(t.value)),r=i[c];i.splice(c,1),i.splice(o,0,r),e.commit(a.SET_SLIDES,i),e.commit(a.UPDATE_SLIDE_INDEX,o)}},b=function(){return[{text:"剪切",subText:"Ctrl + X",handler:p},{text:"复制",subText:"Ctrl + C",handler:i},{text:"粘贴",subText:"Ctrl + V",handler:l},{divider:!0},{text:"新建页面",subText:"Enter",handler:u},{text:"复制页面",handler:s},{text:"删除页面",subText:"Delete",handler:d}]};return{setThumbnailsFocus:h,slides:t,slideIndex:n,createSlide:u,changSlideIndex:f,contextmenus:b,fillDigit:F,handleDragEnd:v}}});n("78b9");so.render=Xn,so.__scopeId="data-v-5e126f4f";var po=so,fo=Object(o["defineComponent"])({name:"editor",components:{Canvas:Nn,CanvasTool:Vn,Thumbnails:po},setup:function(){de(),ye()}});n("8a22");fo.render=C,fo.__scopeId="data-v-7eed2f38";var mo=fo,ho=Object(o["defineComponent"])({name:"app",components:{Editor:mo},setup:function(){var e=Object(r["b"])(),t=Object(o["computed"])((function(){return e.state.screening}));return Object(o["onMounted"])((function(){e.commit(a.SET_AVAILABLE_FONTS),e.dispatch(i.INIT_SNAPSHOT_DATABASE)})),{screening:t}}});n("f969");ho.render=c;var vo=ho,bo=(n("c860"),n("77ed"),{class:"icon-font","aria-hidden":"true"});function Oo(e,t,n,c,a,i){return Object(o["openBlock"])(),Object(o["createBlock"])("svg",bo,[Object(o["createVNode"])("use",{"xlink:href":"#".concat(n.type)},null,8,["xlink:href"])])}var go={name:"icon-font",props:{type:{type:String,required:!0}}};n("86a4");go.render=Oo;var jo=go,So="CTX_CLICK_OUTSIDE_HANDLER",Eo=function(e,t,n){var o=n.value,c=t.composedPath(),a=c?c.indexOf(e)<0:!e.contains(t.target);a&&o(t)},Io={mounted:function(e,t){e[So]=function(n){return Eo(e,n,t)},document.addEventListener("click",e[So])},unmounted:function(e){e[So]&&(document.removeEventListener("click",e[So]),delete e[So])}},yo={install:function(e){e.directive("click-outside",Io)},directive:Io},To=Object(o["createApp"])(vo);To.component("IconFont",jo),To.use(yo),To.use(_),To.mount("#app")},cd87:function(e,t,n){"use strict";n("bbf5")},d569:function(e,t,n){"use strict";n("323f")},d7a3:function(e,t,n){"use strict";n("7f12")},dda4:function(e,t,n){"use strict";n("eb84")},e22f:function(e,t,n){"use strict";n("a12d")},e682:function(e,t,n){"use strict";n("8c93")},ea06:function(e,t,n){"use strict";n("1c33")},eb08:function(e,t,n){},eb84:function(e,t,n){},ecf8:function(e,t,n){},ed6b:function(e,t,n){},f079:function(e,t,n){"use strict";n("34cf")},f26f:function(e,t,n){"use strict";n("c4fe")},f969:function(e,t,n){"use strict";n("ed6b")},fd18:function(e,t,n){"use strict";n("7db6")},ff8d:function(e,t,n){}});
//# sourceMappingURL=app.c900ca67.js.map